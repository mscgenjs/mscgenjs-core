/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="umd" include="memoize,cloneDeep,flatten,defaults" --development --output lib/lodash/lodash.custom.js`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

!function(t,e){"function"==typeof define&&define.amd?define([],e):t.mscgen=e()}(this,function(){var t,e,r;return function(n){function o(t,e){return v.call(t,e)}function i(t,e){var r,n,o,i,a,u,c,s,l,f,d,h,p=e&&e.split("/"),g=y.map,m=g&&g["*"]||{};if(t){for(t=t.split("/"),a=t.length-1,y.nodeIdCompat&&A.test(t[a])&&(t[a]=t[a].replace(A,"")),"."===t[0].charAt(0)&&p&&(h=p.slice(0,p.length-1),t=h.concat(t)),l=0;l<t.length;l++)if("."===(d=t[l]))t.splice(l,1),l-=1;else if(".."===d){if(0===l||1===l&&".."===t[2]||".."===t[l-1])continue;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}if((p||m)&&g){for(r=t.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),p)for(f=p.length;f>0;f-=1)if((o=g[p.slice(0,f).join("/")])&&(o=o[n])){i=o,u=l;break}if(i)break;!c&&m&&m[n]&&(c=m[n],s=l)}!i&&c&&(i=c,u=s),i&&(r.splice(0,u,i),t=r.join("/"))}return t}function a(t,e){return function(){var r=C.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),p.apply(n,r.concat([t,e]))}}function u(t){return function(e){return i(e,t)}}function c(t){return function(e){b[t]=e}}function s(t){if(o(x,t)){var e=x[t];delete x[t],w[t]=!0,h.apply(n,e)}if(!o(b,t)&&!o(w,t))throw new Error("No "+t);return b[t]}function l(t){var e,r=t?t.indexOf("!"):-1;return r>-1&&(e=t.substring(0,r),t=t.substring(r+1,t.length)),[e,t]}function f(t){return t?l(t):[]}function d(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,p,g,m,b={},x={},y={},w={},v=Object.prototype.hasOwnProperty,C=[].slice,A=/\.js$/;g=function(t,e){var r,n=l(t),o=n[0],a=e[1];return t=n[1],o&&(o=i(o,a),r=s(o)),o?t=r&&r.normalize?r.normalize(t,u(a)):i(t,a):(t=i(t,a),n=l(t),o=n[0],t=n[1],o&&(r=s(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:r}},m={require:function(t){return a(t)},exports:function(t){var e=b[t];return void 0!==e?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:d(t)}}},h=function(t,e,r,i){var u,l,d,h,p,y,v,C=[],A=typeof r;if(i=i||t,y=f(i),"undefined"===A||"function"===A){for(e=!e.length&&r.length?["require","exports","module"]:e,p=0;p<e.length;p+=1)if(h=g(e[p],y),"require"===(l=h.f))C[p]=m.require(t);else if("exports"===l)C[p]=m.exports(t),v=!0;else if("module"===l)u=C[p]=m.module(t);else if(o(b,l)||o(x,l)||o(w,l))C[p]=s(l);else{if(!h.p)throw new Error(t+" missing "+l);h.p.load(h.n,a(i,!0),c(l),{}),C[p]=b[l]}d=r?r.apply(b[t],C):void 0,t&&(u&&u.exports!==n&&u.exports!==b[t]?b[t]=u.exports:d===n&&v||(b[t]=d))}else t&&(b[t]=r)},t=e=p=function(t,e,r,o,i){if("string"==typeof t)return m[t]?m[t](e):s(g(t,f(e)).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),!e)return;e.splice?(t=e,e=r,r=null):t=n}return e=e||function(){},"function"==typeof r&&(r=o,o=i),o?h(n,t,e,r):setTimeout(function(){h(n,t,e,r)},4),p},p.config=function(t){return p(t)},t._defined=b,r=function(t,e,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(r=e,e=[]),o(b,t)||o(x,t)||(x[t]=[t,e,r])},r.amd={jQuery:!0}}(),r("node_modules/almond/almond",function(){}),function(t,e){"function"==typeof r&&r.amd?r("parse/mscgenparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(0,function(){"use strict";function t(e,r,n,o){this.message=e,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function e(e,r){function n(){return s(lo,so)}function o(t,e){throw e=void 0!==e?e:s(lo,so),f(t,e)}function i(t,e){return{type:"literal",text:t,ignoreCase:e}}function a(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function u(t){return{type:"other",description:t}}function c(t){var r,n=fo[t];if(n)return n;for(r=t-1;!fo[r];)r--;for(n=fo[r],n={line:n.line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return fo[t]=n,n}function s(t,e){var r=c(t),n=c(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function l(t){so<ho||(so>ho&&(ho=so,po=[]),po.push(t))}function f(e,r){return new t(e,null,null,r)}function d(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function h(){var t,r,n,o,i,a,u,c,s,f;return t=so,r=Y(),r!==mt?(n=p(),n!==mt?(o=Y(),o!==mt?(123===e.charCodeAt(so)?(i=yt,so++):(i=mt,0===go&&l(wt)),i!==mt?(a=Y(),a!==mt?(u=g(),u!==mt?(c=Y(),c!==mt?(125===e.charCodeAt(so)?(s=vt,so++):(s=mt,0===go&&l(Ct)),s!==mt?(f=Y(),f!==mt?(lo=t,r=At(r,u),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t}function p(){var t;return e.substr(so,3).toLowerCase()===kt?(t=e.substr(so,3),so+=3):(t=mt,0===go&&l(Lt)),t}function g(){var t,e,r,n;return t=so,e=m(),e===mt&&(e=null),e!==mt?(r=x(),r===mt&&(r=null),r!==mt?(n=w(),n===mt&&(n=null),n!==mt?(lo=t,e=Tt(e,r,n),t=e):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t}function m(){var t,r,n,o,i,a;for(t=so,r=so,n=[],o=so,i=b(),i!==mt?(44===e.charCodeAt(so)?(a=_t,so++):(a=mt,0===go&&l(St)),a!==mt?(lo=o,i=Et(i),o=i):(so=o,o=mt)):(so=o,o=mt);o!==mt;)n.push(o),o=so,i=b(),i!==mt?(44===e.charCodeAt(so)?(a=_t,so++):(a=mt,0===go&&l(St)),a!==mt?(lo=o,i=Et(i),o=i):(so=o,o=mt)):(so=o,o=mt);return n!==mt?(o=so,i=b(),i!==mt?(59===e.charCodeAt(so)?(a=Pt,so++):(a=mt,0===go&&l(Ft)),a!==mt?(lo=o,i=Et(i),o=i):(so=o,o=mt)):(so=o,o=mt),o!==mt?(n=[n,o],r=n):(so=r,r=mt)):(so=r,r=mt),r!==mt&&(lo=t,r=Bt(r)),t=r}function b(){var t,r,n,o,i,a,u,c;return go++,t=so,r=Y(),r!==mt?(e.substr(so,6).toLowerCase()===Dt?(n=e.substr(so,6),so+=6):(n=mt,0===go&&l(It)),n===mt&&(e.substr(so,5).toLowerCase()===Ot?(n=e.substr(so,5),so+=5):(n=mt,0===go&&l(Mt)),n===mt&&(e.substr(so,11).toLowerCase()===Nt?(n=e.substr(so,11),so+=11):(n=mt,0===go&&l(zt)))),n!==mt?(o=Y(),o!==mt?(61===e.charCodeAt(so)?(i=Ht,so++):(i=mt,0===go&&l(Rt)),i!==mt?(a=Y(),a!==mt?(u=$(),u!==mt?(c=Y(),c!==mt?(lo=t,r=Wt(n,u),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t===mt&&(t=so,r=Y(),r!==mt?(e.substr(so,12).toLowerCase()===Gt?(n=e.substr(so,12),so+=12):(n=mt,0===go&&l(qt)),n!==mt?(o=Y(),o!==mt?(61===e.charCodeAt(so)?(i=Ht,so++):(i=mt,0===go&&l(Rt)),i!==mt?(a=Y(),a!==mt?(u=rt(),u!==mt?(c=Y(),c!==mt?(lo=t,r=Vt(n,u),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)),go--,t===mt&&(r=mt,0===go&&l(jt)),t}function x(){var t,r,n,o,i,a;for(t=so,r=so,n=[],o=so,i=y(),i!==mt?(44===e.charCodeAt(so)?(a=_t,so++):(a=mt,0===go&&l(St)),a!==mt?(lo=o,i=Xt(i),o=i):(so=o,o=mt)):(so=o,o=mt);o!==mt;)n.push(o),o=so,i=y(),i!==mt?(44===e.charCodeAt(so)?(a=_t,so++):(a=mt,0===go&&l(St)),a!==mt?(lo=o,i=Xt(i),o=i):(so=o,o=mt)):(so=o,o=mt);return n!==mt?(o=so,i=y(),i!==mt?(59===e.charCodeAt(so)?(a=Pt,so++):(a=mt,0===go&&l(Ft)),a!==mt?(lo=o,i=Xt(i),o=i):(so=o,o=mt)):(so=o,o=mt),o!==mt?(n=[n,o],r=n):(so=r,r=mt)):(so=r,r=mt),r!==mt&&(lo=t,r=Ut(r)),t=r}function y(){var t,r,n,o,i,a,u,c;return go++,t=so,r=Y(),r!==mt?(n=O(),n!==mt?(o=Y(),o!==mt?(i=so,91===e.charCodeAt(so)?(a=Zt,so++):(a=mt,0===go&&l(Yt)),a!==mt?(u=j(),u!==mt?(93===e.charCodeAt(so)?(c=$t,so++):(c=mt,0===go&&l(Jt)),c!==mt?(lo=i,a=Qt(n,u),i=a):(so=i,i=mt)):(so=i,i=mt)):(so=i,i=mt),i===mt&&(i=null),i!==mt?(a=Y(),a!==mt?(lo=t,r=te(n,i),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t===mt&&(t=so,r=Y(),r!==mt?(n=z(),n!==mt?(o=Y(),o!==mt?(i=so,91===e.charCodeAt(so)?(a=Zt,so++):(a=mt,0===go&&l(Yt)),a!==mt?(u=j(),u!==mt?(93===e.charCodeAt(so)?(c=$t,so++):(c=mt,0===go&&l(Jt)),c!==mt?(lo=i,a=Qt(n,u),i=a):(so=i,i=mt)):(so=i,i=mt)):(so=i,i=mt),i===mt&&(i=null),i!==mt?(a=Y(),a!==mt?(lo=t,r=ee(n,i),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)),go--,t===mt&&(r=mt,0===go&&l(Kt)),t}function w(){var t,r,n,o,i;if(t=[],r=so,n=v(),n!==mt?(o=Y(),o!==mt?(59===e.charCodeAt(so)?(i=Pt,so++):(i=mt,0===go&&l(Ft)),i!==mt?(lo=r,n=re(n),r=n):(so=r,r=mt)):(so=r,r=mt)):(so=r,r=mt),r!==mt)for(;r!==mt;)t.push(r),r=so,n=v(),n!==mt?(o=Y(),o!==mt?(59===e.charCodeAt(so)?(i=Pt,so++):(i=mt,0===go&&l(Ft)),i!==mt?(lo=r,n=re(n),r=n):(so=r,r=mt)):(so=r,r=mt)):(so=r,r=mt);else t=mt;return t}function v(){var t,r,n,o,i,a,u;for(t=so,r=so,n=[],o=so,i=C(),i!==mt?(a=Y(),a!==mt?(44===e.charCodeAt(so)?(u=_t,so++):(u=mt,0===go&&l(St)),u!==mt?(lo=o,i=re(i),o=i):(so=o,o=mt)):(so=o,o=mt)):(so=o,o=mt);o!==mt;)n.push(o),o=so,i=C(),i!==mt?(a=Y(),a!==mt?(44===e.charCodeAt(so)?(u=_t,so++):(u=mt,0===go&&l(St)),u!==mt?(lo=o,i=re(i),o=i):(so=o,o=mt)):(so=o,o=mt)):(so=o,o=mt);return n!==mt?(o=so,i=C(),i!==mt&&(lo=o,i=re(i)),o=i,o!==mt?(n=[n,o],r=n):(so=r,r=mt)):(so=r,r=mt),r!==mt&&(lo=t,r=ne(r)),t=r}function C(){var t,r,n,o,i,a;return t=so,r=so,n=A(),n!==mt&&(lo=r,n=re(n)),r=n,r===mt&&(r=so,n=L(),n!==mt&&(lo=r,n=re(n)),(r=n)===mt&&(r=so,n=k(),n!==mt&&(lo=r,n=re(n)),r=n)),r!==mt?(n=so,91===e.charCodeAt(so)?(o=Zt,so++):(o=mt,0===go&&l(Yt)),o!==mt?(i=j(),i!==mt?(93===e.charCodeAt(so)?(a=$t,so++):(a=mt,0===go&&l(Jt)),a!==mt?(lo=n,o=oe(r,i),n=o):(so=n,n=mt)):(so=n,n=mt)):(so=n,n=mt),n===mt&&(n=null),n!==mt?(lo=t,r=ie(r,n),t=r):(so=t,t=mt)):(so=t,t=mt),t}function A(){var t,e,r,n;return t=so,e=Y(),e!==mt?(r=T(),r!==mt?(n=Y(),n!==mt?(lo=t,e=ae(r),t=e):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t}function k(){var t,e,r,n;return t=so,e=Y(),e!==mt?(r=_(),r!==mt?(n=Y(),n!==mt?(lo=t,e=ae(r),t=e):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t}function L(){var t,r,n,o,i,a,u,c;return t=so,r=Y(),r!==mt?(n=N(),n!==mt?(o=Y(),o!==mt?(i=S(),i!==mt?(a=Y(),a!==mt?(u=N(),u!==mt?(c=Y(),c!==mt?(lo=t,r=ue(n,i,u),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t===mt&&(t=so,r=Y(),r!==mt?(42===e.charCodeAt(so)?(n=ce,so++):(n=mt,0===go&&l(se)),n!==mt?(o=Y(),o!==mt?(i=F(),i!==mt?(a=Y(),a!==mt?(u=N(),u!==mt?(c=Y(),c!==mt?(lo=t,r=le(i,u),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t===mt&&(t=so,r=Y(),r!==mt?(n=N(),n!==mt?(o=Y(),o!==mt?(i=P(),i!==mt?(a=Y(),a!==mt?(42===e.charCodeAt(so)?(u=ce,so++):(u=mt,0===go&&l(se)),u!==mt?(c=Y(),c!==mt?(lo=t,r=fe(n,i),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t===mt&&(t=so,r=Y(),r!==mt?(n=N(),n!==mt?(o=Y(),o!==mt?(i=E(),i!==mt?(a=Y(),a!==mt?(42===e.charCodeAt(so)?(u=ce,so++):(u=mt,0===go&&l(se)),u!==mt?(c=Y(),c!==mt?(lo=t,r=fe(n,i),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)))),t}function T(){var t;return go++,e.substr(so,3)===he?(t=he,so+=3):(t=mt,0===go&&l(pe)),t===mt&&(e.substr(so,3)===ge?(t=ge,so+=3):(t=mt,0===go&&l(me))),go--,t===mt&&(mt,0===go&&l(de)),t}function _(){var t;return go++,e.substr(so,3)===xe?(t=xe,so+=3):(t=mt,0===go&&l(ye)),go--,t===mt&&(mt,0===go&&l(be)),t}function S(){var t,e;return t=so,e=E(),e===mt&&(e=P())===mt&&(e=F())===mt&&(e=B()),e!==mt&&(lo=t,e=we(e)),t=e}function E(){var t;return go++,e.substr(so,2)===Ce?(t=Ce,so+=2):(t=mt,0===go&&l(Ae)),t===mt&&(e.substr(so,3)===ke?(t=ke,so+=3):(t=mt,0===go&&l(Le)),t===mt&&(e.substr(so,2)===Te?(t=Te,so+=2):(t=mt,0===go&&l(_e)),t===mt&&(e.substr(so,5)===Se?(t=Se,so+=5):(t=mt,0===go&&l(Ee)),t===mt&&(e.substr(so,3)===Pe?(t=Pe,so+=3):(t=mt,0===go&&l(Fe)),t===mt&&(e.substr(so,2)===Be?(t=Be,so+=2):(t=mt,0===go&&l(je)),t===mt&&(e.substr(so,4)===De?(t=De,so+=4):(t=mt,0===go&&l(Ie)),t===mt&&(e.substr(so,2)===Oe?(t=Oe,so+=2):(t=mt,0===go&&l(Me)),t===mt&&(e.substr(so,3)===Ne?(t=Ne,so+=3):(t=mt,0===go&&l(ze)))))))))),go--,t===mt&&(mt,0===go&&l(ve)),t}function P(){var t;return go++,e.substr(so,2)===Re?(t=Re,so+=2):(t=mt,0===go&&l(We)),t===mt&&(e.substr(so,3)===Ge?(t=Ge,so+=3):(t=mt,0===go&&l(qe)),t===mt&&(e.substr(so,2)===Ve?(t=Ve,so+=2):(t=mt,0===go&&l(Xe)),t===mt&&(e.substr(so,2)===Ue?(t=Ue,so+=2):(t=mt,0===go&&l(Ke)),t===mt&&(e.substr(so,2)===Ze?(t=Ze,so+=2):(t=mt,0===go&&l(Ye)),t===mt&&(e.substr(so,2).toLowerCase()===$e?(t=e.substr(so,2),so+=2):(t=mt,0===go&&l(Je))))))),go--,t===mt&&(mt,0===go&&l(He)),t}function F(){var t;return go++,e.substr(so,2)===tr?(t=tr,so+=2):(t=mt,0===go&&l(er)),t===mt&&(e.substr(so,3)===rr?(t=rr,so+=3):(t=mt,0===go&&l(nr)),t===mt&&(e.substr(so,2)===or?(t=or,so+=2):(t=mt,0===go&&l(ir)),t===mt&&(e.substr(so,2)===ar?(t=ar,so+=2):(t=mt,0===go&&l(ur)),t===mt&&(e.substr(so,2)===cr?(t=cr,so+=2):(t=mt,0===go&&l(sr)),t===mt&&(e.substr(so,2).toLowerCase()===lr?(t=e.substr(so,2),so+=2):(t=mt,0===go&&l(fr))))))),go--,t===mt&&(mt,0===go&&l(Qe)),t}function B(){var t;return go++,e.substr(so,4).toLowerCase()===hr?(t=e.substr(so,4),so+=4):(t=mt,0===go&&l(pr)),t===mt&&(e.substr(so,4).toLowerCase()===gr?(t=e.substr(so,4),so+=4):(t=mt,0===go&&l(mr)),t===mt&&(e.substr(so,4).toLowerCase()===br?(t=e.substr(so,4),so+=4):(t=mt,0===go&&l(xr)),t===mt&&(e.substr(so,3).toLowerCase()===yr?(t=e.substr(so,3),so+=3):(t=mt,0===go&&l(wr))))),go--,t===mt&&(mt,0===go&&l(dr)),t}function j(){var t,r,n,o,i,a;for(t=so,r=so,n=[],o=so,i=D(),i!==mt?(44===e.charCodeAt(so)?(a=_t,so++):(a=mt,0===go&&l(St)),a!==mt?(lo=o,i=re(i),o=i):(so=o,o=mt)):(so=o,o=mt);o!==mt;)n.push(o),o=so,i=D(),i!==mt?(44===e.charCodeAt(so)?(a=_t,so++):(a=mt,0===go&&l(St)),a!==mt?(lo=o,i=re(i),o=i):(so=o,o=mt)):(so=o,o=mt);return n!==mt?(o=so,i=D(),i!==mt&&(lo=o,i=re(i)),o=i,o!==mt?(n=[n,o],r=n):(so=r,r=mt)):(so=r,r=mt),r!==mt&&(lo=t,r=vr(r)),t=r}function D(){var t,r,n,o,i,a,u,c;return t=so,r=Y(),r!==mt?(n=I(),n!==mt?(o=Y(),o!==mt?(61===e.charCodeAt(so)?(i=Ht,so++):(i=mt,0===go&&l(Rt)),i!==mt?(a=Y(),a!==mt?(u=N(),u!==mt?(c=Y(),c!==mt?(lo=t,r=Cr(n,u),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t}function I(){var t;return go++,e.substr(so,5).toLowerCase()===kr?(t=e.substr(so,5),so+=5):(t=mt,0===go&&l(Lr)),t===mt&&(e.substr(so,5).toLowerCase()===Tr?(t=e.substr(so,5),so+=5):(t=mt,0===go&&l(_r)),t===mt&&(e.substr(so,2).toLowerCase()===Sr?(t=e.substr(so,2),so+=2):(t=mt,0===go&&l(Er)),t===mt&&(e.substr(so,3).toLowerCase()===Pr?(t=e.substr(so,3),so+=3):(t=mt,0===go&&l(Fr)),t===mt&&(e.substr(so,9).toLowerCase()===Br?(t=e.substr(so,9),so+=9):(t=mt,0===go&&l(jr)),t===mt&&(e.substr(so,10).toLowerCase()===Dr?(t=e.substr(so,10),so+=10):(t=mt,0===go&&l(Ir)),t===mt&&(e.substr(so,9).toLowerCase()===Or?(t=e.substr(so,9),so+=9):(t=mt,0===go&&l(Mr)),t===mt&&(e.substr(so,10).toLowerCase()===Nr?(t=e.substr(so,10),so+=10):(t=mt,0===go&&l(zr)),t===mt&&(e.substr(so,11).toLowerCase()===Hr?(t=e.substr(so,11),so+=11):(t=mt,0===go&&l(Rr)),t===mt&&(e.substr(so,12).toLowerCase()===Wr?(t=e.substr(so,12),so+=12):(t=mt,0===go&&l(Gr)),t===mt&&(e.substr(so,12).toLowerCase()===qr?(t=e.substr(so,12),so+=12):(t=mt,0===go&&l(Vr)),t===mt&&(e.substr(so,13).toLowerCase()===Xr?(t=e.substr(so,13),so+=13):(t=mt,0===go&&l(Ur)),t===mt&&(e.substr(so,12).toLowerCase()===Kr?(t=e.substr(so,12),so+=12):(t=mt,0===go&&l(Zr)),t===mt&&(e.substr(so,13).toLowerCase()===Yr?(t=e.substr(so,13),so+=13):(t=mt,0===go&&l($r)),t===mt&&(e.substr(so,14).toLowerCase()===Jr?(t=e.substr(so,14),so+=14):(t=mt,0===go&&l(Qr)),t===mt&&(e.substr(so,15).toLowerCase()===tn?(t=e.substr(so,15),so+=15):(t=mt,0===go&&l(en)),t===mt&&(e.substr(so,7).toLowerCase()===rn?(t=e.substr(so,7),so+=7):(t=mt,0===go&&l(nn)))))))))))))))))),go--,t===mt&&(mt,0===go&&l(Ar)),t}function O(){var t,r,n,o;return go++,t=so,34===e.charCodeAt(so)?(r=an,so++):(r=mt,0===go&&l(un)),r!==mt?(n=M(),n!==mt?(34===e.charCodeAt(so)?(o=an,so++):(o=mt,0===go&&l(un)),o!==mt?(lo=t,r=cn(n),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),go--,t===mt&&(r=mt,0===go&&l(on)),t}function M(){var t,r,n,o;for(t=[],r=so,n=so,go++,34===e.charCodeAt(so)?(o=an,so++):(o=mt,0===go&&l(un)),go--,o===mt?n=void 0:(so=n,n=mt),n!==mt?(e.substr(so,2)===sn?(o=sn,so+=2):(o=mt,0===go&&l(ln)),o===mt&&(e.length>so?(o=e.charAt(so),so++):(o=mt,0===go&&l(fn))),o!==mt?(lo=r,n=dn(o),r=n):(so=r,r=mt)):(so=r,r=mt);r!==mt;)t.push(r),r=so,n=so,go++,34===e.charCodeAt(so)?(o=an,so++):(o=mt,0===go&&l(un)),go--,o===mt?n=void 0:(so=n,n=mt),n!==mt?(e.substr(so,2)===sn?(o=sn,so+=2):(o=mt,0===go&&l(ln)),o===mt&&(e.length>so?(o=e.charAt(so),so++):(o=mt,0===go&&l(fn))),o!==mt?(lo=r,n=dn(o),r=n):(so=r,r=mt)):(so=r,r=mt);return t}function N(){var t;return go++,t=z(),t===mt&&(t=O()),go--,t===mt&&(mt,0===go&&l(hn)),t}function z(){var t,r,n;if(t=so,r=[],pn.test(e.charAt(so))?(n=e.charAt(so),so++):(n=mt,0===go&&l(gn)),n!==mt)for(;n!==mt;)r.push(n),pn.test(e.charAt(so))?(n=e.charAt(so),so++):(n=mt,0===go&&l(gn));else r=mt;return r!==mt&&(lo=t,r=mn(r)),t=r}function H(){var t,r;return go++,t=so,xn.test(e.charAt(so))?(r=e.charAt(so),so++):(r=mt,0===go&&l(yn)),r!==mt&&(lo=t,r=dn(r)),t=r,go--,t===mt&&(r=mt,0===go&&l(bn)),t}function R(){var t,r;return go++,t=so,vn.test(e.charAt(so))?(r=e.charAt(so),so++):(r=mt,0===go&&l(Cn)),r!==mt&&(lo=t,r=dn(r)),t=r,go--,t===mt&&(r=mt,0===go&&l(wn)),t}function W(){var t;return e.substr(so,2)===An?(t=An,so+=2):(t=mt,0===go&&l(kn)),t}function G(){var t;return e.substr(so,2)===Ln?(t=Ln,so+=2):(t=mt,0===go&&l(Tn)),t}function q(){var t,r,n;return t=so,r=so,go++,e.substr(so,2)===Ln?(n=Ln,so+=2):(n=mt,0===go&&l(Tn)),go--,n===mt?r=void 0:(so=r,r=mt),r!==mt?(e.length>so?(n=e.charAt(so),so++):(n=mt,0===go&&l(fn)),n!==mt?(lo=t,r=dn(n),t=r):(so=t,t=mt)):(so=t,t=mt),t}function V(){var t,e,r,n;if(t=so,(e=W())!==mt){for(r=[],n=q();n!==mt;)r.push(n),n=q();r!==mt?(n=G(),n!==mt?(lo=t,e=_n(e,r,n),t=e):(so=t,t=mt)):(so=t,t=mt)}else so=t,t=mt;return t}function X(){var t;return e.substr(so,2)===Sn?(t=Sn,so+=2):(t=mt,0===go&&l(En)),t===mt&&(35===e.charCodeAt(so)?(t=Pn,so++):(t=mt,0===go&&l(Fn))),t}function U(){var t;return Bn.test(e.charAt(so))?(t=e.charAt(so),so++):(t=mt,0===go&&l(jn)),t}function K(){var t,e,r,n;if(t=so,(e=X())!==mt){for(r=[],n=U();n!==mt;)r.push(n),n=U();r!==mt?(lo=t,e=Dn(e,r),t=e):(so=t,t=mt)}else so=t,t=mt;return t}function Z(){var t;return go++,t=K(),t===mt&&(t=V()),go--,t===mt&&(mt,0===go&&l(In)),t}function Y(){var t,e;for(t=[],e=H(),e===mt&&(e=R())===mt&&(e=Z());e!==mt;)t.push(e),(e=H())===mt&&(e=R())===mt&&(e=Z());return t}function $(){var t,e;return go++,t=so,e=J(),e!==mt&&(lo=t,e=Mn(e)),t=e,t===mt&&(t=so,e=Q(),e!==mt&&(lo=t,e=Nn(e)),t=e),go--,t===mt&&(e=mt,0===go&&l(On)),t}function J(){var t,r,n,o;return t=so,34===e.charCodeAt(so)?(r=an,so++):(r=mt,0===go&&l(un)),r!==mt?(n=Q(),n!==mt?(34===e.charCodeAt(so)?(o=an,so++):(o=mt,0===go&&l(un)),o!==mt?(lo=t,r=zn(n),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t}function Q(){var t;return t=et(),t===mt&&(t=tt()),t}function tt(){var t,r,n;if(go++,t=so,r=[],Rn.test(e.charAt(so))?(n=e.charAt(so),so++):(n=mt,0===go&&l(Wn)),n!==mt)for(;n!==mt;)r.push(n),Rn.test(e.charAt(so))?(n=e.charAt(so),so++):(n=mt,0===go&&l(Wn));else r=mt;return r!==mt&&(lo=t,r=Gn(r)),t=r,go--,t===mt&&(r=mt,0===go&&l(Hn)),t}function et(){var t,r,n,o,i;return go++,t=so,r=so,n=tt(),n!==mt?(46===e.charCodeAt(so)?(o=Vn,so++):(o=mt,0===go&&l(Xn)),o!==mt?(i=tt(),i!==mt?(n=[n,o,i],r=n):(so=r,r=mt)):(so=r,r=mt)):(so=r,r=mt),r!==mt&&(lo=t,r=Un(r)),t=r,go--,t===mt&&(r=mt,0===go&&l(qn)),t}function rt(){var t,e;return go++,t=so,e=nt(),e!==mt&&(lo=t,e=Zn(e)),t=e,t===mt&&(t=so,e=ot(),e!==mt&&(lo=t,e=Yn(e)),t=e),go--,t===mt&&(e=mt,0===go&&l(Kn)),t}function nt(){var t,r,n,o;return t=so,34===e.charCodeAt(so)?(r=an,so++):(r=mt,0===go&&l(un)),r!==mt?(n=ot(),n!==mt?(34===e.charCodeAt(so)?(o=an,so++):(o=mt,0===go&&l(un)),o!==mt?(lo=t,r=Mn(n),t=r):(so=t,t=mt)):(so=t,t=mt)):(so=t,t=mt),t}function ot(){var t;return e.substr(so,4).toLowerCase()===$n?(t=e.substr(so,4),so+=4):(t=mt,0===go&&l(Jn)),t===mt&&(e.substr(so,5).toLowerCase()===Qn?(t=e.substr(so,5),so+=5):(t=mt,0===go&&l(to)),t===mt&&(e.substr(so,2).toLowerCase()===eo?(t=e.substr(so,2),so+=2):(t=mt,0===go&&l(ro)),t===mt&&(e.substr(so,3).toLowerCase()===no?(t=e.substr(so,3),so+=3):(t=mt,0===go&&l(oo)),t===mt&&(48===e.charCodeAt(so)?(t=io,so++):(t=mt,0===go&&l(ao)),t===mt&&(49===e.charCodeAt(so)?(t=uo,so++):(t=mt,0===go&&l(co))))))),t}function it(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function at(t){var e={};return t.forEach(function(t){e=it(e,t)}),e}function ut(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function ct(t,e){var r={};return r[t.toLowerCase()]=e,r}function st(t,e){return void 0===e||"*"===e||t.some(function(t){return t.name===e})}function lt(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(t)>-1}function ft(t,e){return"Entity '"+t+"' in arc '"+e.from+" "+e.kind+" "+e.to+"' is not defined."}function dt(t,e){this.name="EntityNotDefinedError",this.message=ft(t,e),e.location&&(this.location=e.location,this.location.start.line++,this.location.end.line++)}function ht(t,e){return t||(t=[]),e&&e.forEach(function(e){e.forEach(function(e){if(e.from&&!st(t,e.from))throw new dt(e.from,e);if(e.to&&!st(t,e.to))throw new dt(e.to,e);e.location&&delete e.location})}),t}function pt(){return{extendedOptions:!1,extendedArcTypes:!1,extendedFeatures:!1}}r=void 0!==r?r:{};var gt,mt={},bt={program:h},xt=h,yt="{",wt=i("{",!1),vt="}",Ct=i("}",!1),At=function(t,e){e.entities=ht(e.entities,e.arcs);var r=e;return r=it({meta:pt()},r),t.length>0&&(r=it({precomment:t},r)),r},kt="msc",Lt=i("msc",!0),Tt=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},_t=",",St=i(",",!1),Et=function(t){return t},Pt=";",Ft=i(";",!1),Bt=function(t){return at(t[0].concat(t[1]))},jt=u("option"),Dt="hscale",It=i("hscale",!0),Ot="width",Mt=i("width",!0),Nt="arcgradient",zt=i("arcgradient",!0),Ht="=",Rt=i("=",!1),Wt=function(t,e){return ct(t,e)},Gt="wordwraparcs",qt=i("wordwraparcs",!0),Vt=function(t,e){return ct(t,ut(e))},Xt=function(t){return t},Ut=function(t){return t[0].concat(t[1])},Kt=u("entity"),Zt="[",Yt=i("[",!1),$t="]",Jt=i("]",!1),Qt=function(t,e){return e},te=function(t,e){return it({name:t},e)},ee=function(t,e){return lt(t)&&o("Keywords aren't allowed as entity names (embed them in quotes if you need them)"),it({name:t},e)},re=function(t){return t},ne=function(t){return t[0].concat(t[1])},oe=function(t,e){return e},ie=function(t,e){return it(t,e)},ae=function(t){return{kind:t}},ue=function(t,e,r){return{kind:e,from:t,to:r,location:n()}},ce="*",se=i("*",!1),le=function(t,e){return{kind:t,from:"*",to:e,location:n()}},fe=function(t,e){return{kind:e,from:t,to:"*",location:n()}},de=u("empty row"),he="|||",pe=i("|||",!1),ge="...",me=i("...",!1),be=u("---"),xe="---",ye=i("---",!1),we=function(t){return t.toLowerCase()},ve=u("bi-directional arrow"),Ce="--",Ae=i("--",!1),ke="<->",Le=i("<->",!1),Te="==",_e=i("==",!1),Se="<<=>>",Ee=i("<<=>>",!1),Pe="<=>",Fe=i("<=>",!1),Be="..",je=i("..",!1),De="<<>>",Ie=i("<<>>",!1),Oe="::",Me=i("::",!1),Ne="<:>",ze=i("<:>",!1),He=u("left to right arrow"),Re="->",We=i("->",!1),Ge="=>>",qe=i("=>>",!1),Ve="=>",Xe=i("=>",!1),Ue=">>",Ke=i(">>",!1),Ze=":>",Ye=i(":>",!1),$e="-x",Je=i("-x",!0),Qe=u("right to left arrow"),tr="<-",er=i("<-",!1),rr="<<=",nr=i("<<=",!1),or="<=",ir=i("<=",!1),ar="<<",ur=i("<<",!1),cr="<:",sr=i("<:",!1),lr="x-",fr=i("x-",!0),dr=u("box"),hr="note",pr=i("note",!0),gr="abox",mr=i("abox",!0),br="rbox",xr=i("rbox",!0),yr="box",wr=i("box",!0),vr=function(t){return at(t[0].concat(t[1]))},Cr=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},Ar=u("attribute name"),kr="label",Lr=i("label",!0),Tr="idurl",_r=i("idurl",!0),Sr="id",Er=i("id",!0),Pr="url",Fr=i("url",!0),Br="linecolor",jr=i("linecolor",!0),Dr="linecolour",Ir=i("linecolour",!0),Or="textcolor",Mr=i("textcolor",!0),Nr="textcolour",zr=i("textcolour",!0),Hr="textbgcolor",Rr=i("textbgcolor",!0),Wr="textbgcolour",Gr=i("textbgcolour",!0),qr="arclinecolor",Vr=i("arclinecolor",!0),Xr="arclinecolour",Ur=i("arclinecolour",!0),Kr="arctextcolor",Zr=i("arctextcolor",!0),Yr="arctextcolour",$r=i("arctextcolour",!0),Jr="arctextbgcolor",Qr=i("arctextbgcolor",!0),tn="arctextbgcolour",en=i("arctextbgcolour",!0),rn="arcskip",nn=i("arcskip",!0),on=u("double quoted string"),an='"',un=i('"',!1),cn=function(t){return t.join("")},sn='\\"',ln=i('\\"',!1),fn=function(){return{type:"any"}}(),dn=function(t){return t},hn=u("identifier"),pn=/^[A-Za-z_0-9]/,gn=a([["A","Z"],["a","z"],"_",["0","9"]],!1,!1),mn=function(t){return t.join("")},bn=u("whitespace"),xn=/^[ \t]/,yn=a([" ","\t"],!1,!1),wn=u("lineend"),vn=/^[\r\n]/,Cn=a(["\r","\n"],!1,!1),An="/*",kn=i("/*",!1),Ln="*/",Tn=i("*/",!1),_n=function(t,e,r){return t+e.join("")+r},Sn="//",En=i("//",!1),Pn="#",Fn=i("#",!1),Bn=/^[^\r\n]/,jn=a(["\r","\n"],!0,!1),Dn=function(t,e){return t+e.join("")},In=u("comment"),On=u("number"),Mn=function(t){return t},Nn=function(t){return t.toString()},zn=function(t){return t.toString()},Hn=u("cardinal"),Rn=/^[0-9]/,Wn=a([["0","9"]],!1,!1),Gn=function(t){return parseInt(t.join(""),10)},qn=u("real"),Vn=".",Xn=i(".",!1),Un=function(t){return parseFloat(t.join(""))},Kn=u("boolean"),Zn=function(t){return t},Yn=function(t){return t.toString()},$n="true",Jn=i("true",!0),Qn="false",to=i("false",!0),eo="on",ro=i("on",!0),no="off",oo=i("off",!0),io="0",ao=i("0",!1),uo="1",co=i("1",!1),so=0,lo=0,fo=[{line:1,column:1}],ho=0,po=[],go=0;if("startRule"in r){if(!(r.startRule in bt))throw new Error("Can't start parsing from rule \""+r.startRule+'".');xt=bt[r.startRule]}if((gt=xt())!==mt&&so===e.length)return gt;throw gt!==mt&&so<e.length&&l(function(){return{type:"end"}}()),d(po,ho<e.length?e.charAt(ho):null,ho<e.length?s(ho,ho+1):s(ho,ho))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return a[t.type](t)}var a={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:e}}),function(t,e){"function"==typeof r&&r.amd?r("parse/xuparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(0,function(){"use strict";function t(e,r,n,o){this.message=e,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function e(e,r){function n(){return s(di,fi)}function o(t,e){throw e=void 0!==e?e:s(di,fi),f(t,e)}function i(t,e){return{type:"literal",text:t,ignoreCase:e}}function a(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function u(t){return{type:"other",description:t}}function c(t){var r,n=hi[t];if(n)return n;for(r=t-1;!hi[r];)r--;for(n=hi[r],n={line:n.line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return hi[t]=n,n}function s(t,e){var r=c(t),n=c(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function l(t){fi<pi||(fi>pi&&(pi=fi,gi=[]),gi.push(t))}function f(e,r){return new t(e,null,null,r)}function d(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function h(){var t,r,n,o,i,a,u,c,s,f;return t=fi,r=Q(),r!==kt?(n=p(),n!==kt?(o=Q(),o!==kt?(123===e.charCodeAt(fi)?(i=_t,fi++):(i=kt,0===mi&&l(St)),i!==kt?(a=Q(),a!==kt?(u=g(),u!==kt?(c=Q(),c!==kt?(125===e.charCodeAt(fi)?(s=Et,fi++):(s=kt,0===mi&&l(Pt)),s!==kt?(f=Q(),f!==kt?(di=t,r=Ft(r,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t}function p(){var t;return e.substr(fi,3).toLowerCase()===Bt?(t=e.substr(fi,3),fi+=3):(t=kt,0===mi&&l(jt)),t===kt&&(e.substr(fi,2).toLowerCase()===Dt?(t=e.substr(fi,2),fi+=2):(t=kt,0===mi&&l(It))),t}function g(){var t,e,r,n;return t=fi,e=m(),e===kt&&(e=null),e!==kt?(r=x(),r===kt&&(r=null),r!==kt?(n=w(),n===kt&&(n=null),n!==kt?(di=t,e=Ot(e,r,n),t=e):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t}function m(){var t,r,n,o,i,a;for(t=fi,r=fi,n=[],o=fi,i=b(),i!==kt?(44===e.charCodeAt(fi)?(a=Mt,fi++):(a=kt,0===mi&&l(Nt)),a!==kt?(di=o,i=zt(i),o=i):(fi=o,o=kt)):(fi=o,o=kt);o!==kt;)n.push(o),o=fi,i=b(),i!==kt?(44===e.charCodeAt(fi)?(a=Mt,fi++):(a=kt,0===mi&&l(Nt)),a!==kt?(di=o,i=zt(i),o=i):(fi=o,o=kt)):(fi=o,o=kt);return n!==kt?(o=fi,i=b(),i!==kt?(59===e.charCodeAt(fi)?(a=Ht,fi++):(a=kt,0===mi&&l(Rt)),a!==kt?(di=o,i=zt(i),o=i):(fi=o,o=kt)):(fi=o,o=kt),o!==kt?(n=[n,o],r=n):(fi=r,r=kt)):(fi=r,r=kt),r!==kt&&(di=t,r=Wt(r)),t=r}function b(){var t,r,n,o,i,a,u,c;return mi++,t=fi,r=Q(),r!==kt?(e.substr(fi,6).toLowerCase()===qt?(n=e.substr(fi,6),fi+=6):(n=kt,0===mi&&l(Vt)),n===kt&&(e.substr(fi,11).toLowerCase()===Xt?(n=e.substr(fi,11),fi+=11):(n=kt,0===mi&&l(Ut))),n!==kt?(o=Q(),o!==kt?(61===e.charCodeAt(fi)?(i=Kt,fi++):(i=kt,0===mi&&l(Zt)),i!==kt?(a=Q(),a!==kt?(u=tt(),u!==kt?(c=Q(),c!==kt?(di=t,r=Yt(n,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t===kt&&(t=fi,r=Q(),r!==kt?(e.substr(fi,5).toLowerCase()===$t?(n=e.substr(fi,5),fi+=5):(n=kt,0===mi&&l(Jt)),n!==kt?(o=Q(),o!==kt?(61===e.charCodeAt(fi)?(i=Kt,fi++):(i=kt,0===mi&&l(Zt)),i!==kt?(a=Q(),a!==kt?(u=ct(),u!==kt?(c=Q(),c!==kt?(di=t,r=Yt(n,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t===kt&&(t=fi,r=Q(),r!==kt?(e.substr(fi,12).toLowerCase()===Qt?(n=e.substr(fi,12),fi+=12):(n=kt,0===mi&&l(te)),n!==kt?(o=Q(),o!==kt?(61===e.charCodeAt(fi)?(i=Kt,fi++):(i=kt,0===mi&&l(Zt)),i!==kt?(a=Q(),a!==kt?(u=it(),u!==kt?(c=Q(),c!==kt?(di=t,r=ee(n,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t===kt&&(t=fi,r=Q(),r!==kt?(e.substr(fi,16).toLowerCase()===re?(n=e.substr(fi,16),fi+=16):(n=kt,0===mi&&l(ne)),n!==kt?(o=Q(),o!==kt?(61===e.charCodeAt(fi)?(i=Kt,fi++):(i=kt,0===mi&&l(Zt)),i!==kt?(a=Q(),a!==kt?(u=it(),u!==kt?(c=Q(),c!==kt?(di=t,r=ee(n,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t===kt&&(t=fi,r=Q(),r!==kt?(e.substr(fi,13).toLowerCase()===oe?(n=e.substr(fi,13),fi+=13):(n=kt,0===mi&&l(ie)),n!==kt?(o=Q(),o!==kt?(61===e.charCodeAt(fi)?(i=Kt,fi++):(i=kt,0===mi&&l(Zt)),i!==kt?(a=Q(),a!==kt?(u=it(),u!==kt?(c=Q(),c!==kt?(di=t,r=ee(n,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t===kt&&(t=fi,r=Q(),r!==kt?(e.substr(fi,9).toLowerCase()===ae?(n=e.substr(fi,9),fi+=9):(n=kt,0===mi&&l(ue)),n!==kt?(o=Q(),o!==kt?(61===e.charCodeAt(fi)?(i=Kt,fi++):(i=kt,0===mi&&l(Zt)),i!==kt?(a=Q(),a!==kt?(u=z(),u!==kt?(c=Q(),c!==kt?(di=t,r=Yt(n,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)))))),mi--,t===kt&&(r=kt,0===mi&&l(Gt)),t}function x(){var t,r,n,o,i,a;for(t=fi,r=fi,n=[],o=fi,i=y(),i!==kt?(44===e.charCodeAt(fi)?(a=Mt,fi++):(a=kt,0===mi&&l(Nt)),a!==kt?(di=o,i=ce(i),o=i):(fi=o,o=kt)):(fi=o,o=kt);o!==kt;)n.push(o),o=fi,i=y(),i!==kt?(44===e.charCodeAt(fi)?(a=Mt,fi++):(a=kt,0===mi&&l(Nt)),a!==kt?(di=o,i=ce(i),o=i):(fi=o,o=kt)):(fi=o,o=kt)
;return n!==kt?(o=fi,i=y(),i!==kt?(59===e.charCodeAt(fi)?(a=Ht,fi++):(a=kt,0===mi&&l(Rt)),a!==kt?(di=o,i=ce(i),o=i):(fi=o,o=kt)):(fi=o,o=kt),o!==kt?(n=[n,o],r=n):(fi=r,r=kt)):(fi=r,r=kt),r!==kt&&(di=t,r=se(r)),t=r}function y(){var t,r,n,o,i,a,u,c;return mi++,t=fi,r=Q(),r!==kt?(n=z(),n!==kt?(o=Q(),o!==kt?(i=fi,91===e.charCodeAt(fi)?(a=fe,fi++):(a=kt,0===mi&&l(de)),a!==kt?(u=O(),u!==kt?(93===e.charCodeAt(fi)?(c=he,fi++):(c=kt,0===mi&&l(pe)),c!==kt?(di=i,a=ge(n,u),i=a):(fi=i,i=kt)):(fi=i,i=kt)):(fi=i,i=kt),i===kt&&(i=null),i!==kt?(a=Q(),a!==kt?(di=t,r=me(n,i),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t===kt&&(t=fi,r=Q(),r!==kt?(n=W(),n!==kt?(o=Q(),o!==kt?(i=fi,91===e.charCodeAt(fi)?(a=fe,fi++):(a=kt,0===mi&&l(de)),a!==kt?(u=O(),u!==kt?(93===e.charCodeAt(fi)?(c=he,fi++):(c=kt,0===mi&&l(pe)),c!==kt?(di=i,a=ge(n,u),i=a):(fi=i,i=kt)):(fi=i,i=kt)):(fi=i,i=kt),i===kt&&(i=null),i!==kt?(a=Q(),a!==kt?(di=t,r=be(n,i),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)),mi--,t===kt&&(r=kt,0===mi&&l(le)),t}function w(){var t,r,n,o,i;if(t=[],r=fi,n=v(),n!==kt?(o=Q(),o!==kt?(59===e.charCodeAt(fi)?(i=Ht,fi++):(i=kt,0===mi&&l(Rt)),i!==kt?(di=r,n=xe(n),r=n):(fi=r,r=kt)):(fi=r,r=kt)):(fi=r,r=kt),r!==kt)for(;r!==kt;)t.push(r),r=fi,n=v(),n!==kt?(o=Q(),o!==kt?(59===e.charCodeAt(fi)?(i=Ht,fi++):(i=kt,0===mi&&l(Rt)),i!==kt?(di=r,n=xe(n),r=n):(fi=r,r=kt)):(fi=r,r=kt)):(fi=r,r=kt);else t=kt;return t}function v(){var t,r,n,o,i,a,u;for(t=fi,r=fi,n=[],o=fi,i=C(),i!==kt?(a=Q(),a!==kt?(44===e.charCodeAt(fi)?(u=Mt,fi++):(u=kt,0===mi&&l(Nt)),u!==kt?(di=o,i=xe(i),o=i):(fi=o,o=kt)):(fi=o,o=kt)):(fi=o,o=kt);o!==kt;)n.push(o),o=fi,i=C(),i!==kt?(a=Q(),a!==kt?(44===e.charCodeAt(fi)?(u=Mt,fi++):(u=kt,0===mi&&l(Nt)),u!==kt?(di=o,i=xe(i),o=i):(fi=o,o=kt)):(fi=o,o=kt)):(fi=o,o=kt);return n!==kt?(o=fi,i=C(),i!==kt&&(di=o,i=xe(i)),o=i,o!==kt?(n=[n,o],r=n):(fi=r,r=kt)):(fi=r,r=kt),r!==kt&&(di=t,r=ye(r)),t=r}function C(){var t;return t=A(),t===kt&&(t=_()),t}function A(){var t,r,n,o,i,a;return t=fi,r=fi,n=k(),n!==kt&&(di=r,n=xe(n)),r=n,r===kt&&(r=fi,n=T(),n!==kt&&(di=r,n=xe(n)),(r=n)===kt&&(r=fi,n=L(),n!==kt&&(di=r,n=xe(n)),r=n)),r!==kt?(n=fi,91===e.charCodeAt(fi)?(o=fe,fi++):(o=kt,0===mi&&l(de)),o!==kt?(i=O(),i!==kt?(93===e.charCodeAt(fi)?(a=he,fi++):(a=kt,0===mi&&l(pe)),a!==kt?(di=n,o=we(r,i),n=o):(fi=n,n=kt)):(fi=n,n=kt)):(fi=n,n=kt),n===kt&&(n=null),n!==kt?(di=t,r=ve(r,n),t=r):(fi=t,t=kt)):(fi=t,t=kt),t}function k(){var t,e,r,n;return t=fi,e=Q(),e!==kt?(r=S(),r!==kt?(n=Q(),n!==kt?(di=t,e=Ce(r),t=e):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t}function L(){var t,e,r,n;return t=fi,e=Q(),e!==kt?(r=E(),r!==kt?(n=Q(),n!==kt?(di=t,e=Ce(r),t=e):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t}function T(){var t,r,n,o,i,a,u,c;return t=fi,r=Q(),r!==kt?(n=R(),n!==kt?(o=Q(),o!==kt?(i=P(),i!==kt?(a=Q(),a!==kt?(u=R(),u!==kt?(c=Q(),c!==kt?(di=t,r=Ae(n,i,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t===kt&&(t=fi,r=Q(),r!==kt?(42===e.charCodeAt(fi)?(n=ke,fi++):(n=kt,0===mi&&l(Le)),n!==kt?(o=Q(),o!==kt?(i=j(),i!==kt?(a=Q(),a!==kt?(u=R(),u!==kt?(c=Q(),c!==kt?(di=t,r=Te(i,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t===kt&&(t=fi,r=Q(),r!==kt?(n=R(),n!==kt?(o=Q(),o!==kt?(i=B(),i!==kt?(a=Q(),a!==kt?(42===e.charCodeAt(fi)?(u=ke,fi++):(u=kt,0===mi&&l(Le)),u!==kt?(c=Q(),c!==kt?(di=t,r=_e(n,i),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t===kt&&(t=fi,r=Q(),r!==kt?(n=R(),n!==kt?(o=Q(),o!==kt?(i=F(),i!==kt?(a=Q(),a!==kt?(42===e.charCodeAt(fi)?(u=ke,fi++):(u=kt,0===mi&&l(Le)),u!==kt?(c=Q(),c!==kt?(di=t,r=_e(n,i),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)))),t}function _(){var t,r,n,o,i,a,u,c,s,f,d,h,p,g,m,b;return t=fi,r=Q(),r!==kt?(n=R(),n!==kt?(o=Q(),o!==kt?(i=I(),i!==kt?(a=Q(),a!==kt?(u=R(),u!==kt?(c=Q(),c!==kt?(s=fi,91===e.charCodeAt(fi)?(f=fe,fi++):(f=kt,0===mi&&l(de)),f!==kt?(d=O(),d!==kt?(93===e.charCodeAt(fi)?(h=he,fi++):(h=kt,0===mi&&l(pe)),h!==kt?(di=s,f=Se(n,i,u,d),s=f):(fi=s,s=kt)):(fi=s,s=kt)):(fi=s,s=kt),s===kt&&(s=null),s!==kt?(f=Q(),f!==kt?(123===e.charCodeAt(fi)?(d=_t,fi++):(d=kt,0===mi&&l(St)),d!==kt?(h=Q(),h!==kt?(p=w(),p===kt&&(p=null),p!==kt?(g=Q(),g!==kt?(125===e.charCodeAt(fi)?(m=Et,fi++):(m=kt,0===mi&&l(Pt)),m!==kt?(b=Q(),b!==kt?(di=t,r=Ee(n,i,u,s,p),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t}function S(){var t;return mi++,e.substr(fi,3)===Fe?(t=Fe,fi+=3):(t=kt,0===mi&&l(Be)),t===kt&&(e.substr(fi,3)===je?(t=je,fi+=3):(t=kt,0===mi&&l(De))),mi--,t===kt&&(kt,0===mi&&l(Pe)),t}function E(){var t;return mi++,e.substr(fi,3)===Oe?(t=Oe,fi+=3):(t=kt,0===mi&&l(Me)),mi--,t===kt&&(kt,0===mi&&l(Ie)),t}function P(){var t,e;return t=fi,e=F(),e===kt&&(e=B())===kt&&(e=j())===kt&&(e=D()),e!==kt&&(di=t,e=Ne(e)),t=e}function F(){var t;return mi++,e.substr(fi,2)===He?(t=He,fi+=2):(t=kt,0===mi&&l(Re)),t===kt&&(e.substr(fi,3)===We?(t=We,fi+=3):(t=kt,0===mi&&l(Ge)),t===kt&&(e.substr(fi,2)===qe?(t=qe,fi+=2):(t=kt,0===mi&&l(Ve)),t===kt&&(e.substr(fi,5)===Xe?(t=Xe,fi+=5):(t=kt,0===mi&&l(Ue)),t===kt&&(e.substr(fi,3)===Ke?(t=Ke,fi+=3):(t=kt,0===mi&&l(Ze)),t===kt&&(e.substr(fi,2)===Ye?(t=Ye,fi+=2):(t=kt,0===mi&&l($e)),t===kt&&(e.substr(fi,4)===Je?(t=Je,fi+=4):(t=kt,0===mi&&l(Qe)),t===kt&&(e.substr(fi,2)===tr?(t=tr,fi+=2):(t=kt,0===mi&&l(er)),t===kt&&(e.substr(fi,3)===rr?(t=rr,fi+=3):(t=kt,0===mi&&l(nr)))))))))),mi--,t===kt&&(kt,0===mi&&l(ze)),t}function B(){var t;return mi++,e.substr(fi,2)===ir?(t=ir,fi+=2):(t=kt,0===mi&&l(ar)),t===kt&&(e.substr(fi,3)===ur?(t=ur,fi+=3):(t=kt,0===mi&&l(cr)),t===kt&&(e.substr(fi,2)===sr?(t=sr,fi+=2):(t=kt,0===mi&&l(lr)),t===kt&&(e.substr(fi,2)===fr?(t=fr,fi+=2):(t=kt,0===mi&&l(dr)),t===kt&&(e.substr(fi,2)===hr?(t=hr,fi+=2):(t=kt,0===mi&&l(pr)),t===kt&&(e.substr(fi,2).toLowerCase()===gr?(t=e.substr(fi,2),fi+=2):(t=kt,0===mi&&l(mr))))))),mi--,t===kt&&(kt,0===mi&&l(or)),t}function j(){var t;return mi++,e.substr(fi,2)===xr?(t=xr,fi+=2):(t=kt,0===mi&&l(yr)),t===kt&&(e.substr(fi,3)===wr?(t=wr,fi+=3):(t=kt,0===mi&&l(vr)),t===kt&&(e.substr(fi,2)===Cr?(t=Cr,fi+=2):(t=kt,0===mi&&l(Ar)),t===kt&&(e.substr(fi,2)===kr?(t=kr,fi+=2):(t=kt,0===mi&&l(Lr)),t===kt&&(e.substr(fi,2)===Tr?(t=Tr,fi+=2):(t=kt,0===mi&&l(_r)),t===kt&&(e.substr(fi,2).toLowerCase()===Sr?(t=e.substr(fi,2),fi+=2):(t=kt,0===mi&&l(Er))))))),mi--,t===kt&&(kt,0===mi&&l(br)),t}function D(){var t;return mi++,e.substr(fi,4).toLowerCase()===Fr?(t=e.substr(fi,4),fi+=4):(t=kt,0===mi&&l(Br)),t===kt&&(e.substr(fi,4).toLowerCase()===jr?(t=e.substr(fi,4),fi+=4):(t=kt,0===mi&&l(Dr)),t===kt&&(e.substr(fi,4).toLowerCase()===Ir?(t=e.substr(fi,4),fi+=4):(t=kt,0===mi&&l(Or)),t===kt&&(e.substr(fi,3).toLowerCase()===Mr?(t=e.substr(fi,3),fi+=3):(t=kt,0===mi&&l(Nr))))),mi--,t===kt&&(kt,0===mi&&l(Pr)),t}function I(){var t,r;return mi++,t=fi,e.substr(fi,3).toLowerCase()===Hr?(r=e.substr(fi,3),fi+=3):(r=kt,0===mi&&l(Rr)),r===kt&&(e.substr(fi,4).toLowerCase()===Wr?(r=e.substr(fi,4),fi+=4):(r=kt,0===mi&&l(Gr)),r===kt&&(e.substr(fi,3).toLowerCase()===qr?(r=e.substr(fi,3),fi+=3):(r=kt,0===mi&&l(Vr)),r===kt&&(e.substr(fi,5).toLowerCase()===Xr?(r=e.substr(fi,5),fi+=5):(r=kt,0===mi&&l(Ur)),r===kt&&(e.substr(fi,3).toLowerCase()===Kr?(r=e.substr(fi,3),fi+=3):(r=kt,0===mi&&l(Zr)),r===kt&&(e.substr(fi,3).toLowerCase()===Yr?(r=e.substr(fi,3),fi+=3):(r=kt,0===mi&&l($r)),r===kt&&(e.substr(fi,6).toLowerCase()===Jr?(r=e.substr(fi,6),fi+=6):(r=kt,0===mi&&l(Qr)),r===kt&&(e.substr(fi,3).toLowerCase()===tn?(r=e.substr(fi,3),fi+=3):(r=kt,0===mi&&l(en)),r===kt&&(e.substr(fi,8).toLowerCase()===rn?(r=e.substr(fi,8),fi+=8):(r=kt,0===mi&&l(nn)),r===kt&&(e.substr(fi,6).toLowerCase()===on?(r=e.substr(fi,6),fi+=6):(r=kt,0===mi&&l(an)),r===kt&&(e.substr(fi,8).toLowerCase()===un?(r=e.substr(fi,8),fi+=8):(r=kt,0===mi&&l(cn)),r===kt&&(e.substr(fi,6).toLowerCase()===sn?(r=e.substr(fi,6),fi+=6):(r=kt,0===mi&&l(ln)),r===kt&&(e.substr(fi,4).toLowerCase()===fn?(r=e.substr(fi,4),fi+=4):(r=kt,0===mi&&l(dn)),r===kt&&(e.substr(fi,3).toLowerCase()===hn?(r=e.substr(fi,3),fi+=3):(r=kt,0===mi&&l(pn)),r===kt&&(e.substr(fi,3).toLowerCase()===gn?(r=e.substr(fi,3),fi+=3):(r=kt,0===mi&&l(mn)))))))))))))))),r!==kt&&(di=t,r=bn(r)),t=r,mi--,t===kt&&(r=kt,0===mi&&l(zr)),t}function O(){var t,r,n,o,i,a;for(t=fi,r=fi,n=[],o=fi,i=M(),i!==kt?(44===e.charCodeAt(fi)?(a=Mt,fi++):(a=kt,0===mi&&l(Nt)),a!==kt?(di=o,i=xe(i),o=i):(fi=o,o=kt)):(fi=o,o=kt);o!==kt;)n.push(o),o=fi,i=M(),i!==kt?(44===e.charCodeAt(fi)?(a=Mt,fi++):(a=kt,0===mi&&l(Nt)),a!==kt?(di=o,i=xe(i),o=i):(fi=o,o=kt)):(fi=o,o=kt);return n!==kt?(o=fi,i=M(),i!==kt&&(di=o,i=xe(i)),o=i,o!==kt?(n=[n,o],r=n):(fi=r,r=kt)):(fi=r,r=kt),r!==kt&&(di=t,r=xn(r)),t=r}function M(){var t,r,n,o,i,a,u,c;return t=fi,r=Q(),r!==kt?(n=N(),n!==kt?(o=Q(),o!==kt?(61===e.charCodeAt(fi)?(i=Kt,fi++):(i=kt,0===mi&&l(Zt)),i!==kt?(a=Q(),a!==kt?(u=R(),u!==kt?(c=Q(),c!==kt?(di=t,r=yn(n,u),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t}function N(){var t;return mi++,e.substr(fi,5).toLowerCase()===vn?(t=e.substr(fi,5),fi+=5):(t=kt,0===mi&&l(Cn)),t===kt&&(e.substr(fi,5).toLowerCase()===An?(t=e.substr(fi,5),fi+=5):(t=kt,0===mi&&l(kn)),t===kt&&(e.substr(fi,2).toLowerCase()===Ln?(t=e.substr(fi,2),fi+=2):(t=kt,0===mi&&l(Tn)),t===kt&&(e.substr(fi,3).toLowerCase()===_n?(t=e.substr(fi,3),fi+=3):(t=kt,0===mi&&l(Sn)),t===kt&&(e.substr(fi,9).toLowerCase()===En?(t=e.substr(fi,9),fi+=9):(t=kt,0===mi&&l(Pn)),t===kt&&(e.substr(fi,10).toLowerCase()===Fn?(t=e.substr(fi,10),fi+=10):(t=kt,0===mi&&l(Bn)),t===kt&&(e.substr(fi,9).toLowerCase()===jn?(t=e.substr(fi,9),fi+=9):(t=kt,0===mi&&l(Dn)),t===kt&&(e.substr(fi,10).toLowerCase()===In?(t=e.substr(fi,10),fi+=10):(t=kt,0===mi&&l(On)),t===kt&&(e.substr(fi,11).toLowerCase()===Mn?(t=e.substr(fi,11),fi+=11):(t=kt,0===mi&&l(Nn)),t===kt&&(e.substr(fi,12).toLowerCase()===zn?(t=e.substr(fi,12),fi+=12):(t=kt,0===mi&&l(Hn)),t===kt&&(e.substr(fi,12).toLowerCase()===Rn?(t=e.substr(fi,12),fi+=12):(t=kt,0===mi&&l(Wn)),t===kt&&(e.substr(fi,13).toLowerCase()===Gn?(t=e.substr(fi,13),fi+=13):(t=kt,0===mi&&l(qn)),t===kt&&(e.substr(fi,12).toLowerCase()===Vn?(t=e.substr(fi,12),fi+=12):(t=kt,0===mi&&l(Xn)),t===kt&&(e.substr(fi,13).toLowerCase()===Un?(t=e.substr(fi,13),fi+=13):(t=kt,0===mi&&l(Kn)),t===kt&&(e.substr(fi,14).toLowerCase()===Zn?(t=e.substr(fi,14),fi+=14):(t=kt,0===mi&&l(Yn)),t===kt&&(e.substr(fi,15).toLowerCase()===$n?(t=e.substr(fi,15),fi+=15):(t=kt,0===mi&&l(Jn)),t===kt&&(e.substr(fi,7).toLowerCase()===Qn?(t=e.substr(fi,7),fi+=7):(t=kt,0===mi&&l(to)),t===kt&&(e.substr(fi,5).toLowerCase()===eo?(t=e.substr(fi,5),fi+=5):(t=kt,0===mi&&l(ro))))))))))))))))))),mi--,t===kt&&(kt,0===mi&&l(wn)),t}function z(){var t,r,n,o;return mi++,t=fi,34===e.charCodeAt(fi)?(r=oo,fi++):(r=kt,0===mi&&l(io)),r!==kt?(n=H(),n!==kt?(34===e.charCodeAt(fi)?(o=oo,fi++):(o=kt,0===mi&&l(io)),o!==kt?(di=t,r=ao(n),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),mi--,t===kt&&(r=kt,0===mi&&l(no)),t}function H(){var t,r,n,o;for(t=[],r=fi,n=fi,mi++,34===e.charCodeAt(fi)?(o=oo,fi++):(o=kt,0===mi&&l(io)),mi--,o===kt?n=void 0:(fi=n,n=kt),n!==kt?(e.substr(fi,2)===uo?(o=uo,fi+=2):(o=kt,0===mi&&l(co)),o===kt&&(e.length>fi?(o=e.charAt(fi),fi++):(o=kt,0===mi&&l(so))),o!==kt?(di=r,n=lo(o),r=n):(fi=r,r=kt)):(fi=r,r=kt);r!==kt;)t.push(r),r=fi,n=fi,mi++,34===e.charCodeAt(fi)?(o=oo,fi++):(o=kt,0===mi&&l(io)),mi--,o===kt?n=void 0:(fi=n,n=kt),n!==kt?(e.substr(fi,2)===uo?(o=uo,fi+=2):(o=kt,0===mi&&l(co)),o===kt&&(e.length>fi?(o=e.charAt(fi),fi++):(o=kt,0===mi&&l(so))),o!==kt?(di=r,n=lo(o),r=n):(fi=r,r=kt)):(fi=r,r=kt);return t}function R(){var t;return mi++,t=W(),t===kt&&(t=z()),mi--,t===kt&&(kt,0===mi&&l(fo)),t}function W(){var t,r,n;if(t=fi,r=[],ho.test(e.charAt(fi))?(n=e.charAt(fi),fi++):(n=kt,0===mi&&l(po)),n!==kt)for(;n!==kt;)r.push(n),ho.test(e.charAt(fi))?(n=e.charAt(fi),fi++):(n=kt,0===mi&&l(po));else r=kt;return r!==kt&&(di=t,r=go(r)),t=r}function G(){var t,r;return mi++,t=fi,bo.test(e.charAt(fi))?(r=e.charAt(fi),fi++):(r=kt,0===mi&&l(xo)),r!==kt&&(di=t,r=lo(r)),t=r,mi--,t===kt&&(r=kt,0===mi&&l(mo)),t}function q(){var t,r;return mi++,t=fi,wo.test(e.charAt(fi))?(r=e.charAt(fi),fi++):(r=kt,0===mi&&l(vo)),r!==kt&&(di=t,r=lo(r)),t=r,mi--,t===kt&&(r=kt,0===mi&&l(yo)),t}function V(){var t;return e.substr(fi,2)===Co?(t=Co,fi+=2):(t=kt,0===mi&&l(Ao)),t}function X(){var t;return e.substr(fi,2)===ko?(t=ko,fi+=2):(t=kt,0===mi&&l(Lo)),t}function U(){var t,r,n;return t=fi,r=fi,mi++,e.substr(fi,2)===ko?(n=ko,fi+=2):(n=kt,0===mi&&l(Lo)),mi--,n===kt?r=void 0:(fi=r,r=kt),r!==kt?(e.length>fi?(n=e.charAt(fi),fi++):(n=kt,0===mi&&l(so)),n!==kt?(di=t,r=lo(n),t=r):(fi=t,t=kt)):(fi=t,t=kt),t}function K(){var t,e,r,n;if(t=fi,(e=V())!==kt){for(r=[],n=U();n!==kt;)r.push(n),n=U();r!==kt?(n=X(),n!==kt?(di=t,e=To(e,r,n),t=e):(fi=t,t=kt)):(fi=t,t=kt)}else fi=t,t=kt;return t}function Z(){var t;return e.substr(fi,2)===_o?(t=_o,fi+=2):(t=kt,0===mi&&l(So)),t===kt&&(35===e.charCodeAt(fi)?(t=Eo,fi++):(t=kt,0===mi&&l(Po))),t}function Y(){var t;return Fo.test(e.charAt(fi))?(t=e.charAt(fi),fi++):(t=kt,0===mi&&l(Bo)),t}function $(){var t,e,r,n;if(t=fi,(e=Z())!==kt){for(r=[],n=Y();n!==kt;)r.push(n),n=Y();r!==kt?(di=t,e=jo(e,r),t=e):(fi=t,t=kt)}else fi=t,t=kt;return t}function J(){var t;return mi++,t=$(),t===kt&&(t=K()),mi--,t===kt&&(kt,0===mi&&l(Do)),t}function Q(){var t,e;for(t=[],e=G(),e===kt&&(e=q())===kt&&(e=J());e!==kt;)t.push(e),(e=G())===kt&&(e=q())===kt&&(e=J());return t}function tt(){var t,e;return mi++,t=fi,e=et(),e!==kt&&(di=t,e=Oo(e)),t=e,t===kt&&(t=fi,e=rt(),e!==kt&&(di=t,e=Mo(e)),t=e),mi--,t===kt&&(e=kt,0===mi&&l(Io)),t}function et(){var t,r,n,o;return t=fi,34===e.charCodeAt(fi)?(r=oo,fi++):(r=kt,0===mi&&l(io)),r!==kt?(n=rt(),n!==kt?(34===e.charCodeAt(fi)?(o=oo,fi++):(o=kt,0===mi&&l(io)),o!==kt?(di=t,r=No(n),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t}function rt(){var t;return t=ot(),t===kt&&(t=nt()),t}function nt(){var t,r,n;if(t=fi,r=[],zo.test(e.charAt(fi))?(n=e.charAt(fi),fi++):(n=kt,0===mi&&l(Ho)),n!==kt)for(;n!==kt;)r.push(n),zo.test(e.charAt(fi))?(n=e.charAt(fi),fi++):(n=kt,0===mi&&l(Ho));else r=kt;return r!==kt&&(di=t,r=Ro(r)),t=r}function ot(){var t,r,n,o,i;return t=fi,r=fi,n=nt(),n!==kt?(46===e.charCodeAt(fi)?(o=Wo,fi++):(o=kt,0===mi&&l(Go)),o!==kt?(i=nt(),i!==kt?(n=[n,o,i],r=n):(fi=r,r=kt)):(fi=r,r=kt)):(fi=r,r=kt),r!==kt&&(di=t,r=qo(r)),t=r}function it(){var t,e;return mi++,t=fi,e=at(),e!==kt&&(di=t,e=Xo(e)),t=e,t===kt&&(t=fi,e=ut(),e!==kt&&(di=t,e=Uo(e)),t=e),mi--,t===kt&&(e=kt,0===mi&&l(Vo)),t}function at(){var t,r,n,o;return t=fi,34===e.charCodeAt(fi)?(r=oo,fi++):(r=kt,0===mi&&l(io)),r!==kt?(n=ut(),n!==kt?(34===e.charCodeAt(fi)?(o=oo,fi++):(o=kt,0===mi&&l(io)),o!==kt?(di=t,r=Oo(n),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t}function ut(){var t;return e.substr(fi,4).toLowerCase()===Ko?(t=e.substr(fi,4),fi+=4):(t=kt,0===mi&&l(Zo)),t===kt&&(e.substr(fi,5).toLowerCase()===Yo?(t=e.substr(fi,5),fi+=5):(t=kt,0===mi&&l($o)),t===kt&&(e.substr(fi,2).toLowerCase()===Jo?(t=e.substr(fi,2),fi+=2):(t=kt,0===mi&&l(Qo)),t===kt&&(e.substr(fi,3).toLowerCase()===ti?(t=e.substr(fi,3),fi+=3):(t=kt,0===mi&&l(ei)),t===kt&&(48===e.charCodeAt(fi)?(t=ri,fi++):(t=kt,0===mi&&l(ni)),t===kt&&(49===e.charCodeAt(fi)?(t=oi,fi++):(t=kt,0===mi&&l(ii))))))),t}function ct(){var t;return mi++,t=st(),t===kt&&(t=lt()),mi--,t===kt&&(kt,0===mi&&l(ai)),t}function st(){var t,r,n,o;return t=fi,34===e.charCodeAt(fi)?(r=oo,fi++):(r=kt,0===mi&&l(io)),r!==kt?(n=lt(),n!==kt?(34===e.charCodeAt(fi)?(o=oo,fi++):(o=kt,0===mi&&l(io)),o!==kt?(di=t,r=Oo(n),t=r):(fi=t,t=kt)):(fi=t,t=kt)):(fi=t,t=kt),t}function lt(){var t,r;return t=fi,r=rt(),r!==kt&&(di=t,r=ui(r)),t=r,t===kt&&(t=fi,e.substr(fi,4).toLowerCase()===ci?(r=e.substr(fi,4),fi+=4):(r=kt,0===mi&&l(si)),r!==kt&&(di=t,r=li(r)),t=r),t}function ft(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function dt(t){var e={};return t.forEach(function(t){e=ft(e,t)}),e}function ht(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function pt(t,e){var r={};return r[t.toLowerCase()]=e,r}function gt(t,e){return void 0===e||"*"===e||t.some(function(t){return t.name===e})}function mt(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(t)>-1}function bt(t,e){return"Entity '"+t+"' in arc '"+e.from+" "+e.kind+" "+e.to+"' is not defined."}function xt(t,e){this.name="EntityNotDefinedError",this.message=bt(t,e),e.location&&(this.location=e.location,this.location.start.line++,this.location.end.line++)}function yt(t,e){return t||(t=[]),e&&e.forEach(function(e){e.forEach(function(e){if(e.from&&!gt(t,e.from))throw new xt(e.from,e);if(e.to&&!gt(t,e.to))throw new xt(e.to,e);e.location&&delete e.location,e.arcs&&yt(t,e.arcs)})}),t}function wt(t){return!!t&&(t.hasOwnProperty("watermark")||t.hasOwnProperty("wordwrapentities")||t.hasOwnProperty("wordwrapboxes")||t.hasOwnProperty("width")&&"auto"===t.width)}function vt(t){return!!t&&t.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})})}function Ct(t,e){var r=wt(t),n=vt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}r=void 0!==r?r:{};var At,kt={},Lt={program:h},Tt=h,_t="{",St=i("{",!1),Et="}",Pt=i("}",!1),Ft=function(t,e){e.entities=yt(e.entities,e.arcs);var r=e;return r=ft({meta:Ct(e.options,e.arcs)},r),t.length>0&&(r=ft({precomment:t},r)),r},Bt="msc",jt=i("msc",!0),Dt="xu",It=i("xu",!0),Ot=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},Mt=",",Nt=i(",",!1),zt=function(t){return t},Ht=";",Rt=i(";",!1),Wt=function(t){return dt(t[0].concat(t[1]))},Gt=u("option"),qt="hscale",Vt=i("hscale",!0),Xt="arcgradient",Ut=i("arcgradient",!0),Kt="=",Zt=i("=",!1),Yt=function(t,e){return pt(t,e)},$t="width",Jt=i("width",!0),Qt="wordwraparcs",te=i("wordwraparcs",!0),ee=function(t,e){return pt(t,ht(e))},re="wordwrapentities",ne=i("wordwrapentities",!0),oe="wordwrapboxes",ie=i("wordwrapboxes",!0),ae="watermark",ue=i("watermark",!0),ce=function(t){return t},se=function(t){return t[0].concat(t[1])},le=u("entity"),fe="[",de=i("[",!1),he="]",pe=i("]",!1),ge=function(t,e){return e},me=function(t,e){return ft({name:t},e)},be=function(t,e){return mt(t)&&o("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),ft({name:t},e)},xe=function(t){return t},ye=function(t){return t[0].concat(t[1])},we=function(t,e){return e},ve=function(t,e){return ft(t,e)},Ce=function(t){return{kind:t}},Ae=function(t,e,r){return{kind:e,from:t,to:r,location:n()}},ke="*",Le=i("*",!1),Te=function(t,e){return{kind:t,from:"*",to:e,location:n()}},_e=function(t,e){return{kind:e,from:t,to:"*",location:n()}},Se=function(t,e,r,n){return n},Ee=function(t,e,r,o,i){return ft({kind:e,from:t,to:r,location:n(),arcs:i},o)},Pe=u("empty row"),Fe="|||",Be=i("|||",!1),je="...",De=i("...",!1),Ie=u("---"),Oe="---",Me=i("---",!1),Ne=function(t){return t.toLowerCase()},ze=u("bi-directional arrow"),He="--",Re=i("--",!1),We="<->",Ge=i("<->",!1),qe="==",Ve=i("==",!1),Xe="<<=>>",Ue=i("<<=>>",!1),Ke="<=>",Ze=i("<=>",!1),Ye="..",$e=i("..",!1),Je="<<>>",Qe=i("<<>>",!1),tr="::",er=i("::",!1),rr="<:>",nr=i("<:>",!1),or=u("left to right arrow"),ir="->",ar=i("->",!1),ur="=>>",cr=i("=>>",!1),sr="=>",lr=i("=>",!1),fr=">>",dr=i(">>",!1),hr=":>",pr=i(":>",!1),gr="-x",mr=i("-x",!0),br=u("right to left arrow"),xr="<-",yr=i("<-",!1),wr="<<=",vr=i("<<=",!1),Cr="<=",Ar=i("<=",!1),kr="<<",Lr=i("<<",!1),Tr="<:",_r=i("<:",!1),Sr="x-",Er=i("x-",!0),Pr=u("box"),Fr="note",Br=i("note",!0),jr="abox",Dr=i("abox",!0),Ir="rbox",Or=i("rbox",!0),Mr="box",Nr=i("box",!0),zr=u("inline expression"),Hr="alt",Rr=i("alt",!0),Wr="else",Gr=i("else",!0),qr="opt",Vr=i("opt",!0),Xr="break",Ur=i("break",!0),Kr="par",Zr=i("par",!0),Yr="seq",$r=i("seq",!0),Jr="strict",Qr=i("strict",!0),tn="neg",en=i("neg",!0),rn="critical",nn=i("critical",!0),on="ignore",an=i("ignore",!0),un="consider",cn=i("consider",!0),sn="assert",ln=i("assert",!0),fn="loop",dn=i("loop",!0),hn="ref",pn=i("ref",!0),gn="exc",mn=i("exc",!0),bn=function(t){return t.toLowerCase()},xn=function(t){return dt(t[0].concat(t[1]))},yn=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},wn=u("attribute name"),vn="label",Cn=i("label",!0),An="idurl",kn=i("idurl",!0),Ln="id",Tn=i("id",!0),_n="url",Sn=i("url",!0),En="linecolor",Pn=i("linecolor",!0),Fn="linecolour",Bn=i("linecolour",!0),jn="textcolor",Dn=i("textcolor",!0),In="textcolour",On=i("textcolour",!0),Mn="textbgcolor",Nn=i("textbgcolor",!0),zn="textbgcolour",Hn=i("textbgcolour",!0),Rn="arclinecolor",Wn=i("arclinecolor",!0),Gn="arclinecolour",qn=i("arclinecolour",!0),Vn="arctextcolor",Xn=i("arctextcolor",!0),Un="arctextcolour",Kn=i("arctextcolour",!0),Zn="arctextbgcolor",Yn=i("arctextbgcolor",!0),$n="arctextbgcolour",Jn=i("arctextbgcolour",!0),Qn="arcskip",to=i("arcskip",!0),eo="title",ro=i("title",!0),no=u("double quoted string"),oo='"',io=i('"',!1),ao=function(t){return t.join("")},uo='\\"',co=i('\\"',!1),so=function(){return{type:"any"}}(),lo=function(t){return t},fo=u("identifier"),ho=/^[A-Za-z_0-9]/,po=a([["A","Z"],["a","z"],"_",["0","9"]],!1,!1),go=function(t){return t.join("")},mo=u("whitespace"),bo=/^[ \t]/,xo=a([" ","\t"],!1,!1),yo=u("lineend"),wo=/^[\r\n]/,vo=a(["\r","\n"],!1,!1),Co="/*",Ao=i("/*",!1),ko="*/",Lo=i("*/",!1),To=function(t,e,r){return t+e.join("")+r},_o="//",So=i("//",!1),Eo="#",Po=i("#",!1),Fo=/^[^\r\n]/,Bo=a(["\r","\n"],!0,!1),jo=function(t,e){return t+e.join("")},Do=u("comment"),Io=u("number"),Oo=function(t){return t},Mo=function(t){return t.toString()},No=function(t){return t.toString()},zo=/^[0-9]/,Ho=a([["0","9"]],!1,!1),Ro=function(t){return parseInt(t.join(""),10)},Wo=".",Go=i(".",!1),qo=function(t){return parseFloat(t.join(""))},Vo=u("boolean"),Xo=function(t){return t},Uo=function(t){return t.toString()},Ko="true",Zo=i("true",!0),Yo="false",$o=i("false",!0),Jo="on",Qo=i("on",!0),ti="off",ei=i("off",!0),ri="0",ni=i("0",!1),oi="1",ii=i("1",!1),ai=u("size"),ui=function(t){return t.toString()},ci="auto",si=i("auto",!0),li=function(t){return t.toLowerCase()},fi=0,di=0,hi=[{line:1,column:1}],pi=0,gi=[],mi=0;if("startRule"in r){if(!(r.startRule in Lt))throw new Error("Can't start parsing from rule \""+r.startRule+'".');Tt=Lt[r.startRule]}if((At=Tt())!==kt&&fi===e.length)return At;throw At!==kt&&fi<e.length&&l(function(){return{type:"end"}}()),d(gi,pi<e.length?e.charAt(pi):null,pi<e.length?s(pi,pi+1):s(pi,pi))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return a[t.type](t)}var a={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:e}}),function(t,e){"function"==typeof r&&r.amd?r("parse/msgennyparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(0,function(){"use strict";function t(e,r,n,o){this.message=e,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function e(e,r){function n(t,e){return{type:"literal",text:t,ignoreCase:e}}function o(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function i(t){return{type:"other",description:t}}function a(t){var r,n=bo[t];if(n)return n;for(r=t-1;!bo[r];)r--;for(n=bo[r],n={line:n.line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return bo[t]=n,n}function u(t,e){var r=a(t),n=a(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function c(t){go<xo||(go>xo&&(xo=go,yo=[]),yo.push(t))}function s(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function l(){var t,e,r,n;return t=go,e=K(),e!==bt?(r=f(),r!==bt?(n=K(),n!==bt?(mo=t,e=wt(e,r),t=e):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t}function f(){var t,e,r,n;return t=go,e=d(),e===bt&&(e=null),e!==bt?(r=p(),r===bt&&(r=null),r!==bt?(n=m(),n===bt&&(n=null),n!==bt?(mo=t,e=vt(e,r,n),t=e):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t}function d(){var t,r,n,o,i,a;for(t=go,r=go,n=[],o=go,i=h(),i!==bt?(44===e.charCodeAt(go)?(a=Ct,go++):(a=bt,0===wo&&c(At)),a!==bt?(mo=o,i=kt(i),o=i):(go=o,o=bt)):(go=o,o=bt);o!==bt;)n.push(o),o=go,i=h(),i!==bt?(44===e.charCodeAt(go)?(a=Ct,go++):(a=bt,0===wo&&c(At)),a!==bt?(mo=o,i=kt(i),o=i):(go=o,o=bt)):(go=o,o=bt);return n!==bt?(o=go,i=h(),i!==bt?(59===e.charCodeAt(go)?(a=Lt,go++):(a=bt,0===wo&&c(Tt)),a!==bt?(mo=o,i=kt(i),o=i):(go=o,o=bt)):(go=o,o=bt),o!==bt?(n=[n,o],r=n):(go=r,r=bt)):(go=r,r=bt),r!==bt&&(mo=t,r=_t(r)),t=r}function h(){var t,r,n,o,i,a,u,s;return t=go,r=K(),r!==bt?(e.substr(go,6).toLowerCase()===St?(n=e.substr(go,6),go+=6):(n=bt,0===wo&&c(Et)),n===bt&&(e.substr(go,11).toLowerCase()===Pt?(n=e.substr(go,11),go+=11):(n=bt,0===wo&&c(Ft))),n!==bt?(o=K(),o!==bt?(61===e.charCodeAt(go)?(i=Bt,go++):(i=bt,0===wo&&c(jt)),i!==bt?(a=K(),a!==bt?(u=Z(),u!==bt?(s=K(),s!==bt?(mo=t,r=Dt(n,u),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t===bt&&(t=go,r=K(),r!==bt?(e.substr(go,5).toLowerCase()===It?(n=e.substr(go,5),go+=5):(n=bt,0===wo&&c(Ot)),n!==bt?(o=K(),o!==bt?(61===e.charCodeAt(go)?(i=Bt,go++):(i=bt,0===wo&&c(jt)),i!==bt?(a=K(),a!==bt?(u=nt(),u!==bt?(s=K(),s!==bt?(mo=t,r=Dt(n,u),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t===bt&&(t=go,r=K(),r!==bt?(e.substr(go,12).toLowerCase()===Mt?(n=e.substr(go,12),go+=12):(n=bt,0===wo&&c(Nt)),n!==bt?(o=K(),o!==bt?(61===e.charCodeAt(go)?(i=Bt,go++):(i=bt,0===wo&&c(jt)),i!==bt?(a=K(),a!==bt?(u=tt(),u!==bt?(s=K(),s!==bt?(mo=t,r=zt(n,u),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t===bt&&(t=go,r=K(),r!==bt?(e.substr(go,16).toLowerCase()===Ht?(n=e.substr(go,16),go+=16):(n=bt,0===wo&&c(Rt)),n!==bt?(o=K(),o!==bt?(61===e.charCodeAt(go)?(i=Bt,go++):(i=bt,0===wo&&c(jt)),i!==bt?(a=K(),a!==bt?(u=tt(),u!==bt?(s=K(),s!==bt?(mo=t,r=zt(n,u),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t===bt&&(t=go,r=K(),r!==bt?(e.substr(go,13).toLowerCase()===Wt?(n=e.substr(go,13),go+=13):(n=bt,0===wo&&c(Gt)),n!==bt?(o=K(),o!==bt?(61===e.charCodeAt(go)?(i=Bt,go++):(i=bt,0===wo&&c(jt)),i!==bt?(a=K(),a!==bt?(u=tt(),u!==bt?(s=K(),s!==bt?(mo=t,r=zt(n,u),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t===bt&&(t=go,r=K(),r!==bt?(e.substr(go,9).toLowerCase()===qt?(n=e.substr(go,9),go+=9):(n=bt,0===wo&&c(Vt)),n!==bt?(o=K(),o!==bt?(61===e.charCodeAt(go)?(i=Bt,go++):(i=bt,0===wo&&c(jt)),i!==bt?(a=K(),a!==bt?(u=j(),u!==bt?(s=K(),s!==bt?(mo=t,r=Dt(n,u),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)))))),t}function p(){var t,r,n,o,i,a;for(t=go,r=go,n=[],o=go,i=g(),i!==bt?(44===e.charCodeAt(go)?(a=Ct,go++):(a=bt,0===wo&&c(At)),a!==bt?(mo=o,i=Xt(i),o=i):(go=o,o=bt)):(go=o,o=bt);o!==bt;)n.push(o),o=go,i=g(),i!==bt?(44===e.charCodeAt(go)?(a=Ct,go++):(a=bt,0===wo&&c(At)),a!==bt?(mo=o,i=Xt(i),o=i):(go=o,o=bt)):(go=o,o=bt);return n!==bt?(o=go,i=g(),i!==bt?(59===e.charCodeAt(go)?(a=Lt,go++):(a=bt,0===wo&&c(Tt)),a!==bt?(mo=o,i=Xt(i),o=i):(go=o,o=bt)):(go=o,o=bt),o!==bt?(n=[n,o],r=n):(go=r,r=bt)):(go=r,r=bt),r!==bt&&(mo=t,r=Ut(r)),t=r}function g(){var t,r,n,o,i,a,u,s,l;return wo++,t=go,r=K(),r!==bt?(n=M(),n!==bt?(o=K(),o!==bt?(i=go,58===e.charCodeAt(go)?(a=Zt,go++):(a=bt,0===wo&&c(Yt)),a!==bt?(u=K(),u!==bt?(s=B(),s!==bt?(l=K(),l!==bt?(mo=i,a=$t(n,s),i=a):(go=i,i=bt)):(go=i,i=bt)):(go=i,i=bt)):(go=i,i=bt),i===bt&&(i=null),i!==bt?(mo=t,r=Jt(n,i),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),wo--,t===bt&&(r=bt,0===wo&&c(Kt)),t}function m(){var t,r,n,o,i;if(t=[],r=go,n=b(),n!==bt?(o=K(),o!==bt?(59===e.charCodeAt(go)?(i=Lt,go++):(i=bt,0===wo&&c(Tt)),i!==bt?(mo=r,n=Qt(n),r=n):(go=r,r=bt)):(go=r,r=bt)):(go=r,r=bt),r!==bt)for(;r!==bt;)t.push(r),r=go,n=b(),n!==bt?(o=K(),o!==bt?(59===e.charCodeAt(go)?(i=Lt,go++):(i=bt,0===wo&&c(Tt)),i!==bt?(mo=r,n=Qt(n),r=n):(go=r,r=bt)):(go=r,r=bt)):(go=r,r=bt);else t=bt;return t}function b(){var t,r,n,o,i,a;for(t=go,r=go,n=[],o=go,i=x(),i!==bt?(44===e.charCodeAt(go)?(a=Ct,go++):(a=bt,0===wo&&c(At)),a!==bt?(mo=o,i=Qt(i),o=i):(go=o,o=bt)):(go=o,o=bt);o!==bt;)n.push(o),o=go,i=x(),i!==bt?(44===e.charCodeAt(go)?(a=Ct,go++):(a=bt,0===wo&&c(At)),a!==bt?(mo=o,i=Qt(i),o=i):(go=o,o=bt)):(go=o,o=bt);return n!==bt?(o=go,i=x(),i!==bt&&(mo=o,i=Qt(i)),o=i,o!==bt?(n=[n,o],r=n):(go=r,r=bt)):(go=r,r=bt),r!==bt&&(mo=t,r=te(r)),t=r}function x(){var t;return t=y(),t===bt&&(t=A()),t}function y(){var t,r,n,o,i,a,u;return t=go,r=go,n=w(),n!==bt&&(mo=r,n=ee(n)),r=n,r===bt&&(r=go,n=C(),n!==bt&&(mo=r,n=re(n)),(r=n)===bt&&(r=go,n=v(),n!==bt&&(mo=r,n=ne(n)),r=n)),r!==bt?(n=go,58===e.charCodeAt(go)?(o=Zt,go++):(o=bt,0===wo&&c(Yt)),o!==bt?(i=K(),i!==bt?(a=B(),a!==bt?(u=K(),u!==bt?(mo=n,o=oe(r,a),n=o):(go=n,n=bt)):(go=n,n=bt)):(go=n,n=bt)):(go=n,n=bt),n===bt&&(n=null),n!==bt?(mo=t,r=ie(r,n),t=r):(go=t,t=bt)):(go=t,t=bt),t}function w(){var t,e,r,n;return t=go,e=K(),e!==bt?(r=k(),r!==bt?(n=K(),n!==bt?(mo=t,e=ae(r),t=e):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t}function v(){var t,e,r,n;return t=go,e=K(),e!==bt?(r=L(),r!==bt?(n=K(),n!==bt?(mo=t,e=ae(r),t=e):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t}function C(){var t,r,n,o,i,a,u,s;return t=go,r=K(),r!==bt?(n=M(),n!==bt?(o=K(),o!==bt?(i=T(),i!==bt?(a=K(),a!==bt?(u=M(),u!==bt?(s=K(),s!==bt?(mo=t,r=ue(n,i,u),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t===bt&&(t=go,r=K(),r!==bt?(42===e.charCodeAt(go)?(n=ce,go++):(n=bt,0===wo&&c(se)),n!==bt?(o=K(),o!==bt?(i=E(),i!==bt?(a=K(),a!==bt?(u=M(),u!==bt?(s=K(),s!==bt?(mo=t,r=le(i,u),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t===bt&&(t=go,r=K(),r!==bt?(n=M(),n!==bt?(o=K(),o!==bt?(i=S(),i!==bt?(a=K(),a!==bt?(42===e.charCodeAt(go)?(u=ce,go++):(u=bt,0===wo&&c(se)),u!==bt?(s=K(),s!==bt?(mo=t,r=fe(n,i),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t===bt&&(t=go,r=K(),r!==bt?(n=M(),n!==bt?(o=K(),o!==bt?(i=_(),
i!==bt?(a=K(),a!==bt?(42===e.charCodeAt(go)?(u=ce,go++):(u=bt,0===wo&&c(se)),u!==bt?(s=K(),s!==bt?(mo=t,r=fe(n,i),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)))),t}function A(){var t,r,n,o,i,a,u,s,l,f,d,h,p,g,b;return t=go,r=K(),r!==bt?(n=M(),n!==bt?(o=K(),o!==bt?(i=F(),i!==bt?(a=K(),a!==bt?(u=M(),u!==bt?(s=K(),s!==bt?(l=go,58===e.charCodeAt(go)?(f=Zt,go++):(f=bt,0===wo&&c(Yt)),f!==bt?(d=K(),d!==bt?(h=B(),h!==bt?(p=K(),p!==bt?(mo=l,f=de(n,i,u,h),l=f):(go=l,l=bt)):(go=l,l=bt)):(go=l,l=bt)):(go=l,l=bt),l===bt&&(l=null),l!==bt?(123===e.charCodeAt(go)?(f=he,go++):(f=bt,0===wo&&c(pe)),f!==bt?(d=K(),d!==bt?(h=m(),h===bt&&(h=null),h!==bt?(p=K(),p!==bt?(125===e.charCodeAt(go)?(g=ge,go++):(g=bt,0===wo&&c(me)),g!==bt?(b=K(),b!==bt?(mo=t,r=be(n,i,u,l,h),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t}function k(){var t;return wo++,e.substr(go,3)===ye?(t=ye,go+=3):(t=bt,0===wo&&c(we)),t===bt&&(e.substr(go,3)===ve?(t=ve,go+=3):(t=bt,0===wo&&c(Ce))),wo--,t===bt&&(bt,0===wo&&c(xe)),t}function L(){var t;return wo++,e.substr(go,3)===ke?(t=ke,go+=3):(t=bt,0===wo&&c(Le)),wo--,t===bt&&(bt,0===wo&&c(Ae)),t}function T(){var t,e;return t=go,e=_(),e===bt&&(e=S())===bt&&(e=E())===bt&&(e=P()),e!==bt&&(mo=t,e=Te(e)),t=e}function _(){var t;return wo++,e.substr(go,2)===Se?(t=Se,go+=2):(t=bt,0===wo&&c(Ee)),t===bt&&(e.substr(go,3)===Pe?(t=Pe,go+=3):(t=bt,0===wo&&c(Fe)),t===bt&&(e.substr(go,2)===Be?(t=Be,go+=2):(t=bt,0===wo&&c(je)),t===bt&&(e.substr(go,5)===De?(t=De,go+=5):(t=bt,0===wo&&c(Ie)),t===bt&&(e.substr(go,3)===Oe?(t=Oe,go+=3):(t=bt,0===wo&&c(Me)),t===bt&&(e.substr(go,2)===Ne?(t=Ne,go+=2):(t=bt,0===wo&&c(ze)),t===bt&&(e.substr(go,4)===He?(t=He,go+=4):(t=bt,0===wo&&c(Re)),t===bt&&(e.substr(go,2)===We?(t=We,go+=2):(t=bt,0===wo&&c(Ge)),t===bt&&(e.substr(go,3)===qe?(t=qe,go+=3):(t=bt,0===wo&&c(Ve)))))))))),wo--,t===bt&&(bt,0===wo&&c(_e)),t}function S(){var t;return wo++,e.substr(go,2)===Ue?(t=Ue,go+=2):(t=bt,0===wo&&c(Ke)),t===bt&&(e.substr(go,3)===Ze?(t=Ze,go+=3):(t=bt,0===wo&&c(Ye)),t===bt&&(e.substr(go,2)===$e?(t=$e,go+=2):(t=bt,0===wo&&c(Je)),t===bt&&(e.substr(go,2)===Qe?(t=Qe,go+=2):(t=bt,0===wo&&c(tr)),t===bt&&(e.substr(go,2)===er?(t=er,go+=2):(t=bt,0===wo&&c(rr)),t===bt&&(e.substr(go,2).toLowerCase()===nr?(t=e.substr(go,2),go+=2):(t=bt,0===wo&&c(or))))))),wo--,t===bt&&(bt,0===wo&&c(Xe)),t}function E(){var t;return wo++,e.substr(go,2)===ar?(t=ar,go+=2):(t=bt,0===wo&&c(ur)),t===bt&&(e.substr(go,3)===cr?(t=cr,go+=3):(t=bt,0===wo&&c(sr)),t===bt&&(e.substr(go,2)===lr?(t=lr,go+=2):(t=bt,0===wo&&c(fr)),t===bt&&(e.substr(go,2)===dr?(t=dr,go+=2):(t=bt,0===wo&&c(hr)),t===bt&&(e.substr(go,2)===pr?(t=pr,go+=2):(t=bt,0===wo&&c(gr)),t===bt&&(e.substr(go,2).toLowerCase()===mr?(t=e.substr(go,2),go+=2):(t=bt,0===wo&&c(br))))))),wo--,t===bt&&(bt,0===wo&&c(ir)),t}function P(){var t;return wo++,e.substr(go,4).toLowerCase()===yr?(t=e.substr(go,4),go+=4):(t=bt,0===wo&&c(wr)),t===bt&&(e.substr(go,4).toLowerCase()===vr?(t=e.substr(go,4),go+=4):(t=bt,0===wo&&c(Cr)),t===bt&&(e.substr(go,4).toLowerCase()===Ar?(t=e.substr(go,4),go+=4):(t=bt,0===wo&&c(kr)),t===bt&&(e.substr(go,3).toLowerCase()===Lr?(t=e.substr(go,3),go+=3):(t=bt,0===wo&&c(Tr))))),wo--,t===bt&&(bt,0===wo&&c(xr)),t}function F(){var t,r;return wo++,t=go,e.substr(go,3).toLowerCase()===Sr?(r=e.substr(go,3),go+=3):(r=bt,0===wo&&c(Er)),r===bt&&(e.substr(go,4).toLowerCase()===Pr?(r=e.substr(go,4),go+=4):(r=bt,0===wo&&c(Fr)),r===bt&&(e.substr(go,3).toLowerCase()===Br?(r=e.substr(go,3),go+=3):(r=bt,0===wo&&c(jr)),r===bt&&(e.substr(go,5).toLowerCase()===Dr?(r=e.substr(go,5),go+=5):(r=bt,0===wo&&c(Ir)),r===bt&&(e.substr(go,3).toLowerCase()===Or?(r=e.substr(go,3),go+=3):(r=bt,0===wo&&c(Mr)),r===bt&&(e.substr(go,3).toLowerCase()===Nr?(r=e.substr(go,3),go+=3):(r=bt,0===wo&&c(zr)),r===bt&&(e.substr(go,6).toLowerCase()===Hr?(r=e.substr(go,6),go+=6):(r=bt,0===wo&&c(Rr)),r===bt&&(e.substr(go,3).toLowerCase()===Wr?(r=e.substr(go,3),go+=3):(r=bt,0===wo&&c(Gr)),r===bt&&(e.substr(go,8).toLowerCase()===qr?(r=e.substr(go,8),go+=8):(r=bt,0===wo&&c(Vr)),r===bt&&(e.substr(go,6).toLowerCase()===Xr?(r=e.substr(go,6),go+=6):(r=bt,0===wo&&c(Ur)),r===bt&&(e.substr(go,8).toLowerCase()===Kr?(r=e.substr(go,8),go+=8):(r=bt,0===wo&&c(Zr)),r===bt&&(e.substr(go,6).toLowerCase()===Yr?(r=e.substr(go,6),go+=6):(r=bt,0===wo&&c($r)),r===bt&&(e.substr(go,4).toLowerCase()===Jr?(r=e.substr(go,4),go+=4):(r=bt,0===wo&&c(Qr)),r===bt&&(e.substr(go,3).toLowerCase()===tn?(r=e.substr(go,3),go+=3):(r=bt,0===wo&&c(en)),r===bt&&(e.substr(go,3).toLowerCase()===rn?(r=e.substr(go,3),go+=3):(r=bt,0===wo&&c(nn)))))))))))))))),r!==bt&&(mo=t,r=on(r)),t=r,wo--,t===bt&&(r=bt,0===wo&&c(_r)),t}function B(){var t;return t=j(),t===bt&&(t=I()),t}function j(){var t,r,n,o;return wo++,t=go,34===e.charCodeAt(go)?(r=un,go++):(r=bt,0===wo&&c(cn)),r!==bt?(n=D(),n!==bt?(34===e.charCodeAt(go)?(o=un,go++):(o=bt,0===wo&&c(cn)),o!==bt?(mo=t,r=sn(n),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),wo--,t===bt&&(r=bt,0===wo&&c(an)),t}function D(){var t,r,n,o;for(t=[],r=go,n=go,wo++,34===e.charCodeAt(go)?(o=un,go++):(o=bt,0===wo&&c(cn)),wo--,o===bt?n=void 0:(go=n,n=bt),n!==bt?(e.substr(go,2)===ln?(o=ln,go+=2):(o=bt,0===wo&&c(fn)),o===bt&&(e.length>go?(o=e.charAt(go),go++):(o=bt,0===wo&&c(dn))),o!==bt?(mo=r,n=hn(o),r=n):(go=r,r=bt)):(go=r,r=bt);r!==bt;)t.push(r),r=go,n=go,wo++,34===e.charCodeAt(go)?(o=un,go++):(o=bt,0===wo&&c(cn)),wo--,o===bt?n=void 0:(go=n,n=bt),n!==bt?(e.substr(go,2)===ln?(o=ln,go+=2):(o=bt,0===wo&&c(fn)),o===bt&&(e.length>go?(o=e.charAt(go),go++):(o=bt,0===wo&&c(dn))),o!==bt?(mo=r,n=hn(o),r=n):(go=r,r=bt)):(go=r,r=bt);return t}function I(){var t,e;return t=go,e=O(),e!==bt&&(mo=t,e=pn(e)),t=e}function O(){var t,r,n,o;for(t=[],r=go,n=go,wo++,44===e.charCodeAt(go)?(o=Ct,go++):(o=bt,0===wo&&c(At)),o===bt&&(59===e.charCodeAt(go)?(o=Lt,go++):(o=bt,0===wo&&c(Tt)),o===bt&&(123===e.charCodeAt(go)?(o=he,go++):(o=bt,0===wo&&c(pe)))),wo--,o===bt?n=void 0:(go=n,n=bt),n!==bt?(e.length>go?(o=e.charAt(go),go++):(o=bt,0===wo&&c(dn)),o!==bt?(mo=r,n=hn(o),r=n):(go=r,r=bt)):(go=r,r=bt);r!==bt;)t.push(r),r=go,n=go,wo++,44===e.charCodeAt(go)?(o=Ct,go++):(o=bt,0===wo&&c(At)),o===bt&&(59===e.charCodeAt(go)?(o=Lt,go++):(o=bt,0===wo&&c(Tt)),o===bt&&(123===e.charCodeAt(go)?(o=he,go++):(o=bt,0===wo&&c(pe)))),wo--,o===bt?n=void 0:(go=n,n=bt),n!==bt?(e.length>go?(o=e.charAt(go),go++):(o=bt,0===wo&&c(dn)),o!==bt?(mo=r,n=hn(o),r=n):(go=r,r=bt)):(go=r,r=bt);return t}function M(){var t,r,n;if(wo++,t=go,r=[],mn.test(e.charAt(go))?(n=e.charAt(go),go++):(n=bt,0===wo&&c(bn)),n!==bt)for(;n!==bt;)r.push(n),mn.test(e.charAt(go))?(n=e.charAt(go),go++):(n=bt,0===wo&&c(bn));else r=bt;return r!==bt&&(mo=t,r=xn(r)),t=r,t===bt&&(t=j()),wo--,t===bt&&(r=bt,0===wo&&c(gn)),t}function N(){var t,r;return wo++,t=go,wn.test(e.charAt(go))?(r=e.charAt(go),go++):(r=bt,0===wo&&c(vn)),r!==bt&&(mo=t,r=hn(r)),t=r,wo--,t===bt&&(r=bt,0===wo&&c(yn)),t}function z(){var t,r;return wo++,t=go,An.test(e.charAt(go))?(r=e.charAt(go),go++):(r=bt,0===wo&&c(kn)),r!==bt&&(mo=t,r=hn(r)),t=r,wo--,t===bt&&(r=bt,0===wo&&c(Cn)),t}function H(){var t;return e.substr(go,2)===Ln?(t=Ln,go+=2):(t=bt,0===wo&&c(Tn)),t}function R(){var t;return e.substr(go,2)===_n?(t=_n,go+=2):(t=bt,0===wo&&c(Sn)),t}function W(){var t,r,n;return t=go,r=go,wo++,e.substr(go,2)===_n?(n=_n,go+=2):(n=bt,0===wo&&c(Sn)),wo--,n===bt?r=void 0:(go=r,r=bt),r!==bt?(e.length>go?(n=e.charAt(go),go++):(n=bt,0===wo&&c(dn)),n!==bt?(mo=t,r=hn(n),t=r):(go=t,t=bt)):(go=t,t=bt),t}function G(){var t,e,r,n;if(t=go,(e=H())!==bt){for(r=[],n=W();n!==bt;)r.push(n),n=W();r!==bt?(n=R(),n!==bt?(mo=t,e=En(e,r,n),t=e):(go=t,t=bt)):(go=t,t=bt)}else go=t,t=bt;return t}function q(){var t;return e.substr(go,2)===Pn?(t=Pn,go+=2):(t=bt,0===wo&&c(Fn)),t===bt&&(35===e.charCodeAt(go)?(t=Bn,go++):(t=bt,0===wo&&c(jn))),t}function V(){var t;return Dn.test(e.charAt(go))?(t=e.charAt(go),go++):(t=bt,0===wo&&c(In)),t}function X(){var t,e,r,n;if(t=go,(e=q())!==bt){for(r=[],n=V();n!==bt;)r.push(n),n=V();r!==bt?(mo=t,e=On(e,r),t=e):(go=t,t=bt)}else go=t,t=bt;return t}function U(){var t;return wo++,t=X(),t===bt&&(t=G()),wo--,t===bt&&(bt,0===wo&&c(Mn)),t}function K(){var t,e;for(t=[],e=N(),e===bt&&(e=z())===bt&&(e=U());e!==bt;)t.push(e),(e=N())===bt&&(e=z())===bt&&(e=U());return t}function Z(){var t,e;return wo++,t=go,e=Y(),e!==bt&&(mo=t,e=zn(e)),t=e,t===bt&&(t=go,e=$(),e!==bt&&(mo=t,e=Hn(e)),t=e),wo--,t===bt&&(e=bt,0===wo&&c(Nn)),t}function Y(){var t,r,n,o;return t=go,34===e.charCodeAt(go)?(r=un,go++):(r=bt,0===wo&&c(cn)),r!==bt?(n=$(),n!==bt?(34===e.charCodeAt(go)?(o=un,go++):(o=bt,0===wo&&c(cn)),o!==bt?(mo=t,r=Rn(n),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t}function $(){var t;return t=Q(),t===bt&&(t=J()),t}function J(){var t,r,n;if(t=go,r=[],Wn.test(e.charAt(go))?(n=e.charAt(go),go++):(n=bt,0===wo&&c(Gn)),n!==bt)for(;n!==bt;)r.push(n),Wn.test(e.charAt(go))?(n=e.charAt(go),go++):(n=bt,0===wo&&c(Gn));else r=bt;return r!==bt&&(mo=t,r=qn(r)),t=r}function Q(){var t,r,n,o,i;return t=go,r=go,n=J(),n!==bt?(46===e.charCodeAt(go)?(o=Vn,go++):(o=bt,0===wo&&c(Xn)),o!==bt?(i=J(),i!==bt?(n=[n,o,i],r=n):(go=r,r=bt)):(go=r,r=bt)):(go=r,r=bt),r!==bt&&(mo=t,r=Un(r)),t=r}function tt(){var t,e;return wo++,t=go,e=et(),e!==bt&&(mo=t,e=Zn(e)),t=e,t===bt&&(t=go,e=rt(),e!==bt&&(mo=t,e=Yn(e)),t=e),wo--,t===bt&&(e=bt,0===wo&&c(Kn)),t}function et(){var t,r,n,o;return t=go,34===e.charCodeAt(go)?(r=un,go++):(r=bt,0===wo&&c(cn)),r!==bt?(n=rt(),n!==bt?(34===e.charCodeAt(go)?(o=un,go++):(o=bt,0===wo&&c(cn)),o!==bt?(mo=t,r=zn(n),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t}function rt(){var t;return e.substr(go,4).toLowerCase()===$n?(t=e.substr(go,4),go+=4):(t=bt,0===wo&&c(Jn)),t===bt&&(e.substr(go,5).toLowerCase()===Qn?(t=e.substr(go,5),go+=5):(t=bt,0===wo&&c(to)),t===bt&&(e.substr(go,2).toLowerCase()===eo?(t=e.substr(go,2),go+=2):(t=bt,0===wo&&c(ro)),t===bt&&(e.substr(go,3).toLowerCase()===no?(t=e.substr(go,3),go+=3):(t=bt,0===wo&&c(oo)),t===bt&&(48===e.charCodeAt(go)?(t=io,go++):(t=bt,0===wo&&c(ao)),t===bt&&(49===e.charCodeAt(go)?(t=uo,go++):(t=bt,0===wo&&c(co))))))),t}function nt(){var t;return wo++,t=ot(),t===bt&&(t=it()),wo--,t===bt&&(bt,0===wo&&c(so)),t}function ot(){var t,r,n,o;return t=go,34===e.charCodeAt(go)?(r=un,go++):(r=bt,0===wo&&c(cn)),r!==bt?(n=it(),n!==bt?(34===e.charCodeAt(go)?(o=un,go++):(o=bt,0===wo&&c(cn)),o!==bt?(mo=t,r=zn(n),t=r):(go=t,t=bt)):(go=t,t=bt)):(go=t,t=bt),t}function it(){var t,r;return t=go,r=$(),r!==bt&&(mo=t,r=lo(r)),t=r,t===bt&&(t=go,e.substr(go,4).toLowerCase()===fo?(r=e.substr(go,4),go+=4):(r=bt,0===wo&&c(ho)),r!==bt&&(mo=t,r=po(r)),t=r),t}function at(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function ut(t){var e={};return t.forEach(function(t){e=at(e,t)}),e}function ct(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function st(t,e){var r={};return r[t.toLowerCase()]=e,r}function lt(t,e,r){return void 0===e||"*"===e||(!!t.some(function(t){return t.name===e})||!0===r[e])}function ft(t){var e={};return e.name=t,e}function dt(t,e,r){return t||(t=[]),r||(r={}),e&&e.forEach(function(e){e.forEach(function(e){lt(t,e.from,r)||t.push(ft(e.from)),e.arcs&&(r[e.to]=!0,at(t,dt(t,e.arcs,r)),delete r[e.to]),lt(t,e.to,r)||t.push(ft(e.to))})}),t}function ht(t){return!!t&&(t.hasOwnProperty("watermark")||t.hasOwnProperty("wordwrapentities")||t.hasOwnProperty("wordwrapboxes")||t.hasOwnProperty("width")&&"auto"===t.width)}function pt(t){return!!t&&t.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})})}function gt(t,e){var r=ht(t),n=pt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}r=void 0!==r?r:{};var mt,bt={},xt={program:l},yt=l,wt=function(t,e){e.entities=dt(e.entities,e.arcs);var r=e;return r=at({meta:gt(e.options,e.arcs)},r),t.length>0&&(r=at({precomment:t},r)),r},vt=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},Ct=",",At=n(",",!1),kt=function(t){return t},Lt=";",Tt=n(";",!1),_t=function(t){return ut(t[0].concat(t[1]))},St="hscale",Et=n("hscale",!0),Pt="arcgradient",Ft=n("arcgradient",!0),Bt="=",jt=n("=",!1),Dt=function(t,e){return st(t,e)},It="width",Ot=n("width",!0),Mt="wordwraparcs",Nt=n("wordwraparcs",!0),zt=function(t,e){return st(t,ct(e))},Ht="wordwrapentities",Rt=n("wordwrapentities",!0),Wt="wordwrapboxes",Gt=n("wordwrapboxes",!0),qt="watermark",Vt=n("watermark",!0),Xt=function(t){return t},Ut=function(t){return t[0].concat(t[1])},Kt=i("entity"),Zt=":",Yt=n(":",!1),$t=function(t,e){return e},Jt=function(t,e){var r={};return r.name=t,e&&(r.label=e),r},Qt=function(t){return t},te=function(t){return t[0].concat(t[1])},ee=function(t){return t},re=function(t){return t},ne=function(t){return t},oe=function(t,e){return e},ie=function(t,e){return e&&(t.label=e),t},ae=function(t){return{kind:t}},ue=function(t,e,r){return{kind:e,from:t,to:r}},ce="*",se=n("*",!1),le=function(t,e){return{kind:t,from:"*",to:e}},fe=function(t,e){return{kind:e,from:t,to:"*"}},de=function(t,e,r,n){return n},he="{",pe=n("{",!1),ge="}",me=n("}",!1),be=function(t,e,r,n,o){var i={kind:e,from:t,to:r,arcs:o};return n&&(i.label=n),i},xe=i("empty row"),ye="|||",we=n("|||",!1),ve="...",Ce=n("...",!1),Ae=i("---"),ke="---",Le=n("---",!1),Te=function(t){return t.toLowerCase()},_e=i("bi-directional arrow"),Se="--",Ee=n("--",!1),Pe="<->",Fe=n("<->",!1),Be="==",je=n("==",!1),De="<<=>>",Ie=n("<<=>>",!1),Oe="<=>",Me=n("<=>",!1),Ne="..",ze=n("..",!1),He="<<>>",Re=n("<<>>",!1),We="::",Ge=n("::",!1),qe="<:>",Ve=n("<:>",!1),Xe=i("left to right arrow"),Ue="->",Ke=n("->",!1),Ze="=>>",Ye=n("=>>",!1),$e="=>",Je=n("=>",!1),Qe=">>",tr=n(">>",!1),er=":>",rr=n(":>",!1),nr="-x",or=n("-x",!0),ir=i("right to left arrow"),ar="<-",ur=n("<-",!1),cr="<<=",sr=n("<<=",!1),lr="<=",fr=n("<=",!1),dr="<<",hr=n("<<",!1),pr="<:",gr=n("<:",!1),mr="x-",br=n("x-",!0),xr=i("box"),yr="note",wr=n("note",!0),vr="abox",Cr=n("abox",!0),Ar="rbox",kr=n("rbox",!0),Lr="box",Tr=n("box",!0),_r=i("inline expression"),Sr="alt",Er=n("alt",!0),Pr="else",Fr=n("else",!0),Br="opt",jr=n("opt",!0),Dr="break",Ir=n("break",!0),Or="par",Mr=n("par",!0),Nr="seq",zr=n("seq",!0),Hr="strict",Rr=n("strict",!0),Wr="neg",Gr=n("neg",!0),qr="critical",Vr=n("critical",!0),Xr="ignore",Ur=n("ignore",!0),Kr="consider",Zr=n("consider",!0),Yr="assert",$r=n("assert",!0),Jr="loop",Qr=n("loop",!0),tn="ref",en=n("ref",!0),rn="exc",nn=n("exc",!0),on=function(t){return t.toLowerCase()},an=i("double quoted string"),un='"',cn=n('"',!1),sn=function(t){return t.join("")},ln='\\"',fn=n('\\"',!1),dn=function(){return{type:"any"}}(),hn=function(t){return t},pn=function(t){return t.join("").trim()},gn=i("identifier"),mn=/^[^;, "\t\n\r=\-><:{*]/,bn=o([";",","," ",'"',"\t","\n","\r","=","-",">","<",":","{","*"],!0,!1),xn=function(t){return t.join("")},yn=i("whitespace"),wn=/^[ \t]/,vn=o([" ","\t"],!1,!1),Cn=i("lineend"),An=/^[\r\n]/,kn=o(["\r","\n"],!1,!1),Ln="/*",Tn=n("/*",!1),_n="*/",Sn=n("*/",!1),En=function(t,e,r){return t+e.join("")+r},Pn="//",Fn=n("//",!1),Bn="#",jn=n("#",!1),Dn=/^[^\r\n]/,In=o(["\r","\n"],!0,!1),On=function(t,e){return t+e.join("")},Mn=i("comment"),Nn=i("number"),zn=function(t){return t},Hn=function(t){return t.toString()},Rn=function(t){return t.toString()},Wn=/^[0-9]/,Gn=o([["0","9"]],!1,!1),qn=function(t){return parseInt(t.join(""),10)},Vn=".",Xn=n(".",!1),Un=function(t){return parseFloat(t.join(""))},Kn=i("boolean"),Zn=function(t){return t},Yn=function(t){return t.toString()},$n="true",Jn=n("true",!0),Qn="false",to=n("false",!0),eo="on",ro=n("on",!0),no="off",oo=n("off",!0),io="0",ao=n("0",!1),uo="1",co=n("1",!1),so=i("size"),lo=function(t){return t.toString()},fo="auto",ho=n("auto",!0),po=function(t){return t.toLowerCase()},go=0,mo=0,bo=[{line:1,column:1}],xo=0,yo=[],wo=0;if("startRule"in r){if(!(r.startRule in xt))throw new Error("Can't start parsing from rule \""+r.startRule+'".');yt=xt[r.startRule]}if((mt=yt())!==bt&&go===e.length)return mt;throw mt!==bt&&go<e.length&&c(function(){return{type:"end"}}()),s(yo,xo<e.length?e.charAt(xo):null,xo<e.length?u(xo,xo+1):u(xo,xo))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return a[t.type](t)}var a={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:e}}),r("render/astmassage/aggregatekind",[],function(){"use strict";var t=Object.freeze({"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"});return{getAggregate:function(e){return t[e]}}}),r("render/textutensils/escape",[],function(){"use strict";return{unescapeString:function(t){return t.replace(/\\"/g,'"')},escapeString:function(t){return t.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}),r("render/text/ast2thing",["require","../textutensils/escape"],function(t){"use strict";function e(t){Object.getOwnPropertyNames(t).forEach(function(e){A[e]=t[e]})}function r(t){e(C),e(t)}function n(t,e){return r(e),o(t)}function o(t){var e="";return t&&(t.precomment&&(e+=A.renderCommentfn(t.precomment)),e+=A.program.opener,t.options&&(e+=d(t.options)),t.entities&&(e+=p(t.entities,A.renderEntityfn)),t.arcs&&(e+=y(t.arcs,"")),e+=A.program.closer),e}function i(t,e){return e.filter(function(e){return void 0!==t[e]}).map(function(e){return{name:e,value:t[e]}})}function a(t){return t.reduce(function(t,e){return t+e},"")}function u(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"].indexOf(t)>-1}function c(t){var e=t.match(/[a-z0-9]+/gi);return Boolean(e)?1!==e.length||u(t):"*"!==t}function s(t){return c(t)?'"'+t+'"':t}function l(t){return t.name+"="+("string"==typeof t.value?'"'+w.escapeString(t.value)+'"':t.value.toString())}function f(){return!0}function d(t){var e=i(t,A.supportedOptions).filter(A.optionIsValidfn),r="";if(e.length>0){var n=e.pop();r=e.reduce(function(t,e){return t+A.renderOptionfn(e)+A.option.separator},A.option.opener),r+=A.renderOptionfn(n)+A.option.closer}return r}function h(t){return A.renderEntityNamefn(t.name)+g(t,A.supportedEntityAttributes)}function p(t){var e="";return t.length>0&&(e=t.slice(0,-1).reduce(function(t,e){return t+h(e)+A.entity.separator},A.entity.opener),e+=h(t[t.length-1])+A.entity.closer),e}function g(t,e){var r="",n=i(t,e);if(n.length>0){var o=n.pop();r=n.reduce(function(t,e){return t+A.renderAttributefn(e)+A.attribute.separator},A.attribute.opener),r+=A.renderAttributefn(o)+A.attribute.closer}return r}function m(t){return t}function b(t,e){var r="";return t.from&&(r+=A.renderEntityNamefn(t.from)+" "),t.kind&&(r+=A.renderKindfn(t.kind)),t.to&&(r+=" "+A.renderEntityNamefn(t.to)),r+=g(t,A.supportedArcAttributes),t.arcs&&(r+=A.inline.opener,r+=y(t.arcs,e+v),r+=e+A.inline.closer),null===t.arcs&&(r+=A.inline.opener,r+=e+A.inline.closer),r}function x(t,e){var r="";return t.length>0&&(r=t.slice(0,-1).reduce(function(t,r){return t+e+b(r,e)+A.arcline.separator},A.arcline.opener),r+=e+b(t[t.length-1],e)+A.arcline.closer),r}function y(t,e){return t.reduce(function(t,r){return t+x(r,e)},"")}var w=t("../textutensils/escape"),v="  ",C={renderCommentfn:a,renderOptionfn:l,optionIsValidfn:f,renderEntityNamefn:s,renderKindfn:m,supportedOptions:["hscale","width","arcgradient","wordwraparcs","watermark","wordwrapentities","wordwrapboxes"],supportedEntityAttributes:["label"],supportedArcAttributes:["label"],program:{opener:"",closer:""},option:{opener:"",separator:",\n",closer:";\n\n"},entity:{opener:"",separator:", ",closer:";\n\n"},arcline:{opener:"",separator:",\n",closer:";\n"},inline:{opener:" {\n",closer:"}"},attribute:{opener:"",separator:"",closer:""}},A={};return{render:n}}),r("render/text/ast2mscgen",["require","../astmassage/aggregatekind","../textutensils/escape","./ast2thing"],function(t){"use strict";function e(t){!0===t?(c="",s="",l=""):(c="  ",s=" ",l="\n")}function r(t){return"inline_expression"===i.getAggregate(t)?"--":t}function n(t){var e="";return t.name&&t.value&&(e+=t.name+'="'+a.escapeString(t.value)+'"'),e}function o(t){return!Boolean(t.value)||"string"!=typeof t.value||"auto"!==t.value.toLowerCase()}var i=t("../astmassage/aggregatekind"),a=t("../textutensils/escape"),u=t("./ast2thing"),c="  ",s=" ",l="\n";return{render:function(t,i){return e(i),u.render(t,{renderAttributefn:n,optionIsValidfn:o,renderKindfn:r,supportedOptions:["hscale","width","arcgradient","wordwraparcs"],supportedEntityAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],supportedArcAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],program:{opener:"msc"+s+"{"+l,closer:"}"},option:{opener:c,separator:","+l+c,closer:";"+l+l},entity:{opener:c,separator:","+l+c,closer:";"+l+l},attribute:{opener:s+"[",separator:","+s,closer:"]"},arcline:{opener:c,separator:","+l+c,closer:";"+l},inline:{opener:";"+l,closer:"#"}})}}}),r("render/text/ast2xu",["require","../textutensils/escape","./ast2thing"],function(t){"use strict";function e(t){!0===t?(i="",a="",u=""):(i="  ",a=" ",u="\n")}function r(t){var e="";return t.name&&t.value&&(e+=t.name+'="'+n.escapeString(t.value)+'"'),e}var n=t("../textutensils/escape"),o=t("./ast2thing"),i="  ",a=" ",u="\n";return{render:function(t,n){return e(n),o.render(t,{renderAttributefn:r,supportedEntityAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],supportedArcAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip","title"],program:{opener:"msc"+a+"{"+u,closer:"}"},option:{opener:i,separator:","+u+i,closer:";"+u+u},entity:{opener:i,separator:","+u+i,closer:";"+u+u},attribute:{opener:a+"[",separator:","+a,closer:"]"},arcline:{opener:i,separator:","+u+i,closer:";"+u},inline:{opener:a+"{"+u,closer:i+"}"}})}}}),r("render/text/ast2msgenny",["require","./ast2thing"],function(t){"use strict";function e(t){var e=t.match(/[;,{]/);return!!e&&1===e.length}function r(t){return e(t)?'"'+t+'"':t.trim()}function n(t){var e=t.match(/[^;, "\t\n\r=\-><:{*]+/gi);return Boolean(e)?1!==e.length:"*"!==t}function o(t){return n(t)?'"'+t+'"':t}function i(t){var e="";return t.name&&t.value&&(e+=" : "+r(t.value)),e}var a=t("./ast2thing");return{render:function(t){return a.render(t,{renderAttributefn:i,renderEntityNamefn:o,entity:{opener:"",separator:",\n",closer:";\n\n"}})}}}),r("render/textutensils/wrap",[],function(){"use strict";return{wrap:function(t,e){for(var r=0,n=[],o=0,i=0,a=0,u=0,c=t.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");u<=c.length;)u>=c.length?n.push(c.substring(o,u)):"\n"===c[u]?(r=0,a=u,n.push(c.substring(o,a)),o=a+1):r++>=e&&(a=c.substring(0,u).lastIndexOf(" "),-1===a||a<o?(r=1,a=u,i=u):(r=0,i=a+1),n.push(c.substring(o,a)),o=i),u++;return n}}}),r("render/astmassage/asttransform",[],function(){"use strict";function t(t,e){t&&e&&t.forEach(function(t){e.forEach(function(e){e(t)})})}function e(t,e,r,n){n&&n.forEach(function(n){n(r,t,e)})}function r(t,r,o){r.forEach(function(i){e(t,r,i,o),i.arcs&&n(t,i.arcs,o)})}function n(t,e,n){t&&e&&n&&e.forEach(function(e){r(t,e,n)})}return{transform:function(e,r,o){return t(e.entities,r),n(e.entities,e.arcs,o),e}}}),r("render/astmassage/normalizekind",[],function(){"use strict";var t=Object.freeze({"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"});return{getNormalizedKind:function(e){return t[e]||e}}}),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function o(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function i(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function a(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function u(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function c(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function s(t,e){return null==t?Xt:t[e]}function l(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function f(t,e){return function(r){return t(e(r))}}function d(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function h(){}function p(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function g(){this.__data__=vr?vr(null):{},this.size=0}function m(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function b(t){var e=this.__data__;if(vr){var r=e[t];return r===Zt?Xt:r}return Ye.call(e,t)?e[t]:Xt}function x(t){var e=this.__data__;return vr?e[t]!==Xt:Ye.call(e,t)}function y(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vr&&e===Xt?Zt:e,this}function w(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function v(){this.__data__=[],this.size=0}function C(t){var e=this.__data__,r=H(e,t);return!(r<0)&&(r==e.length-1?e.pop():ur.call(e,r,1),--this.size,!0)}function A(t){var e=this.__data__,r=H(e,t);return r<0?Xt:e[r][1]}function k(t){return H(this.__data__,t)>-1}function L(t,e){var r=this.__data__,n=H(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function T(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function _(){this.size=0,this.__data__={hash:new p,map:new(br||w),string:new p}}function S(t){var e=gt(this,t).delete(t);return this.size-=e?1:0,e}function E(t){return gt(this,t).get(t)}function P(t){return gt(this,t).has(t)}function F(t,e){var r=gt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function B(t){var e=this.__data__=new w(t);this.size=e.size}function j(){this.__data__=new w,this.size=0}function D(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function I(t){return this.__data__.get(t)}function O(t){return this.__data__.has(t)}function M(t,e){var r=this.__data__;if(r instanceof w){var n=r.__data__;if(!br||n.length<Ut-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new T(n)}return r.set(t,e),this.size=r.size,this}function N(t,e){var r=Or(t),n=!r&&Ir(t),o=!r&&!n&&Mr(t),i=!r&&!n&&!o&&Nr(t),a=r||n||o||i,u=a?c(t.length,String):[],s=u.length;for(var l in t)!e&&!Ye.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ct(l,s))||u.push(l);return u}function z(t,e,r){var n=t[e];Ye.call(t,e)&&Dt(n,r)&&(r!==Xt||e in t)||G(t,e,r)}function H(t,e){for(var r=t.length;r--;)if(Dt(t[r][0],e))return r;return-1}function R(t,e){return t&&st(e,Ht(e),t)}function W(t,e){return t&&st(e,Rt(e),t)}function G(t,e,r){"__proto__"==e&&lr?lr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function q(t,e,r,n,i,a){var u,c=e&Yt,s=e&$t,l=e&Jt;if(r&&(u=i?r(t,n,i,a):r(t)),u!==Xt)return u;if(!Nt(t))return t;var f=Or(t);if(f){if(u=xt(t),!c)return ct(t,u)}else{var d=jr(t),h=d==ae||d==ue;if(Mr(t))return tt(t,c);if(d==fe||d==re||h&&!i){if(u=s||h?{}:yt(t),!c)return s?ft(t,W(u,t)):lt(t,R(u,t))}else{if(!Ie[d])return i?t:{};u=wt(t,d,q,c)}}a||(a=new B);var p=a.get(t);if(p)return p;a.set(t,u);var g=l?s?pt:ht:s?Rt:Ht,m=f?Xt:g(t);return o(m||t,function(n,o){m&&(o=n,n=t[o]),z(u,o,q(n,e,r,o,t,a))}),u}function V(t,e,r,n,o){var i=-1,u=t.length;for(r||(r=vt),o||(o=[]);++i<u;){var c=t[i];e>0&&r(c)?e>1?V(c,e-1,r,n,o):a(o,c):n||(o[o.length]=c)}return o}function X(t,e,r){var n=e(t);return Or(t)?n:a(n,r(t))}function U(t){return null==t?t===Xt?be:le:sr&&sr in Object(t)?bt(t):St(t)}function K(t){return zt(t)&&U(t)==re}function Z(t){return!(!Nt(t)||Lt(t))&&(Ot(t)?Qe:Be).test(Pt(t))}function Y(t){return zt(t)&&Mt(t.length)&&!!De[U(t)]}function $(t){if(!Tt(t))return hr(t);var e=[];for(var r in Object(t))Ye.call(t,r)&&"constructor"!=r&&e.push(r);return e}function J(t){if(!Nt(t))return _t(t);var e=Tt(t),r=[];for(var n in t)("constructor"!=n||!e&&Ye.call(t,n))&&r.push(n);return r}function Q(t,e){return Dr(Et(t,e,Gt),t+"")}function tt(t,e){if(e)return t.slice();var r=t.length,n=nr?nr(r):new t.constructor(r);return t.copy(n),n}function et(t){var e=new t.constructor(t.byteLength);return new rr(e).set(new rr(t)),e}function rt(t,e){var r=e?et(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function nt(e,r,n){return u(r?n(l(e),Yt):l(e),t,new e.constructor)}function ot(t){var e=new t.constructor(t.source,Fe.exec(t));return e.lastIndex=t.lastIndex,e}function it(t,r,n){return u(r?n(d(t),Yt):d(t),e,new t.constructor)}function at(t){return Sr?Object(Sr.call(t)):{}}function ut(t,e){var r=e?et(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function ct(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function st(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=n?n(r[u],t[u],u,r,t):Xt;c===Xt&&(c=t[u]),o?G(r,u,c):z(r,u,c)}return r}function lt(t,e){return st(t,Fr(t),e)}function ft(t,e){return st(t,Br(t),e)}function dt(t,e,r,n){return t===Xt||Dt(t,Ue[r])&&!Ye.call(n,r)?e:t}function ht(t){return X(t,Ht,Fr)}function pt(t){return X(t,Rt,Br)}function gt(t,e){var r=t.__data__;return kt(e)?r["string"==typeof e?"string":"hash"]:r.map}function mt(t,e){var r=s(t,e);return Z(r)?r:Xt}function bt(t){var e=Ye.call(t,sr),r=t[sr];try{t[sr]=Xt
;var n=!0}catch(t){}var o=Je.call(t);return n&&(e?t[sr]=r:delete t[sr]),o}function xt(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&Ye.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function yt(t){return"function"!=typeof t.constructor||Tt(t)?{}:Er(or(t))}function wt(t,e,r,n){var o=t.constructor;switch(e){case ye:return et(t);case oe:case ie:return new o(+t);case we:return rt(t,n);case ve:case Ce:case Ae:case ke:case Le:case Te:case _e:case Se:case Ee:return ut(t,n);case ce:return nt(t,n,r);case se:case ge:return new o(t);case he:return ot(t);case pe:return it(t,n,r);case me:return at(t)}}function vt(t){return Or(t)||Ir(t)||!!(cr&&t&&t[cr])}function Ct(t,e){return!!(e=null==e?ee:e)&&("number"==typeof t||je.test(t))&&t>-1&&t%1==0&&t<e}function At(t,e,r){if(!Nt(r))return!1;var n=typeof e;return!!("number"==n?It(r)&&Ct(e,r.length):"string"==n&&e in r)&&Dt(r[e],t)}function kt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Lt(t){return!!$e&&$e in t}function Tt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ue)}function _t(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function St(t){return Je.call(t)}function Et(t,e,r){return e=pr(e===Xt?t.length-1:e,0),function(){for(var o=arguments,i=-1,a=pr(o.length-e,0),u=Array(a);++i<a;)u[i]=o[e+i];i=-1;for(var c=Array(e+1);++i<e;)c[i]=o[i];return c[e]=r(u),n(t,this,c)}}function Pt(t){if(null!=t){try{return Ze.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ft(t){return(null==t?0:t.length)?V(t,1):[]}function Bt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Kt);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Bt.Cache||T),r}function jt(t){return q(t,Yt|Jt)}function Dt(t,e){return t===e||t!==t&&e!==e}function It(t){return null!=t&&Mt(t.length)&&!Ot(t)}function Ot(t){if(!Nt(t))return!1;var e=U(t);return e==ae||e==ue||e==ne||e==de}function Mt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ee}function Nt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function zt(t){return null!=t&&"object"==typeof t}function Ht(t){return It(t)?N(t):$(t)}function Rt(t){return It(t)?N(t,!0):J(t)}function Wt(t){return function(){return t}}function Gt(t){return t}function qt(){return[]}function Vt(){return!1}var Xt,Ut=200,Kt="Expected a function",Zt="__lodash_hash_undefined__",Yt=1,$t=2,Jt=4,Qt=800,te=16,ee=9007199254740991,re="[object Arguments]",ne="[object AsyncFunction]",oe="[object Boolean]",ie="[object Date]",ae="[object Function]",ue="[object GeneratorFunction]",ce="[object Map]",se="[object Number]",le="[object Null]",fe="[object Object]",de="[object Proxy]",he="[object RegExp]",pe="[object Set]",ge="[object String]",me="[object Symbol]",be="[object Undefined]",xe="[object WeakMap]",ye="[object ArrayBuffer]",we="[object DataView]",ve="[object Float32Array]",Ce="[object Float64Array]",Ae="[object Int8Array]",ke="[object Int16Array]",Le="[object Int32Array]",Te="[object Uint8Array]",_e="[object Uint8ClampedArray]",Se="[object Uint16Array]",Ee="[object Uint32Array]",Pe=/[\\^$.*+?()[\]{}|]/g,Fe=/\w*$/,Be=/^\[object .+?Constructor\]$/,je=/^(?:0|[1-9]\d*)$/,De={};De[ve]=De[Ce]=De[Ae]=De[ke]=De[Le]=De[Te]=De[_e]=De[Se]=De[Ee]=!0,De[re]=De["[object Array]"]=De[ye]=De[oe]=De[we]=De[ie]=De["[object Error]"]=De[ae]=De[ce]=De[se]=De[fe]=De[he]=De[pe]=De[ge]=De[xe]=!1;var Ie={};Ie[re]=Ie["[object Array]"]=Ie[ye]=Ie[we]=Ie[oe]=Ie[ie]=Ie[ve]=Ie[Ce]=Ie[Ae]=Ie[ke]=Ie[Le]=Ie[ce]=Ie[se]=Ie[fe]=Ie[he]=Ie[pe]=Ie[ge]=Ie[me]=Ie[Te]=Ie[_e]=Ie[Se]=Ie[Ee]=!0,Ie["[object Error]"]=Ie[ae]=Ie[xe]=!1;var Oe="object"==typeof global&&global&&global.Object===Object&&global,Me="object"==typeof self&&self&&self.Object===Object&&self,Ne=Oe||Me||Function("return this")(),ze="object"==typeof exports&&exports&&!exports.nodeType&&exports,He=ze&&"object"==typeof module&&module&&!module.nodeType&&module,Re=He&&He.exports===ze,We=Re&&Oe.process,Ge=function(){try{return We&&We.binding&&We.binding("util")}catch(t){}}(),qe=Ge&&Ge.isTypedArray,Ve=Array.prototype,Xe=Function.prototype,Ue=Object.prototype,Ke=Ne["__core-js_shared__"],Ze=Xe.toString,Ye=Ue.hasOwnProperty,$e=function(){var t=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Je=Ue.toString,Qe=RegExp("^"+Ze.call(Ye).replace(Pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tr=Re?Ne.Buffer:Xt,er=Ne.Symbol,rr=Ne.Uint8Array,nr=tr?tr.allocUnsafe:Xt,or=f(Object.getPrototypeOf,Object),ir=Object.create,ar=Ue.propertyIsEnumerable,ur=Ve.splice,cr=er?er.isConcatSpreadable:Xt,sr=er?er.toStringTag:Xt,lr=function(){try{var t=mt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),fr=Object.getOwnPropertySymbols,dr=tr?tr.isBuffer:Xt,hr=f(Object.keys,Object),pr=Math.max,gr=Date.now,mr=mt(Ne,"DataView"),br=mt(Ne,"Map"),xr=mt(Ne,"Promise"),yr=mt(Ne,"Set"),wr=mt(Ne,"WeakMap"),vr=mt(Object,"create"),Cr=Pt(mr),Ar=Pt(br),kr=Pt(xr),Lr=Pt(yr),Tr=Pt(wr),_r=er?er.prototype:Xt,Sr=_r?_r.valueOf:Xt,Er=function(){function t(){}return function(e){if(!Nt(e))return{};if(ir)return ir(e);t.prototype=e;var r=new t;return t.prototype=Xt,r}}();p.prototype.clear=g,p.prototype.delete=m,p.prototype.get=b,p.prototype.has=x,p.prototype.set=y,w.prototype.clear=v,w.prototype.delete=C,w.prototype.get=A,w.prototype.has=k,w.prototype.set=L,T.prototype.clear=_,T.prototype.delete=S,T.prototype.get=E,T.prototype.has=P,T.prototype.set=F,B.prototype.clear=j,B.prototype.delete=D,B.prototype.get=I,B.prototype.has=O,B.prototype.set=M;var Pr=lr?function(t,e){return lr(t,"toString",{configurable:!0,enumerable:!1,value:Wt(e),writable:!0})}:Gt,Fr=fr?function(t){return null==t?[]:(t=Object(t),i(fr(t),function(e){return ar.call(t,e)}))}:qt,Br=fr?function(t){for(var e=[];t;)a(e,Fr(t)),t=or(t);return e}:qt,jr=U;(mr&&jr(new mr(new ArrayBuffer(1)))!=we||br&&jr(new br)!=ce||xr&&"[object Promise]"!=jr(xr.resolve())||yr&&jr(new yr)!=pe||wr&&jr(new wr)!=xe)&&(jr=function(t){var e=U(t),r=e==fe?t.constructor:Xt,n=r?Pt(r):"";if(n)switch(n){case Cr:return we;case Ar:return ce;case kr:return"[object Promise]";case Lr:return pe;case Tr:return xe}return e});var Dr=function(t){var e=0,r=0;return function(){var n=gr(),o=te-(n-r);if(r=n,o>0){if(++e>=Qt)return arguments[0]}else e=0;return t.apply(Xt,arguments)}}(Pr);Bt.Cache=T;var Ir=K(function(){return arguments}())?K:function(t){return zt(t)&&Ye.call(t,"callee")&&!ar.call(t,"callee")},Or=Array.isArray,Mr=dr||Vt,Nr=qe?function(t){return function(e){return t(e)}}(qe):Y,zr=function(t){return Q(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:Xt,a=o>2?r[2]:Xt;for(i=t.length>3&&"function"==typeof i?(o--,i):Xt,a&&At(r[0],r[1],a)&&(i=o<3?Xt:i,o=1),e=Object(e);++n<o;){var u=r[n];u&&t(e,u,n,i)}return e})}(function(t,e,r,n){st(e,Rt(e),t,n)}),Hr=Q(function(t){return t.push(Xt,dt),n(zr,Xt,t)});h.assignInWith=zr,h.constant=Wt,h.defaults=Hr,h.flatten=Ft,h.keys=Ht,h.keysIn=Rt,h.memoize=Bt,h.extendWith=zr,h.cloneDeep=jt,h.eq=Dt,h.identity=Gt,h.isArguments=Ir,h.isArray=Or,h.isArrayLike=It,h.isBuffer=Mr,h.isFunction=Ot,h.isLength=Mt,h.isObject=Nt,h.isObjectLike=zt,h.isTypedArray=Nr,h.stubArray=qt,h.stubFalse=Vt,h.VERSION="4.17.4","function"==typeof r&&"object"==typeof r.amd&&r.amd?(Ne._=h,r("lib/lodash/lodash.custom",[],function(){return h})):He?((He.exports=h)._=h,ze._=h):Ne._=h}.call(this),r("render/astmassage/normalizeoptions",["require","../../lib/lodash/lodash.custom"],function(t){"use strict";var e=t("../../lib/lodash/lodash.custom");return function(t){return e.defaults(t||{},{wordwraparcs:!1,wordwrapentities:!0,wordwrapboxes:!0})}}),r("render/astmassage/flatten",["require","./asttransform","./aggregatekind","./normalizekind","./normalizeoptions","../../lib/lodash/lodash.custom","../textutensils/escape"],function(t){"use strict";function e(t){void 0===t.label&&(t.label=t.name)}function r(t){Boolean(t.label)&&(t.label=b.unescapeString(t.label)),Boolean(t.id)&&(t.id=b.unescapeString(t.id))}function n(t){t.label=Boolean(t.label)?t.label:""}function o(t){if(t.kind&&p.getNormalizedKind(t.kind)!==t.kind){t.kind=p.getNormalizedKind(t.kind);var e=t.from;t.from=t.to,t.to=e}return t}function i(t,e){!t.linecolor&&e.arclinecolor&&(t.linecolor=e.arclinecolor),!t.textcolor&&e.arctextcolor&&(t.textcolor=e.arctextcolor),!t.textbgcolor&&e.arctextbgcolor&&(t.textbgcolor=e.arctextbgcolor)}function a(t,e){if(t&&t.from){var r=e.filter(function(e){return e.name===t.from});r.length>0&&i(t,r[0])}}function u(t){return t.arcs.reduce(function(t,e){return t+(Boolean(e[0].arcs)?u(e[0])+1:0)},t.arcs.length)}function c(t,e,r,n){var o=[],a=[],s=[];return t.forEach(function(t){if("inline_expression"===h.getAggregate(t.kind)){if(t.depth=e,t.isVirtual=!0,Boolean(t.arcs)){var o=m.cloneDeep(t);o.numberofrows=u(o),delete o.arcs,a.push(o),t.arcs.forEach(function(t){s=s.concat(c(t,e+1,o.from,o.to)),t.forEach(function(t){i(t,o)})}),e>x&&(x=e)}else a.push(t);s.push([{kind:"|||",from:t.from,to:t.to,isVirtual:!0}])}else r&&n&&"emptyarc"===h.getAggregate(t.kind)&&(t.from=r,t.to=n,t.depth=e),a.push(t)}),o.push(a),o.concat(s)}function s(t){var e={};return x=0,Boolean(t.options)&&(e.options=m.cloneDeep(t.options)),Boolean(t.entities)&&(e.entities=m.cloneDeep(t.entities)),e.arcs=[],t&&t.arcs&&t.arcs.forEach(function(t){c(t,0).forEach(function(t){e.arcs.push(t)})}),e.depth=x+1,e}function l(t,e){return t.filter(function(t){return e.from!==t.name}).map(function(t){return e.to=t.name,m.cloneDeep(e)})}function f(t){if(t.entities&&t.arcs){var e=[],r={};t.arcs.forEach(function(n,o){n.filter(function(t){return"*"===t.to}).forEach(function(i,a){r=m.cloneDeep(i),delete t.arcs[o][a],e=l(t.entities,r),n[a]=e.shift(),t.arcs[o]=n.concat(e)})})}return t}var d=t("./asttransform"),h=t("./aggregatekind"),p=t("./normalizekind"),g=t("./normalizeoptions"),m=t("../../lib/lodash/lodash.custom"),b=t("../textutensils/escape"),x=0;return{swapRTLArc:o,unwind:s,explodeBroadcasts:f,flatten:function(t){return t.options=g(t.options),d.transform(s(t),[e,r],[o,a,r,n])},dotFlatten:function(t){return f(d.transform(t,[e],[o,a]))}}}),r("render/text/dotMappings",[],function(){"use strict";var t=Object.freeze({"->":"rvee","<->":"rvee","=>":"normal","<=>":"normal","-x":"oinvonormal"}),e=Object.freeze({box:"box",abox:"hexagon",rbox:"box",note:"note"}),r=Object.freeze({">>":"dashed","<<>>":"dashed","..":"dashed",":>":"bold","<:>":"bold","::":"bold",rbox:"rounded"});return{getArrow:function(e){return t[e]},getShape:function(t){return e[t]},getStyle:function(t){return r[t]}}}),r("render/text/ast2dot",["require","../textutensils/wrap","../astmassage/flatten","./dotMappings","../astmassage/aggregatekind","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){var e="/* Sequence chart represented as a directed graph\n * in the graphviz dot language (http://graphviz.org/)\n *\n * Generated by mscgen_js (https://sverweij.github.io/mscgen_js)\n */\n\ngraph {\n";return e+=v+"rankdir=LR\n",e+=v+"splines=true\n",e+=v+"ordering=out\n",e+=v+'fontname="Helvetica"\n',e+=v+'fontsize="9"\n',e+=v+'node [style=filled, fillcolor=white fontname="Helvetica", fontsize="9" ]\n',e+=v+'edge [fontname="Helvetica", fontsize="9", arrowhead=vee, arrowtail=vee, dir=forward]\n',e+="\n",t&&(t.entities&&(e+=s(t.entities)+"\n"),t.arcs&&(A=0,e+=g(t.arcs,""))),e+="}"}function r(t){var e=m.wrap(t.replace(/"/g,'\\"'),C),r=e.slice(0,-1).reduce(function(t,e){return t+e+"\n"},"");return r+=e.slice(-1)}function n(t,e){return e+'="'+r(t)+'"'}function o(t,e,r){Boolean(e)&&t.push(n(e,r))}function i(t){return["label","color","fontcolor","fillcolor"].filter(function(e){return Boolean(t[e])}).map(function(e){return n(t[e],e)})}function a(t){var e="";return t.length>0&&(e=t.slice(0,-1).reduce(function(t,e){return t+e+", "}," ["),e+=t.slice(-1)+"]"),e}function u(t){return'"'+t+'"'}function c(t){return u(t.name)+a(i(t))}function s(t){return t.reduce(function(t,e){return t+v+c(e)+";\n"},"")}function l(t,e){return t?"("+e+") "+t:"("+e+")"}function f(t,e,r){var n="",c="box"+e.toString();n+=c;var s=i(t);return o(s,x.getStyle(t.kind),"style"),o(s,x.getShape(t.kind),"shape"),n+=a(s)+"\n"+v+r,s=[],o(s,"dotted","style"),o(s,"none","dir"),n+=c+" -- {"+u(t.from)+","+u(t.to)+"}",n+=a(s)}function d(t,e,r){var n="";t.label=l(t.label,r);var c=i(t);switch(o(c,x.getStyle(t.kind),"style"),e){case"directional":o(c,x.getArrow(t.kind),"arrowhead");break;case"bidirectional":o(c,x.getArrow(t.kind),"arrowhead"),o(c,x.getArrow(t.kind),"arrowtail"),o(c,"both","dir");break;case"nondirectional":o(c,"none","dir")}return t.arcs||(n+=u(t.from)+" ",n+="--",n+=" "+u(t.to),n+=a(c)),n}function h(t,e,r){var n="",o=y.getAggregate(t.kind);return n+="box"===o?f(t,e,r):d(t,o,e)}function p(t,e){var r="";return t.from&&t.kind&&t.to&&(r+=v+e+h(t,++A,e)+"\n",t.arcs&&(r+=v+e+"subgraph cluster_"+A.toString()+"{",t.label&&(r+="\n"+v+e+' label="'+t.kind+": "+t.label+'" labeljust="l"\n'),r+=g(t.arcs,e+v),r+=v+e+"}\n")),r}function g(t,e){return t.reduce(function(t,r){return t+r.reduce(function(t,r){return t+p(r,e)},"")},"")}var m=t("../textutensils/wrap"),b=t("../astmassage/flatten"),x=t("./dotMappings"),y=t("../astmassage/aggregatekind"),w=t("../../lib/lodash/lodash.custom"),v="  ",C=40,A=0;return{render:function(t){return e(b.dotFlatten(w.cloneDeep(t)))}}}),r("render/text/ast2doxygen",["require","../astmassage/aggregatekind","../textutensils/escape","./ast2thing"],function(t){"use strict";function e(t){return"inline_expression"===i.getAggregate(t)?"--":t}function r(t){var e="";return t.name&&t.value&&(e+=t.name+'="'+a.escapeString(t.value)+'"'),e}function n(t){return!Boolean(t.value)||"string"!=typeof t.value||"auto"!==t.value.toLowerCase()}function o(){return""}var i=t("../astmassage/aggregatekind"),a=t("../textutensils/escape"),u=t("./ast2thing");return{render:function(t){return u.render(t,{renderCommentfn:o,renderAttributefn:r,optionIsValidfn:n,renderKindfn:e,supportedOptions:["hscale","width","arcgradient","wordwraparcs"],supportedEntityAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],supportedArcAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],program:{opener:" * \\msc\n",closer:" * \\endmsc"},option:{opener:" *   ",separator:",\n *   ",closer:";\n * \n"},entity:{opener:" *   ",separator:",\n *   ",closer:";\n * \n"},attribute:{opener:" [",separator:", ",closer:"]"},arcline:{opener:" *   ",separator:",\n *   ",closer:";\n"},inline:{opener:";\n",closer:" * #"}})}}}),r("render/graphics/svgelementfactory/domprimitives",[],function(){"use strict";function t(t,e,r){return Boolean(r)&&t.setAttribute(e,r),t}function e(t,e,r,n){return Boolean(n)&&t.setAttributeNS(e,r,n),t}function r(e,r){return r&&Object.keys(r).forEach(function(n){t(e,n,r[n])}),e}function n(t,r,n){return n&&Object.keys(n).forEach(function(o){e(t,r,o,n[o])}),t}function o(t,e){return r(u.createElementNS(a,t),e)}function i(t){return u.createTextNode(t)}var a="http://www.w3.org/2000/svg",u={};return{SVGNS:a,XLINKNS:"http://www.w3.org/1999/xlink",init:function(t){u=t},setAttribute:t,setAttributes:r,setAttributesNS:n,createElement:o,createTextNode:i}}),r("render/graphics/svgelementfactory/geometry",[],function(){"use strict";function t(t){return 360*t/(2*Math.PI)}return{getDiagonalAngle:function(e){return 0-t(Math.atan(e.height/e.width))}}}),r("render/graphics/svgelementfactory/round",[],function(){"use strict";return function(t,e){return e?Math.round(t*Math.pow(10,e),e)/Math.pow(10,e):Math.round(t)}}),r("render/graphics/svgelementfactory/svgprimitives",["require","./domprimitives","./geometry","../../../lib/lodash/lodash.custom","./round"],function(t){function e(t,e){return d(t,h).toString()+","+d(e,h).toString()+" "}function r(t,r,n){return t+e(r,n)}function n(t,e,r,n){return s.createElement("marker",{orient:r,id:t,class:e,viewBox:Boolean(n)?n:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}function o(t,e){var r=s.createElement("a");return s.setAttributesNS(r,s.XLINKNS,{"xlink:href":t,"xlink:title":t}),r.appendChild(e),r}function i(t,e){var r=s.createElement("tspan"),n=s.createTextNode(t);return r.appendChild(n),e?o(e,r):r}function a(t,e,r){var n=f.defaults(r,{class:null,url:null,id:null,idurl:null}),o=s.createElement("text",{x:d(e.x,h).toString(),y:d(e.y,h).toString(),class:n.class});if(o.appendChild(i(t,n.url)),n.id){var a=i(" ["+n.id+"]",n.idurl);a.setAttribute("style",p),o.appendChild(a)}return o}function u(t,e){var r=f.defaults(e,{class:null,style:null,color:null,bgColor:null});return c(s.createElement("path",{d:t,class:r.class,style:r.style}),r.color,r.bgColor)}function c(t,e,r){var n="";return r&&(n+="fill:"+r+";"),e&&(n+="stroke:"+e+";"),s.setAttribute(t,"style",n)}var s=t("./domprimitives"),l=t("./geometry"),f=t("../../../lib/lodash/lodash.custom"),d=t("./round"),h=2,p="vertical-align:text-top;";return p+="font-size:0.7em;text-anchor:start;",{init:function(t){s.init(t)},createSVG:function(t,e){return s.createElement("svg",{version:"1.1",id:t,class:e,xmlns:s.SVGNS,"xmlns:xlink":s.XLINKNS,width:"0",height:"0"})},updateSVG:function(t,e){s.setAttributes(t,e)},colorBox:c,createDesc:function(){return s.createElement("desc")},createDefs:function(){return s.createElement("defs")},createTSpan:i,createText:a,createDiagonalText:function(t,e,r){return s.setAttributes(a(t,{x:e.width/2,y:e.height/2},{class:r}),{transform:"rotate("+d(l.getDiagonalAngle(e),h).toString()+" "+d(e.width/2,h).toString()+" "+d(e.height/2,h).toString()+")"})},createSingleLine:function(t,e){return s.createElement("line",{x1:d(t.xFrom,h).toString(),y1:d(t.yFrom,h).toString(),x2:d(t.xTo,h).toString(),y2:d(t.yTo,h).toString(),class:e?e.class:null})},createRect:function(t,e){var r=f.defaults(e,{class:null,color:null,bgColor:null,rx:null,ry:null});return c(s.createElement("rect",{width:d(t.width,h),height:d(t.height,h),x:d(t.x,h),y:d(t.y,h),rx:d(r.rx,h),ry:d(r.ry,h),class:r.class}),r.color,r.bgColor)},createUTurn:function(t,n,o,i,a,c){var s=f.defaults(a,{dontHitHome:!1,lineWidth:1}),l=s.dontHitHome?t.x+7.5*a.lineWidth:t.x;return u(r("M",t.x,t.y-c/2)+r("C",t.x+o,t.y-7.5*a.lineWidth/2)+e(t.x+o,n+0)+e(l,n),{class:i})},createGroup:function(t,e){return s.createElement("g",{id:t,class:e})},createPath:u,createMarkerPath:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(u(e,{class:"arrow-style",style:"stroke-dasharray:100,1;stroke:"+r||"black"})),o},createMarkerPolygon:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(s.createElement("polygon",{points:e,class:"arrow-style",stroke:r||"black",fill:r||"black"})),o},createTitle:function(t){var e=s.createElement("title"),r=s.createTextNode(t);return e.appendChild(r),e},point2String:e,pathPoint2String:r}}),r("render/graphics/svgelementfactory/variationhelpers",[],function(){"use strict";function t(t,e,r){var n=0;return e.indexOf("nodi")<0&&e.indexOf("bidi")>-1&&(n=t.xTo>t.xFrom?7.5*r:-7.5*r),n}function e(t,e,r){var n=0;return e.indexOf("nodi")<0&&(n=t.xTo>t.xFrom?-7.5*r:7.5*r),n}function r(t){var e=Math.abs(t.xTo-t.xFrom),r=Math.abs(t.yTo-t.yFrom);return Math.sqrt(e*e+r*r)}function n(t,e){var n=r(t);return n>0?Math.floor(n/e):0}function o(t){var e=t.xTo>t.xFrom?1:-1;return{signX:e,signY:t.yTo>t.yFrom?1:-1,dy:e*(t.yTo-t.yFrom)/(t.xTo-t.xFrom)}}function i(t){return Math.round(2*Math.random()*t)-t}function a(t){return Math.round(100*t)/100}function u(t,e,u){if(e<=0)throw new Error("pInterval must be > 0");e=Math.min(r(t),e);for(var c=[],s=n(t,e),l=o(t),f=l.signX*Math.sqrt(Math.pow(e,2)/(1+Math.pow(l.dy,2))),d=l.signY*(Math.abs(l.dy)===1/0?e:Math.sqrt(Math.pow(l.dy,2)*Math.pow(e,2)/(1+Math.pow(l.dy,2)))),h={},p=1;p<=s;p++)h={controlX:a(t.xFrom+(p-.5)*f+i(u)),controlY:a(t.yFrom+(p-.5)*d+i(u)),x:a(t.xFrom+p*f),y:a(t.yFrom+p*d)},e>r({xFrom:h.x,yFrom:h.y,xTo:t.xTo,yTo:t.yTo})&&(h.x=t.xTo,h.y=t.yTo),c.push(h);return c}return{round:a,determineStartCorrection:t,determineEndCorrection:e,getDirection:o,getLineLength:r,getNumberOfSegments:n,getBetweenPoints:u}}),r("render/graphics/svgelementfactory/straight",["require","./svgprimitives","./variationhelpers","../../../lib/lodash/lodash.custom"],function(t){function e(t,e){var r=e.lineWidth||1,n=r,o=e?e.class:null,i=u.getDirection(t),c=u.determineEndCorrection(t,o,r),s=u.determineStartCorrection(t,o,r),l=(t.xTo-t.xFrom+c-s).toString(),f=(t.yTo-t.yFrom).toString(),d=a.pathPoint2String("l",i.signX,i.dy),h=a.pathPoint2String("l",l,f);return a.createPath(a.pathPoint2String("M",t.xFrom,t.yFrom-7.5*r*i.dy)+d+a.pathPoint2String("M",t.xFrom+s,t.yFrom-n)+h+a.pathPoint2String("M",t.xFrom+s,t.yFrom+n)+h+a.pathPoint2String("M",t.xTo-i.signX,t.yTo+7.5*r*i.dy)+d,e)}function r(t,e){var r=e?e.lineWidth||1:1,n=Math.max(9,Math.min(4.5*r,t.height/2)),o=n.toString(10);return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width-n,0)+a.pathPoint2String("l",0,o)+a.pathPoint2String("l",o,0)+a.pathPoint2String("m",-o,-o)+a.pathPoint2String("l",o,o)+a.pathPoint2String("l",0,t.height-n)+a.pathPoint2String("l",-t.width,0)+a.pathPoint2String("l",0,-t.height)+"z",e)}function n(t,e){return e.rx=6,e.ry=6,a.createRect(t,e)}function o(t,e){return a.createPath(a.pathPoint2String("M",t.x,t.y+t.height/2)+a.pathPoint2String("l",3,-t.height/2)+a.pathPoint2String("l",t.width-6,0)+a.pathPoint2String("l",3,t.height/2)+a.pathPoint2String("l",-3,t.height/2)+a.pathPoint2String("l",-(t.width-6),0)+"z",e)}function i(t,e){var r=e&&e.foldSize?e.foldSize:7,n=c.defaults(e,{class:null,color:null,bgColor:null});return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width,0)+a.pathPoint2String("l",0,t.height-r)+a.pathPoint2String("l",-r,r)+a.pathPoint2String("l",-(t.width-r),0),n)}var a=t("./svgprimitives"),u=t("./variationhelpers"),c=t("../../../lib/lodash/lodash.custom");return{createSingleLine:a.createSingleLine,createDoubleLine:e,createNote:r,createRect:a.createRect,createABox:o,createRBox:n,createEdgeRemark:i,createDesc:a.createDesc,createDefs:a.createDefs,createDiagonalText:a.createDiagonalText,createTSpan:a.createTSpan,createText:a.createText,createUTurn:a.createUTurn,createGroup:a.createGroup,createMarkerPath:a.createMarkerPath,createMarkerPolygon:a.createMarkerPolygon,createTitle:a.createTitle,createSVG:a.createSVG,updateSVG:a.updateSVG,init:a.init}}),r("render/graphics/svgelementfactory/wobbly",["require","./svgprimitives","./variationhelpers"],function(t){function e(t){return t.map(function(t){return d.pathPoint2String("S",t.controlX,t.controlY)+" "+d.point2String(t.x,t.y)}).join(" ")}function r(t,r){var n=h.getDirection(t);return d.createPath(d.pathPoint2String("M",t.xFrom,t.yFrom)+d.pathPoint2String("L",h.round(t.xFrom+n.signX*Math.sqrt(1/(1+Math.pow(n.dy,2)))),t.yFrom+n.signY*(Math.abs(n.dy)===1/0?1:h.round(Math.sqrt(Math.pow(n.dy,2)/(1+Math.pow(n.dy,2))))))+e(h.getBetweenPoints(t,p,g)),{class:r?r.class:null})}function n(t,r){return d.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+r},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},p,g))+d.pathPoint2String("L",t.x,t.y)+"z"}function o(t,r){return d.pathPoint2String("M",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y+r},p,g))+d.pathPoint2String("L",t.x+t.width-r,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+r},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+r)}function i(t,e){var r=e?e.lineWidth||1:1,i=Math.max(9,Math.min(4.5*r,t.height/2)),a=d.createGroup();return a.appendChild(d.createPath(n(t,i),e)),e.bgColor="transparent",a.appendChild(d.createPath(o(t,i),e)),a}function a(t){return Boolean(t.y)||(t.y=0),d.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},p,g))+"z"}function u(t,e){return d.createPath(a(t,e),e)}function c(t,r){return d.createPath(d.pathPoint2String("M",t.x,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height/2,xTo:t.x+3,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+3,t.y)+e(h.getBetweenPoints({xFrom:t.x+3,yFrom:t.y,xTo:t.x+t.width-3,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+t.width-3,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-3,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height/2},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height/2,xTo:t.x+t.width-3,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+t.width-3,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-3,yFrom:t.y+t.height,xTo:t.x+3,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+3,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+3,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height/2},p,g))+"z",r)}function s(t,r){return d.createPath(d.pathPoint2String("M",t.x,t.y+6)+e([{controlX:t.x,controlY:t.y,x:t.x+6,y:t.y}])+e(h.getBetweenPoints({xFrom:t.x+6,yFrom:t.y,xTo:t.x+t.width-6,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+t.width-6,t.y)+e([{controlX:t.x+t.width,controlY:t.y,x:t.x+t.width,y:t.y+6}])+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+6,xTo:t.x+t.width,yTo:t.y+t.height-6},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height-6)+e([{controlX:t.x+t.width,controlY:t.y+t.height,x:t.x+t.width-6,y:t.y+t.height}])+e(h.getBetweenPoints({xFrom:t.x+t.width-6,yFrom:t.y+t.height,xTo:t.x+6,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+6,t.y+t.height)+e([{controlX:t.x,controlY:t.y+t.height,x:t.x,y:t.y+t.height-6}])+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height-6,xTo:t.x,yTo:t.y+6},p,g))+"z",r)}function l(t,r){var n=r?r.lineWidth||1:1,o=d.createGroup(),i=r&&r.foldSize?r.foldSize:7,a=r&&r.color?r.color:"black";r.color="transparent!important";var u=d.createPath(d.pathPoint2String("M",t.x,t.y+n/2)+d.pathPoint2String("L",t.x+t.width,t.y+n/2)+d.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+d.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+d.pathPoint2String("L",t.x,t.y+t.height)+"z",r);r.bgColor="transparent",r.color=a;var c=d.createPath(d.pathPoint2String("M",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height-i},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height-i,xTo:t.x+t.width-i,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-i,yFrom:t.y+t.height,xTo:t.x-1,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x-1,t.y+t.height),r);return o.appendChild(u),o.appendChild(c),o}function f(t,r){var n=r.lineWidth||1,o=n,i=r?r.class:null,a=h.getDirection(t),u=h.determineEndCorrection(t,i,n),c=h.determineStartCorrection(t,i,n);return d.createPath(d.pathPoint2String("M",t.xFrom,t.yFrom-7.5*n*a.dy)+d.pathPoint2String("l",a.signX,a.dy)+d.pathPoint2String("M",t.xFrom+c,t.yFrom-o)+e(h.getBetweenPoints({xFrom:t.xFrom+c,yFrom:t.yFrom-o,xTo:t.xTo+u,yTo:t.yTo-o},p,g))+d.pathPoint2String("M",t.xFrom+c,t.yFrom+o)+e(h.getBetweenPoints({xFrom:t.xFrom+c,yFrom:t.yFrom+o,xTo:t.xTo+u,yTo:t.yTo+o},p,g))+d.pathPoint2String("M",t.xTo-a.signX,t.yTo+7.5*n*a.dy)+d.pathPoint2String("l",a.signX,a.dy),i)}var d=t("./svgprimitives"),h=t("./variationhelpers"),p=70,g=3;return{createSingleLine:r,createDoubleLine:f,createNote:i,createRect:u,createABox:c,createRBox:s,createEdgeRemark:l,createDesc:d.createDesc,createDefs:d.createDefs,createDiagonalText:d.createDiagonalText,createTSpan:d.createTSpan,createText:d.createText,createUTurn:d.createUTurn,createGroup:d.createGroup,createMarkerPath:d.createMarkerPath,createMarkerPolygon:d.createMarkerPolygon,createTitle:d.createTitle,createSVG:d.createSVG,updateSVG:d.updateSVG,init:d.init}}),r("render/graphics/svgelementfactory/index",["require","./straight","./wobbly","../../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){return Boolean(t)?"wobbly"===t?n:r:i}var r=t("./straight"),n=t("./wobbly"),o=t("../../../lib/lodash/lodash.custom"),i=r,a={};return{init:function(t,e){i.init(t),a=o.defaults(e,{LINE_WIDTH:2,FONT_SIZE:12})},createSVG:function(t,r,n){return i=e(n),i.createSVG(t,r)},updateSVG:i.updateSVG,createTitle:i.createTitle,createDesc:i.createDesc,createDefs:i.createDefs,createTSpan:i.createTSpan,createRect:function(t,e,r,n){return i.createRect(t,{class:e,color:r,bgColor:n})},createRBox:function(t,e,r,n){return i.createRBox(t,{class:e,color:r,bgColor:n})},createABox:function(t,e,r,n){return i.createABox(t,{class:e,color:r,bgColor:n})},createNote:function(t,e,r,n){return i.createNote(t,{class:e,color:r,bgColor:n,lineWidth:a.LINE_WIDTH})},createEdgeRemark:function(t,e,r,n,o){return i.createEdgeRemark(t,{class:e,color:r,bgColor:n,foldSize:o,lineWidth:a.LINE_WIDTH})},createText:i.createText,createDiagonalText:i.createDiagonalText,createLine:function(t,e){return Boolean(e)&&Boolean(e.doubleLine)?(e.lineWidth||(e.lineWidth=a.LINE_WIDTH),i.createDoubleLine(t,e)):i.createSingleLine(t,e)},createUTurn:function(t,e,r,n,o,u){return i.createUTurn(t,e,r,n,{dontHitHome:o,lineWidth:a.LINE_WIDTH},u)},createGroup:i.createGroup,createMarkerPath:i.createMarkerPath,createMarkerPolygon:i.createMarkerPolygon}}),r("render/graphics/idmanager",[],function(){"use strict";var t="mscgenjs";return{setPrefix:function(e){t="mscgenjs"+e},get:function(e){return t+(e||"")}}}),r("render/graphics/svgutensils",["require","./idmanager","./svgelementfactory/index","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){var e=c.createSVG(t,u.get());return l.body.appendChild(e),e}function r(t){var r=l.getElementById(f);r=r||e(f),r.appendChild(t);var n=t.getBBox();return r.removeChild(t),n}function n(t){return Math.abs(t.height)>1e5||Math.abs(t.width)>1e5?{height:0,width:0,x:0,y:0}:t}function o(t){return"function"==typeof t.getBBox?n(r(t)):{height:15,width:15,x:2,y:2}}function i(){return o(c.createText("ÁjyÎ9ƒ@💩",{x:0,y:0})).height}function a(t){u.setPrefix(t);var e=l.getElementById(u.get());if(Boolean(e)){var r=l.getElementById(t);r?r.removeChild(e):l.body.removeChild(e)}}var u=t("./idmanager"),c=t("./svgelementfactory/index"),s=t("../../lib/lodash/lodash.custom"),l={},f=u.get("bboxer");return{init:function(t){l=t},removeRenderedSVGFromElement:a,getBBox:o,calculateTextHeight:s.memoize(i),webkitNamespaceBugWorkaround:function(t){return t.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}),r("render/graphics/renderutensils",["require","../../lib/lodash/lodash.custom"],function(t){"use strict";var e=t("../../lib/lodash/lodash.custom");return{scaleCanvasToWidth:function(t,r){var n=e.cloneDeep(r);return n.scale=t/n.width,n.width*=n.scale,n.height*=n.scale,n.horizontaltransform*=n.scale,n.verticaltransform*=n.scale,n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n},determineDepthCorrection:function(t,e){return t?2*(t+1)*e*2:0},determineArcXTo:function(t,e,r){return"-x"===t?e+.75*(r-e):r}}}),r("render/graphics/constants",[],function(){"use strict";return{LINE_WIDTH:2,FONT_SIZE:12}}),
r("render/graphics/csstemplates",[],function(){"use strict";return Object.freeze({baseTemplate:"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>}.<%=id%> path, .<%=id%> rect{fill:none}.<%=id%> .label-text-background{fill:white;stroke:white;stroke-width:0}.<%=id%> .bglayer{fill:white;stroke:white;stroke-width:0}.<%=id%> line{}.<%=id%> .return, .<%=id%> .comment{stroke-dasharray:5,3}.<%=id%> .inline_expression_divider{stroke-dasharray:10,5}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle}.<%=id%> text.anchor-start{text-anchor:start}.<%=id%> .arrow-marker{overflow:visible}.<%=id%> .arrow-style{stroke-width:1}.<%=id%> .arcrow, .<%=id%> .arcrowomit, .<%=id%> .emphasised{stroke-linecap:butt}.<%=id%> .arcrowomit{stroke-dasharray:2,2}.<%=id%> .box, .<%=id%> .entity{fill:white;stroke-linejoin:round}.<%=id%> .inherit{stroke:inherit;color:inherit}.<%=id%> .inherit-fill{fill:inherit}.<%=id%> .watermark{font-size:48pt;font-weight:bold;opacity:0.14}",namedStyles:[Object.freeze({name:"basic",description:"Basic",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{text-decoration:underline;}"}),Object.freeze({name:"lazy",description:"Lazy",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{font-weight:bold;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"}),Object.freeze({name:"classic",description:"Classic",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{text-decoration:none}.<%=id%> .entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"}),Object.freeze({name:"fountainpen",description:"Fountain pen",experimental:!0,deprecated:!1,renderMagic:"wobbly",cssBefore:"@import 'https://fonts.googleapis.com/css?family=Gochi+Hand';",cssAfter:"svg.<%=id%>{font-family:'Gochi Hand', cursive;font-size:14px;stroke-opacity:0.4;stroke-linecap:round;background-color:transparent}.<%=id%> text{fill:rgba(0,0,128,0.7)}.<%=id%> marker polygon{fill:rgba(0,0,255,0.4);stroke-linejoin:round}.<%=id%> line, .<%=id%> path, .<%=id%> rect, .<%=id%> polygon{stroke:blue !important}.<%=id%> text.entity-text{font-weight:bold;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC;}.<%=id%> .label-text-background{opacity:0}"}),Object.freeze({name:"cygne",description:"Cygne (best with msgenny)",experimental:!0,deprecated:!0,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> line, .<%=id%> path{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> .entity,.<%=id%> .box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"}),Object.freeze({name:"pegasse",description:"Pégase (best with msgenny)",experimental:!1,deprecated:!0,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> line, .<%=id%> path{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> .entity,.<%=id%> .box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"}),Object.freeze({name:"grayscaled",description:"Grayscaled (not in IE or Safari)",experimental:!0,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"}),Object.freeze({name:"inverted",description:"Inverted (not in IE or Safari)",experimental:!0,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"}),Object.freeze({name:"noentityboxes",description:"No entity boxes",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> .entity{fill:none;stroke:none;}.<%=id%> text.entity-text{text-decoration:underline;}"})]})}),r("render/graphics/renderskeleton",["require","./svgelementfactory/index","./constants","./csstemplates"],function(t){"use strict";function e(t,e){return e.forEach(function(e){"method"===e.type?t.appendChild(p.createMarkerPolygon(e.name,e.path,e.color)):t.appendChild(p.createMarkerPath(e.name,e.path,e.color))}),t}function r(t,e){var r=b.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(b.createTextNode(h(t,e))),r}function n(t,n,o){var i=p.createDefs();return i.appendChild(r(o,t)),i=e(i,n)}function o(t){var e=p.createGroup(t+"_body");return e.appendChild(p.createGroup(t+"_background")),e.appendChild(p.createGroup(t+"_arcspans")),e.appendChild(p.createGroup(t+"_lifelines")),e.appendChild(p.createGroup(t+"_sequence")),e.appendChild(p.createGroup(t+"_notes")),e.appendChild(p.createGroup(t+"_watermark")),e}function i(t){return p.init(t.document,{LINE_WIDTH:g.LINE_WIDTH,FONT_SIZE:g.FONT_SIZE}),t.document}function a(t,e,r,a,c){b=i(t);var l=b.getElementById(e);null===l&&(l=b.body);var f=p.createSVG(r,r,s(c));return Boolean(c.source)&&f.appendChild(u(t,c.source)),f.appendChild(n(r,a,c)),f.appendChild(o(r)),l.appendChild(f),b}function u(t,e){var r=p.createDesc();return r.appendChild(t.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+e)),r}function c(t){var e=null,r=m.namedStyles.filter(function(e){return e.name===t});return r.length>0&&(e=r[0]),e}function s(t){var e="",r={};return Boolean(t)?(Boolean(t.additionalTemplate)&&(r=c(t.additionalTemplate),Boolean(r)&&(e=r.renderMagic)),e):""}function l(t,e){var r="",n={};return Boolean(t)?(Boolean(t.additionalTemplate)&&(n=c(t.additionalTemplate),Boolean(n)&&(r=n[e])),r):""}function f(t){var e=l(t,"cssAfter");return Boolean(t.styleAdditions)&&(e+=t.styleAdditions),e}function d(t){return l(t,"cssBefore")}function h(t,e){return(d(t)+m.baseTemplate+f(t)).replace(/<%=fontSize%>/g,g.FONT_SIZE).replace(/<%=lineWidth%>/g,g.LINE_WIDTH).replace(/<%=id%>/g,e)}var p=t("./svgelementfactory/index"),g=t("./constants"),m=t("./csstemplates"),b={};return{bootstrap:a,init:i}}),r("render/graphics/kind2class",[],function(){"use strict";var t=Object.freeze({"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"}),e=Object.freeze({"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"});return{getClass:function(e){return t[e]||e},getAggregateClass:function(t){return e[t]||t}}}),r("render/graphics/rowmemory",[],function(){"use strict";function t(t){return r[t]?r[t]:{y:n+1.5*o+t*o,height:o}}function e(){return t(r.length-1)}var r=[],n=0,o=0;return{clear:function(t,e){r=[],n=t,o=e},get:t,getByRealRowNumber:function(t){var n=r.filter(function(e){return e.realRowNumber===t});return n.length>0?n[0]:e()},getLast:e,set:function(e,n,o){var i=t(e-1);r[e]={y:i.y+(i.height+n)/2,height:n,realRowNumber:o}}}}),r("render/graphics/markermanager",["require","../../lib/lodash/lodash.custom","../astmassage/normalizekind"],function(t){"use strict";function e(t,e,r){return e&&r&&["<->","->"].indexOf(t)>-1?e<r?"signal":"signal-u":""}function r(t,e,r){return"<->"===t&&e<=r?"signal-l":"signal-lu"}function n(t,n,o,i,a){var u=[];return l[n]&&l[n].attributes&&(u=l[n].attributes.map(function(u){return{name:u.name,value:u.value.replace(/\{\{signal-marker-end\}\}/g,e(n,i,a)).replace(/\{\{signal-marker-start\}\}/g,r(n,i,a)).replace(/\{\{id\}\}/g,t).replace(/\{\{color\}\}/g,o||"black")}})),u}function o(t,e){return l[s.getNormalizedKind(t)].marker.name+(Boolean(e)?" "+e:" black")}function i(t,e){function r(e){i(t,e)}return Array.isArray(e)&&e.forEach(r),e.arcs&&e.arcs.forEach(r),e.kind&&l[s.getNormalizedKind(e.kind)]&&l[s.getNormalizedKind(e.kind)].marker&&t.indexOf(o(e.kind,e.linecolor))<0&&t.push(o(e.kind,e.linecolor)),t}function a(t){return{kind:t.split(" ")[0],color:t.split(" ")[1]}}function u(t){return t.arcs.reduce(i,[]).sort().map(a)}var c=t("../../lib/lodash/lodash.custom"),s=t("../astmassage/normalizekind"),l={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},f={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:n,getMarkerDefs:function(t,e){return c.flatten(u(e).map(function(e){return f[e.kind].variants.map(function(r){return{name:t+e.kind+r.name+"-"+e.color,path:r.path,color:e.color,type:e.kind}})}))}}}),r("render/graphics/renderlabels",["require","./svgelementfactory/index","./svgutensils","./constants","../textutensils/wrap","./kind2class","../astmassage/aggregatekind"],function(t){"use strict";function e(t,e){e&&t.setAttribute("style","fill:"+e+";")}function r(t,r,n){e(t,r&&!n?"blue":n)}function n(t,e){var r=l.createRect(f.getBBox(t),"label-text-background");return e&&r.setAttribute("style","fill:"+e+"; stroke:"+e+";"),r}function o(t,e,r,n,o,i){return 0===t?l.createText(e,{x:r,y:n},{class:o,url:i.url,id:i.id,idurl:i.idurl}):l.createText(e,{x:r,y:n},{class:o,url:i.url})}function i(t,e,r){var n=e||t,o=p.getClass(n),i=p.getAggregateClass(n);return o===i?o+r:i+r+o+r}function a(t,n,a,u,c,s){var l=a+(c+.25)*f.calculateTextHeight(),h=i(u.kind,s&&s.kind,"-text ");s&&(s.alignLeft&&(h+="anchor-start "),s.alignAround&&(l=a+(c+.25)*(f.calculateTextHeight()+d.LINE_WIDTH)));var p=o(c,t,n,l,h,u);return e(p,u.textcolor),r(p,u.url,u.textcolor),p}function u(t,e,r,o){var i=l.createGroup(o);if(t.label){var u=e.x+e.width/2,c=s(t.label,t.kind,e.width,d.FONT_SIZE,r),h={};r&&r.alignAbove&&c.forEach(function(){c.push("")});var p=e.y-(c.length-1)/2*(f.calculateTextHeight()+1);r&&r.alignAround&&(1===c.length&&c.push(""),p=e.y-(c.length-1)/2*(f.calculateTextHeight()+d.LINE_WIDTH+1)),c.forEach(function(e,o){""!==e&&(h=a(e,u,p,t,o,r),r&&r.ownBackground&&i.appendChild(n(h,t.textbgcolor)),i.appendChild(h)),p++})}return i}function c(t,e){var r=Math.abs(t);return r<=160?r/(e/12*8):r<=320?r/(e/12*6.4):r<=480?r/(e/12*5.9):r/(e/12*5.6)}function s(t,e,r,n,o){return"box"===g.getAggregate(e)&&o.wordwrapboxes||"entity"===e&&o.wordwrapentities||"box"!==g.getAggregate(e)&&"entity"!==e&&o.wordwraparcs||void 0===e?h.wrap(t,c(r,n)):t.split("\\n")}var l=t("./svgelementfactory/index"),f=t("./svgutensils"),d=t("./constants"),h=t("../textutensils/wrap"),p=t("./kind2class"),g=t("../astmassage/aggregatekind");return{createLabel:u,splitLabel:s}}),r("render/graphics/entities",["require","./renderlabels"],function(t){"use strict";function e(t){return o[t]}var r=t("./renderlabels"),n=Object.seal({interEntitySpacing:160,height:34,width:100}),o={};return{init:function(t){n.interEntitySpacing=160,n.height=34,n.width=100,t&&(n.interEntitySpacing=160*t,n.width=100*t),o={}},getX:e,setX:function(t,e){o[t.name]=e+n.width/2},getOAndD:function(t,r){return{from:e(e(t)<e(r)?t:r),to:e(e(r)>e(t)?r:t)}},setHeight:function(t){n.height=t},getDims:function(){return n},getNoEntityLines:function(t,e,o){return r.splitLabel(t,"entity",n.width,e,o).length}}}),r("render/graphics/renderast",["require","./svgelementfactory/index","./svgutensils","./renderutensils","./renderskeleton","../astmassage/flatten","./kind2class","../astmassage/aggregatekind","./rowmemory","./idmanager","./markermanager","./entities","./renderlabels","./constants","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t,e,r,a){var u=Object.freeze(W.flatten(t)),c=a||{};c=$.defaults(c,{source:null,styleAdditions:null,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle"}),n(u,e,r,c),o(u),i(u);var s=e.document.getElementById(r);return s?z.webkitNamespaceBugWorkaround(s.innerHTML):z.webkitNamespaceBugWorkaround(e.document.body.innerHTML)}function r(t){var e="middle";return["above","middle","below"].some(function(e){return e===t})&&(e=t),e}function n(t,e,n,o){X.setPrefix(n),et.document=R.bootstrap(e,n,X.get(),U.getMarkerDefs(X.get(),t),o),et.mirrorEntitiesOnBottom=Boolean(o.mirrorEntitiesOnBottom),et.regularArcTextVerticalAlignment=r(o.regularArcTextVerticalAlignment),z.init(et.document),et.layer=a(et.document),et.maxDepth=t.depth,c(et,t.options)}function o(t){x(t.entities,0,t.options),V.clear(K.getDims().height,et.arcRowHeight),k(t.arcs,t.entities,t.options),et.mirrorEntitiesOnBottom&&b(t.entities,t.options)}function i(t){var e=s(t);l(e),e=d(t.options,e),h(e)}function a(t){return{lifeline:t.getElementById(X.get("_lifelines")),sequence:t.getElementById(X.get("_sequence")),notes:t.getElementById(X.get("_notes")),inline:t.getElementById(X.get("_arcspans")),watermark:t.getElementById(X.get("_watermark"))}}function u(t,e){t.arcRowHeight=Q,t.arcGradient=tt,t.wordWrapArcs=!1,e&&(e.arcgradient&&(t.arcRowHeight=parseInt(e.arcgradient,10)+Q,t.arcGradient=parseInt(e.arcgradient,10)+tt),t.wordWrapArcs=Boolean(e.wordwraparcs))}function c(t,e){K.init(e&&e.hscale),u(t,e)}function s(t){var e=H.determineDepthCorrection(t.depth,Y.LINE_WIDTH),r=V.getLast(),n={width:t.entities.length*K.getDims().interEntitySpacing+e,height:Boolean(et.mirrorEntitiesOnBottom)?2*K.getDims().height+r.y+r.height+2*J:r.y+r.height/2+2*J,horizontaltransform:(K.getDims().interEntitySpacing+e-K.getDims().width)/2,autoscale:!!t.options&&!!t.options.width&&"auto"===t.options.width,verticaltransform:J,scale:1};return n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n}function l(t){et.document.getElementById(X.get("_background")).appendChild(N.createRect(t,"bglayer"))}function f(t,e){et.layer.watermark.appendChild(N.createDiagonalText(t,e,"watermark"))}function d(t,e){return t&&(t.watermark&&f(t.watermark,e),t.width&&"auto"!==t.width&&(e=H.scaleCanvasToWidth(t.width,e))),e}function h(t){var e=et.document.getElementById(X.get());et.document.getElementById(X.get("_body")).setAttribute("transform","translate("+t.horizontaltransform+","+t.verticaltransform+") scale("+t.scale+","+t.scale+")"),t.autoscale&&!0===t.autoscale?N.updateSVG(e,{width:"100%",height:"100%",viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()}):N.updateSVG(e,{width:t.width.toString(),height:t.height.toString(),viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()})}function p(t,e){var r=t[0],n=2;return t.forEach(function(t){var o=K.getNoEntityLines(t.label,Y.FONT_SIZE,e);o>n&&(n=o,r=t)}),n>2?Math.max(K.getDims().height,z.getBBox(m(r,0,0,e)).height):K.getDims().height}function g(t,e){var r=Math.min(z.getBBox(t).width+4*Y.LINE_WIDTH,e.interEntitySpacing/3+e.width);return r>=e.width&&(e.x-=(r-e.width)/2,e.width=r),e}function m(t,e,r,n){var o=N.createGroup(),i=$.cloneDeep(K.getDims());i.x=e||0,i.y=r||0;var a=Z.createLabel($.defaults(t,{kind:"entity"}),{x:i.x,y:r+i.height/2,width:i.width},n);return o.appendChild(N.createRect(g(a,i),"entity",t.linecolor,t.textbgcolor)),o.appendChild(a),o}function b(t,e){var r=V.getLast().y+(V.getLast().height+et.arcRowHeight)/2;S(t,"arcrow",null,r).forEach(function(t){et.layer.lifeline.appendChild(t)}),x(t,r+et.arcRowHeight/2,e)}function x(t,e,r){var n=0,o=N.createGroup();t&&(K.setHeight(p(t,r)+2*Y.LINE_WIDTH),t.forEach(function(t){o.appendChild(m(t,n,e,r)),K.setX(t,n),n+=K.getDims().interEntitySpacing}),et.layer.sequence.appendChild(o)),et.arcEndX=n-K.getDims().interEntitySpacing+K.getDims().width}function y(t,e,r,n,o){var i=0,a=t.label,u=K.getX(t.from);t.label="",e.forEach(function(e){var a={};e.name!==t.from&&(i=K.getX(e.name),a=j(t,u,i,n,o),r.push({layer:et.layer.sequence,element:a}))}),t.label=a}function w(t,e,r,n,o){var i={};return t.from&&t.to&&("*"===t.to?(y(t,e,r,n,o),i=Z.createLabel(t,{x:0,y:V.get(n).y,width:et.arcEndX},$.defaults($.cloneDeep(o),{alignAround:!0,ownBackground:!0})),r.push({title:t.title,layer:et.layer.sequence,element:i})):(i=j(t,K.getX(t.from),K.getX(t.to),n,o),r.push({title:t.title,layer:et.layer.sequence,element:i}))),i}function v(t,e,r,n){var o=0;return t.forEach(function(t){var e={};switch(q.getAggregate(t.kind)){case"emptyarc":e=P(t,0);break;case"box":e=M(K.getOAndD(t.from,t.to),t,0,n);break;case"inline_expression":e=L(t,0);break;default:var i=$.cloneDeep(t);i.arcskip=0,e=w(i,r,[],0,n)}o=Math.max(o,z.getBBox(e).height+2*Y.LINE_WIDTH)}),o}function C(t,e,r,n){var o="arcrow",i=[];t.forEach(function(t){var a={};switch(q.getAggregate(t.kind)){case"emptyarc":a=P(t,V.get(e).y),"..."===t.kind&&(o="arcrowomit"),i.push({layer:et.layer.sequence,element:a});break;case"box":a=M(K.getOAndD(t.from,t.to),t,V.get(e).y,n),i.push({title:t.title,layer:et.layer.notes,element:a});break;case"inline_expression":a=L(t,V.get(e).y),i.push({layer:et.layer.notes,element:a}),rt.push({arc:t,rownum:e});break;default:a=w(t,r,i,e,n)}}),S(r,o,V.get(e).height,V.get(e).y).forEach(function(t){et.layer.lifeline.appendChild(t)}),i.forEach(function(t){t.element&&(t.title&&t.element.appendChild(N.createTitle(t.title)),t.layer.appendChild(t.element))})}function A(t,e,r){var n=0;t.forEach(function(t,o){function i(t){return t.isVirtual}t.every(i)?V.set(o,Math.max(V.get(o).height,v(t,o,e,r))):(V.set(o,Math.max(V.get(o).height,v(t,o,e,r)),n),n++)})}function k(t,e,r){rt=[],S(e,"arcrow",null,V.get(-1).y).forEach(function(t){et.layer.lifeline.appendChild(t)}),t&&(A(t,e,r),t.forEach(function(t,n){C(t,n,e,r)}),T(rt))}function L(t,e){var r=K.getOAndD(t.from,t.to),n=e>0,o=2*et.maxDepth*Y.LINE_WIDTH,i=r.to-r.from+(K.getDims().interEntitySpacing-2*Y.LINE_WIDTH)-7-Y.LINE_WIDTH,a=r.from-(K.getDims().interEntitySpacing-3*Y.LINE_WIDTH-o)/2-2*(et.maxDepth-t.depth)*Y.LINE_WIDTH,u=N.createGroup();n||(t.label=t.kind+(t.label?": "+t.label:""));var c=Z.createLabel(t,{x:a+Y.LINE_WIDTH-i/2,y:e+et.arcRowHeight/4,width:i},{alignLeft:!0,ownBackground:!1,wordwraparcs:et.wordWrapArcs}),s=z.getBBox(c),l=Math.max(s.height+2*Y.LINE_WIDTH,et.arcRowHeight/2-2*Y.LINE_WIDTH),f=Math.min(s.width+2*Y.LINE_WIDTH,i),d=N.createEdgeRemark({width:f-Y.LINE_WIDTH+7,height:l,x:a,y:e},"box inline_expression_label",t.linecolor,t.textbgcolor,7);return u.appendChild(d),u.appendChild(c),u}function T(t){t.forEach(function(t){et.layer.inline.appendChild(_(t,V.get(t.rownum).y))})}function _(t,e){var r=V.get(t.rownum).y,n=V.get(t.rownum+t.arc.numberofrows+1).y,o=n-r;return t.arc.label="",O(K.getOAndD(t.arc.from,t.arc.to),t.arc,o,e)}function S(t,e,r,n){return(!r||r<et.arcRowHeight)&&(r=et.arcRowHeight),t.map(function(t){var o=N.createLine({xFrom:K.getX(t.name),yFrom:0-r/2+(n||0),xTo:K.getX(t.name),yTo:r/2+(n||0)},{class:e});return t.linecolor&&o.setAttribute("style","stroke:"+t.linecolor+";"),o})}function E(t,e,r,n,o,i){var a=et.arcRowHeight/5*2,u=K.getDims().interEntitySpacing/2,c={},s="arc "+G.getAggregateClass(t)+" "+G.getClass(t);if(n){c=N.createGroup();var l=N.createUTurn({x:e,y:i},i+r+a-2*Y.LINE_WIDTH,u-2*Y.LINE_WIDTH,s,"::"!==t,a),f=N.createUTurn({x:e,y:i},i+r+a-Y.LINE_WIDTH,u,null,null,a),d=N.createUTurn({x:e,y:i},i+r+a,u,s,"::"!==t,a);Boolean(o)&&l.setAttribute("style","stroke:"+o),U.getAttributes(X.get(),t,o,e,e).forEach(function(t){f.setAttribute(t.name,t.value)}),f.setAttribute("style","stroke:transparent;"),Boolean(o)&&d.setAttribute("style","stroke:"+o),c.appendChild(l),c.appendChild(d),c.appendChild(f),c.setAttribute("class",s)}else c=N.createUTurn({x:e,y:i},i+r+a,u,s,"-x"===t,a),U.getAttributes(X.get(),t,o,e,e).forEach(function(t){c.setAttribute(t.name,t.value)});return c}function P(t,e){return"---"===t.kind?I(t,K.getOAndD(t.from,t.to),e):D(t,K.getOAndD(t.from,t.to),e)}function F(t,e,r){var n=V.get(t).y+r;if(Boolean(e)){var o=Math.floor(e),i=e-o,a=V.get(t).realRowNumber;n=V.getByRealRowNumber(a+o).y+i*(V.getByRealRowNumber(a+o+1).y-V.getByRealRowNumber(a+o).y)}return n}function B(t){return"<:>"===t?"bidi ":"::"===t?"nodi ":""}function j(t,e,r,n,o){var i=N.createGroup(),a="arc ";a+=B(t.kind),a+=G.getAggregateClass(t.kind)+" "+G.getClass(t.kind);var u=[":>","::","<:>"].indexOf(t.kind)>-1,c=F(n,t.arcskip,et.arcGradient);if(r=H.determineArcXTo(t.kind,e,r),e===r){i.appendChild(E(t.kind,e,c-V.get(n).y-et.arcGradient,u,t.linecolor,V.get(n).y));var s=2*K.getDims().interEntitySpacing/3;i.appendChild(Z.createLabel(t,{x:e+1.5*Y.LINE_WIDTH-s/2,y:V.get(n).y-et.arcRowHeight/5-Y.LINE_WIDTH/2,width:s},$.defaults($.cloneDeep(o),{alignLeft:!0,alignAbove:!0,ownBackground:!0})))}else{var l=N.createLine({xFrom:e,yFrom:V.get(n).y,xTo:r,yTo:c},{class:a,doubleLine:u});U.getAttributes(X.get(),t.kind,t.linecolor,e,r).forEach(function(t){l.setAttribute(t.name,t.value)}),i.appendChild(l),i.appendChild(Z.createLabel(t,{x:e,y:V.get(n).y+(c-V.get(n).y)/2,width:r-e},$.defaults($.cloneDeep(o),{alignAround:!0,alignAbove:"above"===et.regularArcTextVerticalAlignment,ownBackground:!0})))}return i}function D(t,e,r){var n=0,o=et.arcEndX;return t.from&&t.to&&(n=e.from,o=e.to-e.from),Z.createLabel(t,{x:n,y:r,width:o},{ownBackground:!0,wordwraparcs:et.wordWrapArcs})}function I(t,e,r){var n=0,o=et.arcEndX,i="comment",a=N.createGroup();if(t.from&&t.to){var u=1*et.maxDepth*Y.LINE_WIDTH,c=2*(et.maxDepth-t.depth)*Y.LINE_WIDTH;n=e.from-(K.getDims().interEntitySpacing+2*Y.LINE_WIDTH)/2-(c-u),o=e.to+(K.getDims().interEntitySpacing+2*Y.LINE_WIDTH)/2+(c-u),i="inline_expression_divider"}var s=N.createLine({xFrom:n,yFrom:r,xTo:o,yTo:r},{class:i});return a.appendChild(s),a.appendChild(D(t,e,r)),t.linecolor&&s.setAttribute("style","stroke:"+t.linecolor+";"),a}function O(t,e,r,n){var o=2*et.maxDepth*Y.LINE_WIDTH,i=t.to-t.from+K.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o,a=t.from-(K.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o)/2,u=2*(et.maxDepth-e.depth)*Y.LINE_WIDTH;return N.createRect({width:i+2*u,height:r||et.arcRowHeight-2*Y.LINE_WIDTH,x:a-u,y:n},"box inline_expression "+e.kind,e.linecolor,e.textbgcolor)}function M(t,e,r,n){var o=2*et.maxDepth*Y.LINE_WIDTH,i=t.to-t.from+K.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o,a=t.from-(K.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o)/2,u=N.createGroup(),c={},s=Z.createLabel(e,{x:a,y:r,width:i},n),l=z.getBBox(s),f=Math.max(l.height+2*Y.LINE_WIDTH,et.arcRowHeight-2*Y.LINE_WIDTH),d={width:i,height:f,x:a,y:r-f/2};switch(e.kind){case"rbox":c=N.createRBox(d,"box rbox",e.linecolor,e.textbgcolor);break;case"abox":c=N.createABox(d,"box abox",e.linecolor,e.textbgcolor);break;case"note":c=N.createNote(d,"box note",e.linecolor,e.textbgcolor);break;default:c=N.createRect(d,"box",e.linecolor,e.textbgcolor)}return u.appendChild(c),u.appendChild(s),u}var N=t("./svgelementfactory/index"),z=t("./svgutensils"),H=t("./renderutensils"),R=t("./renderskeleton"),W=t("../astmassage/flatten"),G=t("./kind2class"),q=t("../astmassage/aggregatekind"),V=t("./rowmemory"),X=t("./idmanager"),U=t("./markermanager"),K=t("./entities"),Z=t("./renderlabels"),Y=t("./constants"),$=t("../../lib/lodash/lodash.custom"),J=3,Q=38,tt=0,et=Object.seal({arcRowHeight:Q,arcGradient:tt,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle",maxDepth:0,document:{},layer:{lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),rt=[];return{clean:function(t,e){et.document=R.init(e),z.init(et.document),z.removeRenderedSVGFromElement(t)},renderAST:function(t,r,n,o,i){return e(t,o,n,{source:r,styleAdditions:i})},renderASTNew:e}}),r("main/static-resolver",["require","../parse/mscgenparser","../parse/xuparser","../parse/msgennyparser","../render/text/ast2mscgen","../render/text/ast2xu","../render/text/ast2msgenny","../render/text/ast2dot","../render/text/ast2doxygen","../render/graphics/renderast"],function(t){"use strict";var e=t("../parse/mscgenparser"),r=t("../parse/xuparser"),n=t("../parse/msgennyparser"),o=t("../render/text/ast2mscgen"),i=t("../render/text/ast2xu"),a=t("../render/text/ast2msgenny"),u=t("../render/text/ast2dot"),c=t("../render/text/ast2doxygen"),s=t("../render/graphics/renderast"),l=e,f=o,d=Object.freeze({mscgen:e,xu:r,msgenny:n}),h=Object.freeze({mscgen:o,msgenny:a,xu:i,dot:u,doxygen:c});return{getParser:function(t){return["ast","json"].indexOf(t)>-1?JSON:d[t]||l},getGraphicsRenderer:function(){return s},getTextRenderer:function(t){return h[t]||f}}}),r("main/index",["require","../lib/lodash/lodash.custom","../render/graphics/csstemplates"],function(t){function e(t,e){return"json"===e&&"object"==typeof t}function r(t,r,n){return e(t,r)?t:n(r).parse(t)}function n(t,e,r){Boolean(t)&&(Boolean(e)?t(e,null):t(null,r))}var o=t("../lib/lodash/lodash.custom"),i=t("../render/graphics/csstemplates");return{renderMsc:function(t,e,i,a,u){var c=e||{};o.defaults(c,{inputType:"mscgen",elementId:"__svg",window:e.window||window,includeSource:!0,styleAdditions:null,additionalTemplate:null,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle"});try{n(i,null,u().renderASTNew(r(t,c.inputType,a),c.window,c.elementId,{source:c.includeSource?t:null,styleAdditions:c.styleAdditions,additionalTemplate:c.additionalTemplate,mirrorEntitiesOnBottom:c.mirrorEntitiesOnBottom,regularArcTextVerticalAlignment:c.regularArcTextVerticalAlignment}))}catch(t){n(i,t)}},translateMsc:function(t,e,i,a,u){var c=e||{};o.defaults(c,{inputType:"mscgen",outputType:"json"});try{n(i,null,"json"===c.outputType?JSON.stringify(a(c.inputType).parse(t),null,"  "):u(c.outputType).render(r(t,c.inputType,a)))}catch(t){n(i,t)}},version:"1.12.8",getAllowedValues:function(){return Object.freeze({inputType:[{name:"mscgen",experimental:!1},{name:"msgenny",experimental:!1},{name:"xu",experimental:!1},{name:"json",experimental:!1},{name:"ast",experimental:!1}],outputType:[{name:"mscgen",experimental:!1},{name:"msgenny",experimental:!1},{name:"xu",experimental:!1},{name:"json",experimental:!1},{name:"ast",experimental:!1},{name:"dot",experimental:!1},{name:"doxygen",experimental:!1}],regularArcTextVerticalAlignment:[{name:"above",experimental:!0},{name:"middle",experimental:!1},{name:"below",experimental:!0}],namedStyle:i.namedStyles.map(function(t){return{name:t.name,description:t.description,experimental:t.experimental,deprecated:t.deprecated}})})}}}),r("index",["require","./main/static-resolver","./main/index"],function(t){"use strict";var e=t("./main/static-resolver"),r=t("./main/index");return{renderMsc:function(t,n,o){r.renderMsc(t,n,o,e.getParser,e.getGraphicsRenderer)},translateMsc:function(t,n,o){r.translateMsc(t,n,o,e.getParser,e.getTextRenderer)},version:r.version,getAllowedValues:r.getAllowedValues,getParser:e.getParser,getGraphicsRenderer:e.getGraphicsRenderer,getTextRenderer:e.getTextRenderer}}),e("index")});