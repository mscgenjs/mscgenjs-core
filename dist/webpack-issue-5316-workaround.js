/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="umd" include="memoize,cloneDeep,flatten,defaults,assign" --development --output lib/lodash/lodash.custom.js`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

!function(t,e){"function"==typeof define&&define.amd?define([],e):t.mscgen=e()}(this,function(){var t,e,r;return function(n){function o(t,e){return w.call(t,e)}function i(t,e){var r,n,o,i,a,s,u,c,l,f,d,h,p=e&&e.split("/"),g=y.map,m=g&&g["*"]||{};if(t){for(t=t.split("/"),a=t.length-1,y.nodeIdCompat&&A.test(t[a])&&(t[a]=t[a].replace(A,"")),"."===t[0].charAt(0)&&p&&(h=p.slice(0,p.length-1),t=h.concat(t)),l=0;l<t.length;l++)if("."===(d=t[l]))t.splice(l,1),l-=1;else if(".."===d){if(0===l||1===l&&".."===t[2]||".."===t[l-1])continue;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}if((p||m)&&g){for(r=t.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),p)for(f=p.length;f>0;f-=1)if((o=g[p.slice(0,f).join("/")])&&(o=o[n])){i=o,s=l;break}if(i)break;!u&&m&&m[n]&&(u=m[n],c=l)}!i&&u&&(i=u,s=c),i&&(r.splice(0,s,i),t=r.join("/"))}return t}function a(t,e){return function(){var r=C.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),p.apply(n,r.concat([t,e]))}}function s(t){return function(e){return i(e,t)}}function u(t){return function(e){b[t]=e}}function c(t){if(o(x,t)){var e=x[t];delete x[t],v[t]=!0,h.apply(n,e)}if(!o(b,t)&&!o(v,t))throw new Error("No "+t);return b[t]}function l(t){var e,r=t?t.indexOf("!"):-1;return r>-1&&(e=t.substring(0,r),t=t.substring(r+1,t.length)),[e,t]}function f(t){return t?l(t):[]}function d(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,p,g,m,b={},x={},y={},v={},w=Object.prototype.hasOwnProperty,C=[].slice,A=/\.js$/;g=function(t,e){var r,n=l(t),o=n[0],a=e[1];return t=n[1],o&&(o=i(o,a),r=c(o)),o?t=r&&r.normalize?r.normalize(t,s(a)):i(t,a):(t=i(t,a),n=l(t),o=n[0],t=n[1],o&&(r=c(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:r}},m={require:function(t){return a(t)},exports:function(t){var e=b[t];return void 0!==e?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:d(t)}}},h=function(t,e,r,i){var s,l,d,h,p,y,w,C=[],A=typeof r;if(i=i||t,y=f(i),"undefined"===A||"function"===A){for(e=!e.length&&r.length?["require","exports","module"]:e,p=0;p<e.length;p+=1)if(h=g(e[p],y),"require"===(l=h.f))C[p]=m.require(t);else if("exports"===l)C[p]=m.exports(t),w=!0;else if("module"===l)s=C[p]=m.module(t);else if(o(b,l)||o(x,l)||o(v,l))C[p]=c(l);else{if(!h.p)throw new Error(t+" missing "+l);h.p.load(h.n,a(i,!0),u(l),{}),C[p]=b[l]}d=r?r.apply(b[t],C):void 0,t&&(s&&s.exports!==n&&s.exports!==b[t]?b[t]=s.exports:d===n&&w||(b[t]=d))}else t&&(b[t]=r)},t=e=p=function(t,e,r,o,i){if("string"==typeof t)return m[t]?m[t](e):c(g(t,f(e)).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),!e)return;e.splice?(t=e,e=r,r=null):t=n}return e=e||function(){},"function"==typeof r&&(r=o,o=i),o?h(n,t,e,r):setTimeout(function(){h(n,t,e,r)},4),p},p.config=function(t){return p(t)},t._defined=b,r=function(t,e,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(r=e,e=[]),o(b,t)||o(x,t)||(x[t]=[t,e,r])},r.amd={jQuery:!0}}(),r("node_modules/almond/almond",function(){}),function(t,e){"function"==typeof r&&r.amd?r("parse/mscgenparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(0,function(){"use strict";function t(e,r,n,o){this.message=e,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(r,n){function o(){return l(ro,eo)}function i(t,e){throw e=void 0!==e?e:l(ro,eo),d(t,e)}function a(t,e){return{type:"literal",text:t,ignoreCase:e}}function s(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function u(t){return{type:"other",description:t}}function c(t){var e,n=no[t];if(n)return n;for(e=t-1;!no[e];)e--;for(n=no[e],n={line:n.line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return no[t]=n,n}function l(t,e){var r=c(t),n=c(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function f(t){eo<oo||(eo>oo&&(oo=eo,io=[]),io.push(t))}function d(e,r){return new t(e,null,null,r)}function h(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function p(){var t,e,n,o,i,a,s,u,c,l;return t=eo,e=$(),e!==ut?(n=g(),n!==ut?(o=$(),o!==ut?(123===r.charCodeAt(eo)?(i=ft,eo++):(i=ut,0===ao&&f(dt)),i!==ut?(a=$(),a!==ut?(s=m(),s!==ut?(u=$(),u!==ut?(125===r.charCodeAt(eo)?(c=ht,eo++):(c=ut,0===ao&&f(pt)),c!==ut?(l=$(),l!==ut?(ro=t,e=gt(e,s),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t}function g(){var t;return r.substr(eo,3).toLowerCase()===mt?(t=r.substr(eo,3),eo+=3):(t=ut,0===ao&&f(bt)),t}function m(){var t,e,r,n;return t=eo,e=b(),e===ut&&(e=null),e!==ut?(r=y(),r===ut&&(r=null),r!==ut?(n=w(),n===ut&&(n=null),n!==ut?(ro=t,e=xt(e,r,n),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t}function b(){var t,e,n,o,i,a;for(t=eo,e=eo,n=[],o=eo,i=x(),i!==ut?(44===r.charCodeAt(eo)?(a=yt,eo++):(a=ut,0===ao&&f(vt)),a!==ut?(ro=o,i=wt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut);o!==ut;)n.push(o),o=eo,i=x(),i!==ut?(44===r.charCodeAt(eo)?(a=yt,eo++):(a=ut,0===ao&&f(vt)),a!==ut?(ro=o,i=wt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut);return n!==ut?(o=eo,i=x(),i!==ut?(59===r.charCodeAt(eo)?(a=Ct,eo++):(a=ut,0===ao&&f(At)),a!==ut?(ro=o,i=wt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut),o!==ut?(n=[n,o],e=n):(eo=e,e=ut)):(eo=e,e=ut),e!==ut&&(ro=t,e=kt(e)),t=e}function x(){var t,e,n,o,i,a,s,u;return ao++,t=eo,e=$(),e!==ut?(r.substr(eo,6).toLowerCase()===Lt?(n=r.substr(eo,6),eo+=6):(n=ut,0===ao&&f(_t)),n===ut&&(r.substr(eo,5).toLowerCase()===St?(n=r.substr(eo,5),eo+=5):(n=ut,0===ao&&f(Et)),n===ut&&(r.substr(eo,11).toLowerCase()===Bt?(n=r.substr(eo,11),eo+=11):(n=ut,0===ao&&f(Ft)))),n!==ut?(o=$(),o!==ut?(61===r.charCodeAt(eo)?(i=jt,eo++):(i=ut,0===ao&&f(Pt)),i!==ut?(a=$(),a!==ut?(s=J(),s!==ut?(u=$(),u!==ut?(ro=t,e=Dt(n,s),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t===ut&&(t=eo,e=$(),e!==ut?(r.substr(eo,12).toLowerCase()===It?(n=r.substr(eo,12),eo+=12):(n=ut,0===ao&&f(Mt)),n!==ut?(o=$(),o!==ut?(61===r.charCodeAt(eo)?(i=jt,eo++):(i=ut,0===ao&&f(Pt)),i!==ut?(a=$(),a!==ut?(s=nt(),s!==ut?(u=$(),u!==ut?(ro=t,e=Ot(n,s),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)),ao--,t===ut&&(e=ut,0===ao&&f(Tt)),t}function y(){var t,e,n,o,i,a;for(t=eo,e=eo,n=[],o=eo,i=v(),i!==ut?(44===r.charCodeAt(eo)?(a=yt,eo++):(a=ut,0===ao&&f(vt)),a!==ut?(ro=o,i=Nt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut);o!==ut;)n.push(o),o=eo,i=v(),i!==ut?(44===r.charCodeAt(eo)?(a=yt,eo++):(a=ut,0===ao&&f(vt)),a!==ut?(ro=o,i=Nt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut);return n!==ut?(o=eo,i=v(),i!==ut?(59===r.charCodeAt(eo)?(a=Ct,eo++):(a=ut,0===ao&&f(At)),a!==ut?(ro=o,i=Nt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut),o!==ut?(n=[n,o],e=n):(eo=e,e=ut)):(eo=e,e=ut),e!==ut&&(ro=t,e=zt(e)),t=e}function v(){var t,e,n,o,i,a,s,u;return ao++,t=eo,e=$(),e!==ut?(n=O(),n!==ut?(o=$(),o!==ut?(i=eo,91===r.charCodeAt(eo)?(a=Rt,eo++):(a=ut,0===ao&&f(Wt)),a!==ut?(s=D(),s!==ut?(93===r.charCodeAt(eo)?(u=Gt,eo++):(u=ut,0===ao&&f(qt)),u!==ut?(ro=i,a=Vt(n,s),i=a):(eo=i,i=ut)):(eo=i,i=ut)):(eo=i,i=ut),i===ut&&(i=null),i!==ut?(a=$(),a!==ut?(ro=t,e=Xt(n,i),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t===ut&&(t=eo,e=$(),e!==ut?(n=H(),n!==ut?(o=$(),o!==ut?(i=eo,91===r.charCodeAt(eo)?(a=Rt,eo++):(a=ut,0===ao&&f(Wt)),a!==ut?(s=D(),s!==ut?(93===r.charCodeAt(eo)?(u=Gt,eo++):(u=ut,0===ao&&f(qt)),u!==ut?(ro=i,a=Vt(n,s),i=a):(eo=i,i=ut)):(eo=i,i=ut)):(eo=i,i=ut),i===ut&&(i=null),i!==ut?(a=$(),a!==ut?(ro=t,e=Ut(n,i),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)),ao--,t===ut&&(e=ut,0===ao&&f(Ht)),t}function w(){var t,e,n,o,i;if(t=[],e=eo,n=C(),n!==ut?(o=$(),o!==ut?(59===r.charCodeAt(eo)?(i=Ct,eo++):(i=ut,0===ao&&f(At)),i!==ut?(ro=e,n=Kt(n),e=n):(eo=e,e=ut)):(eo=e,e=ut)):(eo=e,e=ut),e!==ut)for(;e!==ut;)t.push(e),e=eo,n=C(),n!==ut?(o=$(),o!==ut?(59===r.charCodeAt(eo)?(i=Ct,eo++):(i=ut,0===ao&&f(At)),i!==ut?(ro=e,n=Kt(n),e=n):(eo=e,e=ut)):(eo=e,e=ut)):(eo=e,e=ut);else t=ut;return t}function C(){var t,e,n,o,i,a,s;for(t=eo,e=eo,n=[],o=eo,i=A(),i!==ut?(a=$(),a!==ut?(44===r.charCodeAt(eo)?(s=yt,eo++):(s=ut,0===ao&&f(vt)),s!==ut?(ro=o,i=Kt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut)):(eo=o,o=ut);o!==ut;)n.push(o),o=eo,i=A(),i!==ut?(a=$(),a!==ut?(44===r.charCodeAt(eo)?(s=yt,eo++):(s=ut,0===ao&&f(vt)),s!==ut?(ro=o,i=Kt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut)):(eo=o,o=ut);return n!==ut?(o=eo,i=A(),i!==ut&&(ro=o,i=Kt(i)),o=i,o!==ut?(n=[n,o],e=n):(eo=e,e=ut)):(eo=e,e=ut),e!==ut&&(ro=t,e=Zt(e)),t=e}function A(){var t,e,n,o,i,a;return t=eo,e=eo,n=k(),n!==ut&&(ro=e,n=Kt(n)),e=n,e===ut&&(e=eo,n=L(),n!==ut&&(ro=e,n=Kt(n)),(e=n)===ut&&(e=eo,n=T(),n!==ut&&(ro=e,n=Kt(n)),e=n)),e!==ut?(n=eo,91===r.charCodeAt(eo)?(o=Rt,eo++):(o=ut,0===ao&&f(Wt)),o!==ut?(i=D(),i!==ut?(93===r.charCodeAt(eo)?(a=Gt,eo++):(a=ut,0===ao&&f(qt)),a!==ut?(ro=n,o=Yt(e,i),n=o):(eo=n,n=ut)):(eo=n,n=ut)):(eo=n,n=ut),n===ut&&(n=null),n!==ut?(ro=t,e=$t(e,n),t=e):(eo=t,t=ut)):(eo=t,t=ut),t}function k(){var t,e,r,n;return t=eo,e=$(),e!==ut?(r=_(),r!==ut?(n=$(),n!==ut?(ro=t,e=Jt(r),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t}function T(){var t,e,r,n;return t=eo,e=$(),e!==ut?(r=S(),r!==ut?(n=$(),n!==ut?(ro=t,e=Jt(r),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t}function L(){var t,e,n,o,i,a,s,u;return t=eo,e=$(),e!==ut?(n=z(),n!==ut?(o=$(),o!==ut?(i=E(),i!==ut?(a=$(),a!==ut?(s=z(),s!==ut?(u=$(),u!==ut?(ro=t,e=Qt(n,i,s),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t===ut&&(t=eo,e=$(),e!==ut?(42===r.charCodeAt(eo)?(n=te,eo++):(n=ut,0===ao&&f(ee)),n!==ut?(o=$(),o!==ut?(i=j(),i!==ut?(a=$(),a!==ut?(s=z(),s!==ut?(u=$(),u!==ut?(ro=t,e=re(i,s),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t===ut&&(t=eo,e=$(),e!==ut?(n=z(),n!==ut?(o=$(),o!==ut?(i=F(),i!==ut?(a=$(),a!==ut?(42===r.charCodeAt(eo)?(s=te,eo++):(s=ut,0===ao&&f(ee)),s!==ut?(u=$(),u!==ut?(ro=t,e=ne(n,i),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t===ut&&(t=eo,e=$(),e!==ut?(n=z(),n!==ut?(o=$(),o!==ut?(i=B(),i!==ut?(a=$(),a!==ut?(42===r.charCodeAt(eo)?(s=te,eo++):(s=ut,0===ao&&f(ee)),s!==ut?(u=$(),u!==ut?(ro=t,e=ne(n,i),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)))),t}function _(){var t;return ao++,r.substr(eo,3)===ie?(t=ie,eo+=3):(t=ut,0===ao&&f(ae)),t===ut&&(r.substr(eo,3)===se?(t=se,eo+=3):(t=ut,0===ao&&f(ue))),ao--,t===ut&&(ut,0===ao&&f(oe)),t}function S(){var t;return ao++,r.substr(eo,3)===le?(t=le,eo+=3):(t=ut,0===ao&&f(fe)),ao--,t===ut&&(ut,0===ao&&f(ce)),t}function E(){var t,e;return t=eo,e=B(),e===ut&&(e=F())===ut&&(e=j())===ut&&(e=P()),e!==ut&&(ro=t,e=de(e)),t=e}function B(){var t;return ao++,r.substr(eo,2)===pe?(t=pe,eo+=2):(t=ut,0===ao&&f(ge)),t===ut&&(r.substr(eo,3)===me?(t=me,eo+=3):(t=ut,0===ao&&f(be)),t===ut&&(r.substr(eo,2)===xe?(t=xe,eo+=2):(t=ut,0===ao&&f(ye)),t===ut&&(r.substr(eo,5)===ve?(t=ve,eo+=5):(t=ut,0===ao&&f(we)),t===ut&&(r.substr(eo,3)===Ce?(t=Ce,eo+=3):(t=ut,0===ao&&f(Ae)),t===ut&&(r.substr(eo,2)===ke?(t=ke,eo+=2):(t=ut,0===ao&&f(Te)),t===ut&&(r.substr(eo,4)===Le?(t=Le,eo+=4):(t=ut,0===ao&&f(_e)),t===ut&&(r.substr(eo,2)===Se?(t=Se,eo+=2):(t=ut,0===ao&&f(Ee)),t===ut&&(r.substr(eo,3)===Be?(t=Be,eo+=3):(t=ut,0===ao&&f(Fe)))))))))),ao--,t===ut&&(ut,0===ao&&f(he)),t}function F(){var t;return ao++,r.substr(eo,2)===Pe?(t=Pe,eo+=2):(t=ut,0===ao&&f(De)),t===ut&&(r.substr(eo,3)===Ie?(t=Ie,eo+=3):(t=ut,0===ao&&f(Me)),t===ut&&(r.substr(eo,2)===Oe?(t=Oe,eo+=2):(t=ut,0===ao&&f(Ne)),t===ut&&(r.substr(eo,2)===ze?(t=ze,eo+=2):(t=ut,0===ao&&f(He)),t===ut&&(r.substr(eo,2)===Re?(t=Re,eo+=2):(t=ut,0===ao&&f(We)),t===ut&&(r.substr(eo,2).toLowerCase()===Ge?(t=r.substr(eo,2),eo+=2):(t=ut,0===ao&&f(qe))))))),ao--,t===ut&&(ut,0===ao&&f(je)),t}function j(){var t;return ao++,r.substr(eo,2)===Xe?(t=Xe,eo+=2):(t=ut,0===ao&&f(Ue)),t===ut&&(r.substr(eo,3)===Ke?(t=Ke,eo+=3):(t=ut,0===ao&&f(Ze)),t===ut&&(r.substr(eo,2)===Ye?(t=Ye,eo+=2):(t=ut,0===ao&&f($e)),t===ut&&(r.substr(eo,2)===Je?(t=Je,eo+=2):(t=ut,0===ao&&f(Qe)),t===ut&&(r.substr(eo,2)===tr?(t=tr,eo+=2):(t=ut,0===ao&&f(er)),t===ut&&(r.substr(eo,2).toLowerCase()===rr?(t=r.substr(eo,2),eo+=2):(t=ut,0===ao&&f(nr))))))),ao--,t===ut&&(ut,0===ao&&f(Ve)),t}function P(){var t;return ao++,r.substr(eo,4).toLowerCase()===ir?(t=r.substr(eo,4),eo+=4):(t=ut,0===ao&&f(ar)),t===ut&&(r.substr(eo,4).toLowerCase()===sr?(t=r.substr(eo,4),eo+=4):(t=ut,0===ao&&f(ur)),t===ut&&(r.substr(eo,4).toLowerCase()===cr?(t=r.substr(eo,4),eo+=4):(t=ut,0===ao&&f(lr)),t===ut&&(r.substr(eo,3).toLowerCase()===fr?(t=r.substr(eo,3),eo+=3):(t=ut,0===ao&&f(dr))))),ao--,t===ut&&(ut,0===ao&&f(or)),t}function D(){var t,e,n,o,i,a;for(t=eo,e=eo,n=[],o=eo,i=I(),i!==ut?(44===r.charCodeAt(eo)?(a=yt,eo++):(a=ut,0===ao&&f(vt)),a!==ut?(ro=o,i=Kt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut);o!==ut;)n.push(o),o=eo,i=I(),i!==ut?(44===r.charCodeAt(eo)?(a=yt,eo++):(a=ut,0===ao&&f(vt)),a!==ut?(ro=o,i=Kt(i),o=i):(eo=o,o=ut)):(eo=o,o=ut);return n!==ut?(o=eo,i=I(),i!==ut&&(ro=o,i=Kt(i)),o=i,o!==ut?(n=[n,o],e=n):(eo=e,e=ut)):(eo=e,e=ut),e!==ut&&(ro=t,e=hr(e)),t=e}function I(){var t,e,n,o,i,a,s,u;return t=eo,e=$(),e!==ut?(n=M(),n!==ut?(o=$(),o!==ut?(61===r.charCodeAt(eo)?(i=jt,eo++):(i=ut,0===ao&&f(Pt)),i!==ut?(a=$(),a!==ut?(s=z(),s!==ut?(u=$(),u!==ut?(ro=t,e=pr(n,s),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t}function M(){var t;return ao++,r.substr(eo,5).toLowerCase()===mr?(t=r.substr(eo,5),eo+=5):(t=ut,0===ao&&f(br)),t===ut&&(r.substr(eo,5).toLowerCase()===xr?(t=r.substr(eo,5),eo+=5):(t=ut,0===ao&&f(yr)),t===ut&&(r.substr(eo,2).toLowerCase()===vr?(t=r.substr(eo,2),eo+=2):(t=ut,0===ao&&f(wr)),t===ut&&(r.substr(eo,3).toLowerCase()===Cr?(t=r.substr(eo,3),eo+=3):(t=ut,0===ao&&f(Ar)),t===ut&&(r.substr(eo,9).toLowerCase()===kr?(t=r.substr(eo,9),eo+=9):(t=ut,0===ao&&f(Tr)),t===ut&&(r.substr(eo,10).toLowerCase()===Lr?(t=r.substr(eo,10),eo+=10):(t=ut,0===ao&&f(_r)),t===ut&&(r.substr(eo,9).toLowerCase()===Sr?(t=r.substr(eo,9),eo+=9):(t=ut,0===ao&&f(Er)),t===ut&&(r.substr(eo,10).toLowerCase()===Br?(t=r.substr(eo,10),eo+=10):(t=ut,0===ao&&f(Fr)),t===ut&&(r.substr(eo,11).toLowerCase()===jr?(t=r.substr(eo,11),eo+=11):(t=ut,0===ao&&f(Pr)),t===ut&&(r.substr(eo,12).toLowerCase()===Dr?(t=r.substr(eo,12),eo+=12):(t=ut,0===ao&&f(Ir)),t===ut&&(r.substr(eo,12).toLowerCase()===Mr?(t=r.substr(eo,12),eo+=12):(t=ut,0===ao&&f(Or)),t===ut&&(r.substr(eo,13).toLowerCase()===Nr?(t=r.substr(eo,13),eo+=13):(t=ut,0===ao&&f(zr)),t===ut&&(r.substr(eo,12).toLowerCase()===Hr?(t=r.substr(eo,12),eo+=12):(t=ut,0===ao&&f(Rr)),t===ut&&(r.substr(eo,13).toLowerCase()===Wr?(t=r.substr(eo,13),eo+=13):(t=ut,0===ao&&f(Gr)),t===ut&&(r.substr(eo,14).toLowerCase()===qr?(t=r.substr(eo,14),eo+=14):(t=ut,0===ao&&f(Vr)),t===ut&&(r.substr(eo,15).toLowerCase()===Xr?(t=r.substr(eo,15),eo+=15):(t=ut,0===ao&&f(Ur)),t===ut&&(r.substr(eo,7).toLowerCase()===Kr?(t=r.substr(eo,7),eo+=7):(t=ut,0===ao&&f(Zr)))))))))))))))))),ao--,t===ut&&(ut,0===ao&&f(gr)),t}function O(){var t,e,n,o;return ao++,t=eo,34===r.charCodeAt(eo)?(e=$r,eo++):(e=ut,0===ao&&f(Jr)),e!==ut?(n=N(),n!==ut?(34===r.charCodeAt(eo)?(o=$r,eo++):(o=ut,0===ao&&f(Jr)),o!==ut?(ro=t,e=Qr(n),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),ao--,t===ut&&(e=ut,0===ao&&f(Yr)),t}function N(){var t,e,n,o;for(t=[],e=eo,n=eo,ao++,34===r.charCodeAt(eo)?(o=$r,eo++):(o=ut,0===ao&&f(Jr)),ao--,o===ut?n=void 0:(eo=n,n=ut),n!==ut?(r.substr(eo,2)===tn?(o=tn,eo+=2):(o=ut,0===ao&&f(en)),o===ut&&(r.length>eo?(o=r.charAt(eo),eo++):(o=ut,0===ao&&f(rn))),o!==ut?(ro=e,n=nn(o),e=n):(eo=e,e=ut)):(eo=e,e=ut);e!==ut;)t.push(e),e=eo,n=eo,ao++,34===r.charCodeAt(eo)?(o=$r,eo++):(o=ut,0===ao&&f(Jr)),ao--,o===ut?n=void 0:(eo=n,n=ut),n!==ut?(r.substr(eo,2)===tn?(o=tn,eo+=2):(o=ut,0===ao&&f(en)),o===ut&&(r.length>eo?(o=r.charAt(eo),eo++):(o=ut,0===ao&&f(rn))),o!==ut?(ro=e,n=nn(o),e=n):(eo=e,e=ut)):(eo=e,e=ut);return t}function z(){var t;return ao++,t=H(),t===ut&&(t=O()),ao--,t===ut&&(ut,0===ao&&f(on)),t}function H(){var t,e,n;if(t=eo,e=[],an.test(r.charAt(eo))?(n=r.charAt(eo),eo++):(n=ut,0===ao&&f(sn)),n!==ut)for(;n!==ut;)e.push(n),an.test(r.charAt(eo))?(n=r.charAt(eo),eo++):(n=ut,0===ao&&f(sn));else e=ut;return e!==ut&&(ro=t,e=un(e)),t=e}function R(){var t,e;return ao++,t=eo,ln.test(r.charAt(eo))?(e=r.charAt(eo),eo++):(e=ut,0===ao&&f(fn)),e!==ut&&(ro=t,e=nn(e)),t=e,ao--,t===ut&&(e=ut,0===ao&&f(cn)),t}function W(){var t,e;return ao++,t=eo,hn.test(r.charAt(eo))?(e=r.charAt(eo),eo++):(e=ut,0===ao&&f(pn)),e!==ut&&(ro=t,e=nn(e)),t=e,ao--,t===ut&&(e=ut,0===ao&&f(dn)),t}function G(){var t;return r.substr(eo,2)===gn?(t=gn,eo+=2):(t=ut,0===ao&&f(mn)),t}function q(){var t;return r.substr(eo,2)===bn?(t=bn,eo+=2):(t=ut,0===ao&&f(xn)),t}function V(){var t,e,n;return t=eo,e=eo,ao++,r.substr(eo,2)===bn?(n=bn,eo+=2):(n=ut,0===ao&&f(xn)),ao--,n===ut?e=void 0:(eo=e,e=ut),e!==ut?(r.length>eo?(n=r.charAt(eo),eo++):(n=ut,0===ao&&f(rn)),n!==ut?(ro=t,e=nn(n),t=e):(eo=t,t=ut)):(eo=t,t=ut),t}function X(){var t,e,r,n;if(t=eo,(e=G())!==ut){for(r=[],n=V();n!==ut;)r.push(n),n=V();r!==ut?(n=q(),n!==ut?(ro=t,e=yn(e,r,n),t=e):(eo=t,t=ut)):(eo=t,t=ut)}else eo=t,t=ut;return t}function U(){var t;return r.substr(eo,2)===vn?(t=vn,eo+=2):(t=ut,0===ao&&f(wn)),t===ut&&(35===r.charCodeAt(eo)?(t=Cn,eo++):(t=ut,0===ao&&f(An))),t}function K(){var t;return kn.test(r.charAt(eo))?(t=r.charAt(eo),eo++):(t=ut,0===ao&&f(Tn)),t}function Z(){var t,e,r,n;if(t=eo,(e=U())!==ut){for(r=[],n=K();n!==ut;)r.push(n),n=K();r!==ut?(ro=t,e=Ln(e,r),t=e):(eo=t,t=ut)}else eo=t,t=ut;return t}function Y(){var t;return ao++,t=Z(),t===ut&&(t=X()),ao--,t===ut&&(ut,0===ao&&f(_n)),t}function $(){var t,e;for(t=[],e=R(),e===ut&&(e=W())===ut&&(e=Y());e!==ut;)t.push(e),(e=R())===ut&&(e=W())===ut&&(e=Y());return t}function J(){var t,e;return ao++,t=eo,e=Q(),e!==ut&&(ro=t,e=En(e)),t=e,t===ut&&(t=eo,e=tt(),e!==ut&&(ro=t,e=Bn(e)),t=e),ao--,t===ut&&(e=ut,0===ao&&f(Sn)),t}function Q(){var t,e,n,o;return t=eo,34===r.charCodeAt(eo)?(e=$r,eo++):(e=ut,0===ao&&f(Jr)),e!==ut?(n=tt(),n!==ut?(34===r.charCodeAt(eo)?(o=$r,eo++):(o=ut,0===ao&&f(Jr)),o!==ut?(ro=t,e=Fn(n),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t}function tt(){var t;return t=rt(),t===ut&&(t=et()),t}function et(){var t,e,n;if(ao++,t=eo,e=[],Pn.test(r.charAt(eo))?(n=r.charAt(eo),eo++):(n=ut,0===ao&&f(Dn)),n!==ut)for(;n!==ut;)e.push(n),Pn.test(r.charAt(eo))?(n=r.charAt(eo),eo++):(n=ut,0===ao&&f(Dn));else e=ut;return e!==ut&&(ro=t,e=In(e)),t=e,ao--,t===ut&&(e=ut,0===ao&&f(jn)),t}function rt(){var t,e,n,o,i;return ao++,t=eo,e=eo,n=et(),n!==ut?(46===r.charCodeAt(eo)?(o=On,eo++):(o=ut,0===ao&&f(Nn)),o!==ut?(i=et(),i!==ut?(n=[n,o,i],e=n):(eo=e,e=ut)):(eo=e,e=ut)):(eo=e,e=ut),e!==ut&&(ro=t,e=zn(e)),t=e,ao--,t===ut&&(e=ut,0===ao&&f(Mn)),t}function nt(){var t,e;return ao++,t=eo,e=ot(),e!==ut&&(ro=t,e=Rn(e)),t=e,t===ut&&(t=eo,e=it(),e!==ut&&(ro=t,e=Wn(e)),t=e),ao--,t===ut&&(e=ut,0===ao&&f(Hn)),t}function ot(){var t,e,n,o;return t=eo,34===r.charCodeAt(eo)?(e=$r,eo++):(e=ut,0===ao&&f(Jr)),e!==ut?(n=it(),n!==ut?(34===r.charCodeAt(eo)?(o=$r,eo++):(o=ut,0===ao&&f(Jr)),o!==ut?(ro=t,e=En(n),t=e):(eo=t,t=ut)):(eo=t,t=ut)):(eo=t,t=ut),t}function it(){var t;return r.substr(eo,4).toLowerCase()===Gn?(t=r.substr(eo,4),eo+=4):(t=ut,0===ao&&f(qn)),t===ut&&(r.substr(eo,5).toLowerCase()===Vn?(t=r.substr(eo,5),eo+=5):(t=ut,0===ao&&f(Xn)),t===ut&&(r.substr(eo,2).toLowerCase()===Un?(t=r.substr(eo,2),eo+=2):(t=ut,0===ao&&f(Kn)),t===ut&&(r.substr(eo,3).toLowerCase()===Zn?(t=r.substr(eo,3),eo+=3):(t=ut,0===ao&&f(Yn)),t===ut&&(48===r.charCodeAt(eo)?(t=$n,eo++):(t=ut,0===ao&&f(Jn)),t===ut&&(49===r.charCodeAt(eo)?(t=Qn,eo++):(t=ut,0===ao&&f(to))))))),t}function at(){return{extendedOptions:!1,extendedArcTypes:!1,extendedFeatures:!1}}n=void 0!==n?n:{};var st,ut={},ct={program:p},lt=p,ft="{",dt=a("{",!1),ht="}",pt=a("}",!1),gt=function(t,e){e.entities=so.checkForUndeclaredEntities(e.entities,e.arcs);var r=e;return r=uo({meta:at()},r),t.length>0&&(r=uo({precomment:t},r)),r},mt="msc",bt=a("msc",!0),xt=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},yt=",",vt=a(",",!1),wt=function(t){return t},Ct=";",At=a(";",!1),kt=function(t){return so.optionArray2Object(t[0].concat(t[1]))},Tt=u("option"),Lt="hscale",_t=a("hscale",!0),St="width",Et=a("width",!0),Bt="arcgradient",Ft=a("arcgradient",!0),jt="=",Pt=a("=",!1),Dt=function(t,e){return so.nameValue2Option(t,e)},It="wordwraparcs",Mt=a("wordwraparcs",!0),Ot=function(t,e){return so.nameValue2Option(t,so.flattenBoolean(e))},Nt=function(t){return t},zt=function(t){return t[0].concat(t[1])},Ht=u("entity"),Rt="[",Wt=a("[",!1),Gt="]",qt=a("]",!1),Vt=function(t,e){return e},Xt=function(t,e){return uo({name:t},e)},Ut=function(t,e){return so.isMscGenKeyword(t)&&i("Keywords aren't allowed as entity names (embed them in quotes if you need them)"),uo({name:t},e)},Kt=function(t){return t},Zt=function(t){return t[0].concat(t[1])},Yt=function(t,e){return e},$t=function(t,e){return uo(t,e)},Jt=function(t){return{kind:t}},Qt=function(t,e,r){return{kind:e,from:t,to:r,location:o()}},te="*",ee=a("*",!1),re=function(t,e){return{kind:t,from:"*",to:e,location:o()}},ne=function(t,e){return{kind:e,from:t,to:"*",location:o()}},oe=u("empty row"),ie="|||",ae=a("|||",!1),se="...",ue=a("...",!1),ce=u("---"),le="---",fe=a("---",!1),de=function(t){return t.toLowerCase()},he=u("bi-directional arrow"),pe="--",ge=a("--",!1),me="<->",be=a("<->",!1),xe="==",ye=a("==",!1),ve="<<=>>",we=a("<<=>>",!1),Ce="<=>",Ae=a("<=>",!1),ke="..",Te=a("..",!1),Le="<<>>",_e=a("<<>>",!1),Se="::",Ee=a("::",!1),Be="<:>",Fe=a("<:>",!1),je=u("left to right arrow"),Pe="->",De=a("->",!1),Ie="=>>",Me=a("=>>",!1),Oe="=>",Ne=a("=>",!1),ze=">>",He=a(">>",!1),Re=":>",We=a(":>",!1),Ge="-x",qe=a("-x",!0),Ve=u("right to left arrow"),Xe="<-",Ue=a("<-",!1),Ke="<<=",Ze=a("<<=",!1),Ye="<=",$e=a("<=",!1),Je="<<",Qe=a("<<",!1),tr="<:",er=a("<:",!1),rr="x-",nr=a("x-",!0),or=u("box"),ir="note",ar=a("note",!0),sr="abox",ur=a("abox",!0),cr="rbox",lr=a("rbox",!0),fr="box",dr=a("box",!0),hr=function(t){return so.optionArray2Object(t[0].concat(t[1]))},pr=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},gr=u("attribute name"),mr="label",br=a("label",!0),xr="idurl",yr=a("idurl",!0),vr="id",wr=a("id",!0),Cr="url",Ar=a("url",!0),kr="linecolor",Tr=a("linecolor",!0),Lr="linecolour",_r=a("linecolour",!0),Sr="textcolor",Er=a("textcolor",!0),Br="textcolour",Fr=a("textcolour",!0),jr="textbgcolor",Pr=a("textbgcolor",!0),Dr="textbgcolour",Ir=a("textbgcolour",!0),Mr="arclinecolor",Or=a("arclinecolor",!0),Nr="arclinecolour",zr=a("arclinecolour",!0),Hr="arctextcolor",Rr=a("arctextcolor",!0),Wr="arctextcolour",Gr=a("arctextcolour",!0),qr="arctextbgcolor",Vr=a("arctextbgcolor",!0),Xr="arctextbgcolour",Ur=a("arctextbgcolour",!0),Kr="arcskip",Zr=a("arcskip",!0),Yr=u("double quoted string"),$r='"',Jr=a('"',!1),Qr=function(t){return t.join("")},tn='\\"',en=a('\\"',!1),rn=function(){return{type:"any"}}(),nn=function(t){return t},on=u("identifier"),an=/^[A-Za-z_0-9]/,sn=s([["A","Z"],["a","z"],"_",["0","9"]],!1,!1),un=function(t){return t.join("")},cn=u("whitespace"),ln=/^[ \t]/,fn=s([" ","\t"],!1,!1),dn=u("lineend"),hn=/^[\r\n]/,pn=s(["\r","\n"],!1,!1),gn="/*",mn=a("/*",!1),bn="*/",xn=a("*/",!1),yn=function(t,e,r){return t+e.join("")+r},vn="//",wn=a("//",!1),Cn="#",An=a("#",!1),kn=/^[^\r\n]/,Tn=s(["\r","\n"],!0,!1),Ln=function(t,e){return t+e.join("")},_n=u("comment"),Sn=u("number"),En=function(t){return t},Bn=function(t){return t.toString()},Fn=function(t){return t.toString()},jn=u("cardinal"),Pn=/^[0-9]/,Dn=s([["0","9"]],!1,!1),In=function(t){return parseInt(t.join(""),10)},Mn=u("real"),On=".",Nn=a(".",!1),zn=function(t){return parseFloat(t.join(""))},Hn=u("boolean"),Rn=function(t){return t},Wn=function(t){return t.toString()},Gn="true",qn=a("true",!0),Vn="false",Xn=a("false",!0),Un="on",Kn=a("on",!0),Zn="off",Yn=a("off",!0),$n="0",Jn=a("0",!1),Qn="1",to=a("1",!1),eo=0,ro=0,no=[{line:1,column:1}],oo=0,io=[],ao=0;if("startRule"in n){if(!(n.startRule in ct))throw new Error("Can't start parsing from rule \""+n.startRule+'".');lt=ct[n.startRule]}var so=e("./parserHelpers"),uo=e("../lib/lodash/lodash.custom").assign;if((st=lt())!==ut&&eo===r.length)return st;throw st!==ut&&eo<r.length&&f(function(){return{type:"end"}}()),h(io,oo<r.length?r.charAt(oo):null,oo<r.length?l(oo,oo+1):l(oo,oo))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return a[t.type](t)}var a={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:r}}),function(t,e){"function"==typeof r&&r.amd?r("parse/xuparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(0,function(){"use strict";function t(e,r,n,o){this.message=e,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(r,n){function o(){return l(ei,ti)}function i(t,e){throw e=void 0!==e?e:l(ei,ti),d(t,e)}function a(t,e){return{type:"literal",text:t,ignoreCase:e}}function s(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function u(t){return{type:"other",description:t}}function c(t){var e,n=ri[t];if(n)return n;for(e=t-1;!ri[e];)e--;for(n=ri[e],n={line:n.line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return ri[t]=n,n}function l(t,e){var r=c(t),n=c(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function f(t){ti<ni||(ti>ni&&(ni=ti,oi=[]),oi.push(t))}function d(e,r){return new t(e,null,null,r)}function h(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function p(){var t,e,n,o,i,a,s,u,c,l;return t=ti,e=tt(),e!==ht?(n=g(),n!==ht?(o=tt(),o!==ht?(123===r.charCodeAt(ti)?(i=mt,ti++):(i=ht,0===ii&&f(bt)),i!==ht?(a=tt(),a!==ht?(s=m(),s!==ht?(u=tt(),u!==ht?(125===r.charCodeAt(ti)?(c=xt,ti++):(c=ht,0===ii&&f(yt)),c!==ht?(l=tt(),l!==ht?(ei=t,e=vt(e,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function g(){var t;return r.substr(ti,3).toLowerCase()===wt?(t=r.substr(ti,3),ti+=3):(t=ht,0===ii&&f(Ct)),t===ht&&(r.substr(ti,2).toLowerCase()===At?(t=r.substr(ti,2),ti+=2):(t=ht,0===ii&&f(kt))),t}function m(){var t,e,r,n;return t=ti,e=b(),e===ht&&(e=null),e!==ht?(r=y(),r===ht&&(r=null),r!==ht?(n=w(),n===ht&&(n=null),n!==ht?(ei=t,e=Tt(e,r,n),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function b(){var t,e,n,o,i,a;for(t=ti,e=ti,n=[],o=ti,i=x(),i!==ht?(44===r.charCodeAt(ti)?(a=Lt,ti++):(a=ht,0===ii&&f(_t)),a!==ht?(ei=o,i=St(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);o!==ht;)n.push(o),o=ti,i=x(),i!==ht?(44===r.charCodeAt(ti)?(a=Lt,ti++):(a=ht,0===ii&&f(_t)),a!==ht?(ei=o,i=St(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);return n!==ht?(o=ti,i=x(),i!==ht?(59===r.charCodeAt(ti)?(a=Et,ti++):(a=ht,0===ii&&f(Bt)),a!==ht?(ei=o,i=St(i),o=i):(ti=o,o=ht)):(ti=o,o=ht),o!==ht?(n=[n,o],e=n):(ti=e,e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=Ft(e)),t=e}function x(){var t,e,n,o,i,a,s,u;return ii++,t=ti,e=tt(),e!==ht?(r.substr(ti,6).toLowerCase()===Pt?(n=r.substr(ti,6),ti+=6):(n=ht,0===ii&&f(Dt)),n===ht&&(r.substr(ti,11).toLowerCase()===It?(n=r.substr(ti,11),ti+=11):(n=ht,0===ii&&f(Mt))),n!==ht?(o=tt(),o!==ht?(61===r.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&f(Nt)),i!==ht?(a=tt(),a!==ht?(s=et(),s!==ht?(u=tt(),u!==ht?(ei=t,e=zt(n,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(r.substr(ti,5).toLowerCase()===Ht?(n=r.substr(ti,5),ti+=5):(n=ht,0===ii&&f(Rt)),n!==ht?(o=tt(),o!==ht?(61===r.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&f(Nt)),i!==ht?(a=tt(),a!==ht?(s=ct(),s!==ht?(u=tt(),u!==ht?(ei=t,e=zt(n,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(r.substr(ti,12).toLowerCase()===Wt?(n=r.substr(ti,12),ti+=12):(n=ht,0===ii&&f(Gt)),n!==ht?(o=tt(),o!==ht?(61===r.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&f(Nt)),i!==ht?(a=tt(),a!==ht?(s=at(),s!==ht?(u=tt(),u!==ht?(ei=t,e=qt(n,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(r.substr(ti,16).toLowerCase()===Vt?(n=r.substr(ti,16),ti+=16):(n=ht,0===ii&&f(Xt)),n!==ht?(o=tt(),o!==ht?(61===r.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&f(Nt)),i!==ht?(a=tt(),a!==ht?(s=at(),s!==ht?(u=tt(),u!==ht?(ei=t,e=qt(n,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(r.substr(ti,13).toLowerCase()===Ut?(n=r.substr(ti,13),ti+=13):(n=ht,0===ii&&f(Kt)),n!==ht?(o=tt(),o!==ht?(61===r.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&f(Nt)),i!==ht?(a=tt(),a!==ht?(s=at(),s!==ht?(u=tt(),u!==ht?(ei=t,e=qt(n,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(r.substr(ti,9).toLowerCase()===Zt?(n=r.substr(ti,9),ti+=9):(n=ht,0===ii&&f(Yt)),n!==ht?(o=tt(),o!==ht?(61===r.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&f(Nt)),i!==ht?(a=tt(),a!==ht?(s=H(),s!==ht?(u=tt(),u!==ht?(ei=t,e=zt(n,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)))))),ii--,t===ht&&(e=ht,0===ii&&f(jt)),t}function y(){var t,e,n,o,i,a;for(t=ti,e=ti,n=[],o=ti,i=v(),i!==ht?(44===r.charCodeAt(ti)?(a=Lt,ti++):(a=ht,0===ii&&f(_t)),a!==ht?(ei=o,i=$t(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);o!==ht;)n.push(o),o=ti,i=v(),i!==ht?(44===r.charCodeAt(ti)?(a=Lt,ti++):(a=ht,0===ii&&f(_t)),a!==ht?(ei=o,i=$t(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);return n!==ht?(o=ti,i=v(),i!==ht?(59===r.charCodeAt(ti)?(a=Et,ti++):(a=ht,0===ii&&f(Bt)),a!==ht?(ei=o,i=$t(i),o=i):(ti=o,o=ht)):(ti=o,o=ht),o!==ht?(n=[n,o],e=n):(ti=e,e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=Jt(e)),t=e}function v(){var t,e,n,o,i,a,s,u;return ii++,t=ti,e=tt(),e!==ht?(n=H(),n!==ht?(o=tt(),o!==ht?(i=ti,91===r.charCodeAt(ti)?(a=te,ti++):(a=ht,0===ii&&f(ee)),a!==ht?(s=O(),s!==ht?(93===r.charCodeAt(ti)?(u=re,ti++):(u=ht,0===ii&&f(ne)),u!==ht?(ei=i,a=oe(n,s),i=a):(ti=i,i=ht)):(ti=i,i=ht)):(ti=i,i=ht),i===ht&&(i=null),i!==ht?(a=tt(),a!==ht?(ei=t,e=ie(n,i),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(n=G(),n!==ht?(o=tt(),o!==ht?(i=ti,91===r.charCodeAt(ti)?(a=te,ti++):(a=ht,0===ii&&f(ee)),a!==ht?(s=O(),s!==ht?(93===r.charCodeAt(ti)?(u=re,ti++):(u=ht,0===ii&&f(ne)),u!==ht?(ei=i,a=oe(n,s),i=a):(ti=i,i=ht)):(ti=i,i=ht)):(ti=i,i=ht),i===ht&&(i=null),i!==ht?(a=tt(),a!==ht?(ei=t,e=ae(n,i),t=e):(ti=t,
t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)),ii--,t===ht&&(e=ht,0===ii&&f(Qt)),t}function w(){var t,e,n,o,i;if(t=[],e=ti,n=C(),n!==ht?(o=tt(),o!==ht?(59===r.charCodeAt(ti)?(i=Et,ti++):(i=ht,0===ii&&f(Bt)),i!==ht?(ei=e,n=se(n),e=n):(ti=e,e=ht)):(ti=e,e=ht)):(ti=e,e=ht),e!==ht)for(;e!==ht;)t.push(e),e=ti,n=C(),n!==ht?(o=tt(),o!==ht?(59===r.charCodeAt(ti)?(i=Et,ti++):(i=ht,0===ii&&f(Bt)),i!==ht?(ei=e,n=se(n),e=n):(ti=e,e=ht)):(ti=e,e=ht)):(ti=e,e=ht);else t=ht;return t}function C(){var t,e,n,o,i,a,s;for(t=ti,e=ti,n=[],o=ti,i=A(),i!==ht?(a=tt(),a!==ht?(44===r.charCodeAt(ti)?(s=Lt,ti++):(s=ht,0===ii&&f(_t)),s!==ht?(ei=o,i=se(i),o=i):(ti=o,o=ht)):(ti=o,o=ht)):(ti=o,o=ht);o!==ht;)n.push(o),o=ti,i=A(),i!==ht?(a=tt(),a!==ht?(44===r.charCodeAt(ti)?(s=Lt,ti++):(s=ht,0===ii&&f(_t)),s!==ht?(ei=o,i=se(i),o=i):(ti=o,o=ht)):(ti=o,o=ht)):(ti=o,o=ht);return n!==ht?(o=ti,i=A(),i!==ht&&(ei=o,i=se(i)),o=i,o!==ht?(n=[n,o],e=n):(ti=e,e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=ue(e)),t=e}function A(){var t;return t=k(),t===ht&&(t=S()),t}function k(){var t,e,n,o,i,a;return t=ti,e=ti,n=T(),n!==ht&&(ei=e,n=se(n)),e=n,e===ht&&(e=ti,n=_(),n!==ht&&(ei=e,n=se(n)),(e=n)===ht&&(e=ti,n=L(),n!==ht&&(ei=e,n=se(n)),e=n)),e!==ht?(n=ti,91===r.charCodeAt(ti)?(o=te,ti++):(o=ht,0===ii&&f(ee)),o!==ht?(i=O(),i!==ht?(93===r.charCodeAt(ti)?(a=re,ti++):(a=ht,0===ii&&f(ne)),a!==ht?(ei=n,o=ce(e,i),n=o):(ti=n,n=ht)):(ti=n,n=ht)):(ti=n,n=ht),n===ht&&(n=null),n!==ht?(ei=t,e=le(e,n),t=e):(ti=t,t=ht)):(ti=t,t=ht),t}function T(){var t,e,r,n;return t=ti,e=tt(),e!==ht?(r=E(),r!==ht?(n=tt(),n!==ht?(ei=t,e=fe(r),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function L(){var t,e,r,n;return t=ti,e=tt(),e!==ht?(r=B(),r!==ht?(n=tt(),n!==ht?(ei=t,e=fe(r),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function _(){var t,e,n,o,i,a,s,u;return t=ti,e=tt(),e!==ht?(n=W(),n!==ht?(o=tt(),o!==ht?(i=F(),i!==ht?(a=tt(),a!==ht?(s=W(),s!==ht?(u=tt(),u!==ht?(ei=t,e=de(n,i,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(42===r.charCodeAt(ti)?(n=he,ti++):(n=ht,0===ii&&f(pe)),n!==ht?(o=tt(),o!==ht?(i=D(),i!==ht?(a=tt(),a!==ht?(s=W(),s!==ht?(u=tt(),u!==ht?(ei=t,e=ge(i,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(n=W(),n!==ht?(o=tt(),o!==ht?(i=P(),i!==ht?(a=tt(),a!==ht?(42===r.charCodeAt(ti)?(s=he,ti++):(s=ht,0===ii&&f(pe)),s!==ht?(u=tt(),u!==ht?(ei=t,e=me(n,i),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(n=W(),n!==ht?(o=tt(),o!==ht?(i=j(),i!==ht?(a=tt(),a!==ht?(42===r.charCodeAt(ti)?(s=he,ti++):(s=ht,0===ii&&f(pe)),s!==ht?(u=tt(),u!==ht?(ei=t,e=me(n,i),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)))),t}function S(){var t,e,n,o,i,a,s,u,c,l,d,h,p,g,m,b;return t=ti,e=tt(),e!==ht?(n=W(),n!==ht?(o=tt(),o!==ht?(i=M(),i!==ht?(a=tt(),a!==ht?(s=W(),s!==ht?(u=tt(),u!==ht?(c=ti,91===r.charCodeAt(ti)?(l=te,ti++):(l=ht,0===ii&&f(ee)),l!==ht?(d=O(),d!==ht?(93===r.charCodeAt(ti)?(h=re,ti++):(h=ht,0===ii&&f(ne)),h!==ht?(ei=c,l=be(n,i,s,d),c=l):(ti=c,c=ht)):(ti=c,c=ht)):(ti=c,c=ht),c===ht&&(c=null),c!==ht?(l=tt(),l!==ht?(123===r.charCodeAt(ti)?(d=mt,ti++):(d=ht,0===ii&&f(bt)),d!==ht?(h=tt(),h!==ht?(p=w(),p===ht&&(p=null),p!==ht?(g=tt(),g!==ht?(125===r.charCodeAt(ti)?(m=xt,ti++):(m=ht,0===ii&&f(yt)),m!==ht?(b=tt(),b!==ht?(ei=t,e=xe(n,i,s,c,p),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function E(){var t;return ii++,r.substr(ti,3)===ve?(t=ve,ti+=3):(t=ht,0===ii&&f(we)),t===ht&&(r.substr(ti,3)===Ce?(t=Ce,ti+=3):(t=ht,0===ii&&f(Ae))),ii--,t===ht&&(ht,0===ii&&f(ye)),t}function B(){var t;return ii++,r.substr(ti,3)===Te?(t=Te,ti+=3):(t=ht,0===ii&&f(Le)),ii--,t===ht&&(ht,0===ii&&f(ke)),t}function F(){var t,e;return t=ti,e=j(),e===ht&&(e=P())===ht&&(e=D())===ht&&(e=I()),e!==ht&&(ei=t,e=_e(e)),t=e}function j(){var t;return ii++,r.substr(ti,2)===Ee?(t=Ee,ti+=2):(t=ht,0===ii&&f(Be)),t===ht&&(r.substr(ti,3)===Fe?(t=Fe,ti+=3):(t=ht,0===ii&&f(je)),t===ht&&(r.substr(ti,2)===Pe?(t=Pe,ti+=2):(t=ht,0===ii&&f(De)),t===ht&&(r.substr(ti,5)===Ie?(t=Ie,ti+=5):(t=ht,0===ii&&f(Me)),t===ht&&(r.substr(ti,3)===Oe?(t=Oe,ti+=3):(t=ht,0===ii&&f(Ne)),t===ht&&(r.substr(ti,2)===ze?(t=ze,ti+=2):(t=ht,0===ii&&f(He)),t===ht&&(r.substr(ti,4)===Re?(t=Re,ti+=4):(t=ht,0===ii&&f(We)),t===ht&&(r.substr(ti,2)===Ge?(t=Ge,ti+=2):(t=ht,0===ii&&f(qe)),t===ht&&(r.substr(ti,3)===Ve?(t=Ve,ti+=3):(t=ht,0===ii&&f(Xe)))))))))),ii--,t===ht&&(ht,0===ii&&f(Se)),t}function P(){var t;return ii++,r.substr(ti,2)===Ke?(t=Ke,ti+=2):(t=ht,0===ii&&f(Ze)),t===ht&&(r.substr(ti,3)===Ye?(t=Ye,ti+=3):(t=ht,0===ii&&f($e)),t===ht&&(r.substr(ti,2)===Je?(t=Je,ti+=2):(t=ht,0===ii&&f(Qe)),t===ht&&(r.substr(ti,2)===tr?(t=tr,ti+=2):(t=ht,0===ii&&f(er)),t===ht&&(r.substr(ti,2)===rr?(t=rr,ti+=2):(t=ht,0===ii&&f(nr)),t===ht&&(r.substr(ti,2).toLowerCase()===or?(t=r.substr(ti,2),ti+=2):(t=ht,0===ii&&f(ir))))))),ii--,t===ht&&(ht,0===ii&&f(Ue)),t}function D(){var t;return ii++,r.substr(ti,2)===sr?(t=sr,ti+=2):(t=ht,0===ii&&f(ur)),t===ht&&(r.substr(ti,3)===cr?(t=cr,ti+=3):(t=ht,0===ii&&f(lr)),t===ht&&(r.substr(ti,2)===fr?(t=fr,ti+=2):(t=ht,0===ii&&f(dr)),t===ht&&(r.substr(ti,2)===hr?(t=hr,ti+=2):(t=ht,0===ii&&f(pr)),t===ht&&(r.substr(ti,2)===gr?(t=gr,ti+=2):(t=ht,0===ii&&f(mr)),t===ht&&(r.substr(ti,2).toLowerCase()===br?(t=r.substr(ti,2),ti+=2):(t=ht,0===ii&&f(xr))))))),ii--,t===ht&&(ht,0===ii&&f(ar)),t}function I(){var t;return ii++,r.substr(ti,4).toLowerCase()===vr?(t=r.substr(ti,4),ti+=4):(t=ht,0===ii&&f(wr)),t===ht&&(r.substr(ti,4).toLowerCase()===Cr?(t=r.substr(ti,4),ti+=4):(t=ht,0===ii&&f(Ar)),t===ht&&(r.substr(ti,4).toLowerCase()===kr?(t=r.substr(ti,4),ti+=4):(t=ht,0===ii&&f(Tr)),t===ht&&(r.substr(ti,3).toLowerCase()===Lr?(t=r.substr(ti,3),ti+=3):(t=ht,0===ii&&f(_r))))),ii--,t===ht&&(ht,0===ii&&f(yr)),t}function M(){var t,e;return ii++,t=ti,r.substr(ti,3).toLowerCase()===Er?(e=r.substr(ti,3),ti+=3):(e=ht,0===ii&&f(Br)),e===ht&&(r.substr(ti,4).toLowerCase()===Fr?(e=r.substr(ti,4),ti+=4):(e=ht,0===ii&&f(jr)),e===ht&&(r.substr(ti,3).toLowerCase()===Pr?(e=r.substr(ti,3),ti+=3):(e=ht,0===ii&&f(Dr)),e===ht&&(r.substr(ti,5).toLowerCase()===Ir?(e=r.substr(ti,5),ti+=5):(e=ht,0===ii&&f(Mr)),e===ht&&(r.substr(ti,3).toLowerCase()===Or?(e=r.substr(ti,3),ti+=3):(e=ht,0===ii&&f(Nr)),e===ht&&(r.substr(ti,3).toLowerCase()===zr?(e=r.substr(ti,3),ti+=3):(e=ht,0===ii&&f(Hr)),e===ht&&(r.substr(ti,6).toLowerCase()===Rr?(e=r.substr(ti,6),ti+=6):(e=ht,0===ii&&f(Wr)),e===ht&&(r.substr(ti,3).toLowerCase()===Gr?(e=r.substr(ti,3),ti+=3):(e=ht,0===ii&&f(qr)),e===ht&&(r.substr(ti,8).toLowerCase()===Vr?(e=r.substr(ti,8),ti+=8):(e=ht,0===ii&&f(Xr)),e===ht&&(r.substr(ti,6).toLowerCase()===Ur?(e=r.substr(ti,6),ti+=6):(e=ht,0===ii&&f(Kr)),e===ht&&(r.substr(ti,8).toLowerCase()===Zr?(e=r.substr(ti,8),ti+=8):(e=ht,0===ii&&f(Yr)),e===ht&&(r.substr(ti,6).toLowerCase()===$r?(e=r.substr(ti,6),ti+=6):(e=ht,0===ii&&f(Jr)),e===ht&&(r.substr(ti,4).toLowerCase()===Qr?(e=r.substr(ti,4),ti+=4):(e=ht,0===ii&&f(tn)),e===ht&&(r.substr(ti,3).toLowerCase()===en?(e=r.substr(ti,3),ti+=3):(e=ht,0===ii&&f(rn)),e===ht&&(r.substr(ti,3).toLowerCase()===nn?(e=r.substr(ti,3),ti+=3):(e=ht,0===ii&&f(on)))))))))))))))),e!==ht&&(ei=t,e=an(e)),t=e,ii--,t===ht&&(e=ht,0===ii&&f(Sr)),t}function O(){var t,e,n,o,i,a;for(t=ti,e=ti,n=[],o=ti,i=N(),i!==ht?(44===r.charCodeAt(ti)?(a=Lt,ti++):(a=ht,0===ii&&f(_t)),a!==ht?(ei=o,i=se(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);o!==ht;)n.push(o),o=ti,i=N(),i!==ht?(44===r.charCodeAt(ti)?(a=Lt,ti++):(a=ht,0===ii&&f(_t)),a!==ht?(ei=o,i=se(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);return n!==ht?(o=ti,i=N(),i!==ht&&(ei=o,i=se(i)),o=i,o!==ht?(n=[n,o],e=n):(ti=e,e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=sn(e)),t=e}function N(){var t,e,n,o,i,a,s,u;return t=ti,e=tt(),e!==ht?(n=z(),n!==ht?(o=tt(),o!==ht?(61===r.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&f(Nt)),i!==ht?(a=tt(),a!==ht?(s=W(),s!==ht?(u=tt(),u!==ht?(ei=t,e=un(n,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function z(){var t;return ii++,r.substr(ti,5).toLowerCase()===ln?(t=r.substr(ti,5),ti+=5):(t=ht,0===ii&&f(fn)),t===ht&&(r.substr(ti,5).toLowerCase()===dn?(t=r.substr(ti,5),ti+=5):(t=ht,0===ii&&f(hn)),t===ht&&(r.substr(ti,2).toLowerCase()===pn?(t=r.substr(ti,2),ti+=2):(t=ht,0===ii&&f(gn)),t===ht&&(r.substr(ti,3).toLowerCase()===mn?(t=r.substr(ti,3),ti+=3):(t=ht,0===ii&&f(bn)),t===ht&&(r.substr(ti,9).toLowerCase()===xn?(t=r.substr(ti,9),ti+=9):(t=ht,0===ii&&f(yn)),t===ht&&(r.substr(ti,10).toLowerCase()===vn?(t=r.substr(ti,10),ti+=10):(t=ht,0===ii&&f(wn)),t===ht&&(r.substr(ti,9).toLowerCase()===Cn?(t=r.substr(ti,9),ti+=9):(t=ht,0===ii&&f(An)),t===ht&&(r.substr(ti,10).toLowerCase()===kn?(t=r.substr(ti,10),ti+=10):(t=ht,0===ii&&f(Tn)),t===ht&&(r.substr(ti,11).toLowerCase()===Ln?(t=r.substr(ti,11),ti+=11):(t=ht,0===ii&&f(_n)),t===ht&&(r.substr(ti,12).toLowerCase()===Sn?(t=r.substr(ti,12),ti+=12):(t=ht,0===ii&&f(En)),t===ht&&(r.substr(ti,12).toLowerCase()===Bn?(t=r.substr(ti,12),ti+=12):(t=ht,0===ii&&f(Fn)),t===ht&&(r.substr(ti,13).toLowerCase()===jn?(t=r.substr(ti,13),ti+=13):(t=ht,0===ii&&f(Pn)),t===ht&&(r.substr(ti,12).toLowerCase()===Dn?(t=r.substr(ti,12),ti+=12):(t=ht,0===ii&&f(In)),t===ht&&(r.substr(ti,13).toLowerCase()===Mn?(t=r.substr(ti,13),ti+=13):(t=ht,0===ii&&f(On)),t===ht&&(r.substr(ti,14).toLowerCase()===Nn?(t=r.substr(ti,14),ti+=14):(t=ht,0===ii&&f(zn)),t===ht&&(r.substr(ti,15).toLowerCase()===Hn?(t=r.substr(ti,15),ti+=15):(t=ht,0===ii&&f(Rn)),t===ht&&(r.substr(ti,7).toLowerCase()===Wn?(t=r.substr(ti,7),ti+=7):(t=ht,0===ii&&f(Gn)),t===ht&&(r.substr(ti,5).toLowerCase()===qn?(t=r.substr(ti,5),ti+=5):(t=ht,0===ii&&f(Vn))))))))))))))))))),ii--,t===ht&&(ht,0===ii&&f(cn)),t}function H(){var t,e,n,o;return ii++,t=ti,34===r.charCodeAt(ti)?(e=Un,ti++):(e=ht,0===ii&&f(Kn)),e!==ht?(n=R(),n!==ht?(34===r.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&f(Kn)),o!==ht?(ei=t,e=Zn(n),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),ii--,t===ht&&(e=ht,0===ii&&f(Xn)),t}function R(){var t,e,n,o;for(t=[],e=ti,n=ti,ii++,34===r.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&f(Kn)),ii--,o===ht?n=void 0:(ti=n,n=ht),n!==ht?(r.substr(ti,2)===Yn?(o=Yn,ti+=2):(o=ht,0===ii&&f($n)),o===ht&&(r.length>ti?(o=r.charAt(ti),ti++):(o=ht,0===ii&&f(Jn))),o!==ht?(ei=e,n=Qn(o),e=n):(ti=e,e=ht)):(ti=e,e=ht);e!==ht;)t.push(e),e=ti,n=ti,ii++,34===r.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&f(Kn)),ii--,o===ht?n=void 0:(ti=n,n=ht),n!==ht?(r.substr(ti,2)===Yn?(o=Yn,ti+=2):(o=ht,0===ii&&f($n)),o===ht&&(r.length>ti?(o=r.charAt(ti),ti++):(o=ht,0===ii&&f(Jn))),o!==ht?(ei=e,n=Qn(o),e=n):(ti=e,e=ht)):(ti=e,e=ht);return t}function W(){var t;return ii++,t=G(),t===ht&&(t=H()),ii--,t===ht&&(ht,0===ii&&f(to)),t}function G(){var t,e,n;if(t=ti,e=[],eo.test(r.charAt(ti))?(n=r.charAt(ti),ti++):(n=ht,0===ii&&f(ro)),n!==ht)for(;n!==ht;)e.push(n),eo.test(r.charAt(ti))?(n=r.charAt(ti),ti++):(n=ht,0===ii&&f(ro));else e=ht;return e!==ht&&(ei=t,e=no(e)),t=e}function q(){var t,e;return ii++,t=ti,io.test(r.charAt(ti))?(e=r.charAt(ti),ti++):(e=ht,0===ii&&f(ao)),e!==ht&&(ei=t,e=Qn(e)),t=e,ii--,t===ht&&(e=ht,0===ii&&f(oo)),t}function V(){var t,e;return ii++,t=ti,uo.test(r.charAt(ti))?(e=r.charAt(ti),ti++):(e=ht,0===ii&&f(co)),e!==ht&&(ei=t,e=Qn(e)),t=e,ii--,t===ht&&(e=ht,0===ii&&f(so)),t}function X(){var t;return r.substr(ti,2)===lo?(t=lo,ti+=2):(t=ht,0===ii&&f(fo)),t}function U(){var t;return r.substr(ti,2)===ho?(t=ho,ti+=2):(t=ht,0===ii&&f(po)),t}function K(){var t,e,n;return t=ti,e=ti,ii++,r.substr(ti,2)===ho?(n=ho,ti+=2):(n=ht,0===ii&&f(po)),ii--,n===ht?e=void 0:(ti=e,e=ht),e!==ht?(r.length>ti?(n=r.charAt(ti),ti++):(n=ht,0===ii&&f(Jn)),n!==ht?(ei=t,e=Qn(n),t=e):(ti=t,t=ht)):(ti=t,t=ht),t}function Z(){var t,e,r,n;if(t=ti,(e=X())!==ht){for(r=[],n=K();n!==ht;)r.push(n),n=K();r!==ht?(n=U(),n!==ht?(ei=t,e=go(e,r,n),t=e):(ti=t,t=ht)):(ti=t,t=ht)}else ti=t,t=ht;return t}function Y(){var t;return r.substr(ti,2)===mo?(t=mo,ti+=2):(t=ht,0===ii&&f(bo)),t===ht&&(35===r.charCodeAt(ti)?(t=xo,ti++):(t=ht,0===ii&&f(yo))),t}function $(){var t;return vo.test(r.charAt(ti))?(t=r.charAt(ti),ti++):(t=ht,0===ii&&f(wo)),t}function J(){var t,e,r,n;if(t=ti,(e=Y())!==ht){for(r=[],n=$();n!==ht;)r.push(n),n=$();r!==ht?(ei=t,e=Co(e,r),t=e):(ti=t,t=ht)}else ti=t,t=ht;return t}function Q(){var t;return ii++,t=J(),t===ht&&(t=Z()),ii--,t===ht&&(ht,0===ii&&f(Ao)),t}function tt(){var t,e;for(t=[],e=q(),e===ht&&(e=V())===ht&&(e=Q());e!==ht;)t.push(e),(e=q())===ht&&(e=V())===ht&&(e=Q());return t}function et(){var t,e;return ii++,t=ti,e=rt(),e!==ht&&(ei=t,e=To(e)),t=e,t===ht&&(t=ti,e=nt(),e!==ht&&(ei=t,e=Lo(e)),t=e),ii--,t===ht&&(e=ht,0===ii&&f(ko)),t}function rt(){var t,e,n,o;return t=ti,34===r.charCodeAt(ti)?(e=Un,ti++):(e=ht,0===ii&&f(Kn)),e!==ht?(n=nt(),n!==ht?(34===r.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&f(Kn)),o!==ht?(ei=t,e=_o(n),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function nt(){var t;return t=it(),t===ht&&(t=ot()),t}function ot(){var t,e,n;if(t=ti,e=[],So.test(r.charAt(ti))?(n=r.charAt(ti),ti++):(n=ht,0===ii&&f(Eo)),n!==ht)for(;n!==ht;)e.push(n),So.test(r.charAt(ti))?(n=r.charAt(ti),ti++):(n=ht,0===ii&&f(Eo));else e=ht;return e!==ht&&(ei=t,e=Bo(e)),t=e}function it(){var t,e,n,o,i;return t=ti,e=ti,n=ot(),n!==ht?(46===r.charCodeAt(ti)?(o=Fo,ti++):(o=ht,0===ii&&f(jo)),o!==ht?(i=ot(),i!==ht?(n=[n,o,i],e=n):(ti=e,e=ht)):(ti=e,e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=Po(e)),t=e}function at(){var t,e;return ii++,t=ti,e=st(),e!==ht&&(ei=t,e=Io(e)),t=e,t===ht&&(t=ti,e=ut(),e!==ht&&(ei=t,e=Mo(e)),t=e),ii--,t===ht&&(e=ht,0===ii&&f(Do)),t}function st(){var t,e,n,o;return t=ti,34===r.charCodeAt(ti)?(e=Un,ti++):(e=ht,0===ii&&f(Kn)),e!==ht?(n=ut(),n!==ht?(34===r.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&f(Kn)),o!==ht?(ei=t,e=To(n),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function ut(){var t;return r.substr(ti,4).toLowerCase()===Oo?(t=r.substr(ti,4),ti+=4):(t=ht,0===ii&&f(No)),t===ht&&(r.substr(ti,5).toLowerCase()===zo?(t=r.substr(ti,5),ti+=5):(t=ht,0===ii&&f(Ho)),t===ht&&(r.substr(ti,2).toLowerCase()===Ro?(t=r.substr(ti,2),ti+=2):(t=ht,0===ii&&f(Wo)),t===ht&&(r.substr(ti,3).toLowerCase()===Go?(t=r.substr(ti,3),ti+=3):(t=ht,0===ii&&f(qo)),t===ht&&(48===r.charCodeAt(ti)?(t=Vo,ti++):(t=ht,0===ii&&f(Xo)),t===ht&&(49===r.charCodeAt(ti)?(t=Uo,ti++):(t=ht,0===ii&&f(Ko))))))),t}function ct(){var t;return ii++,t=lt(),t===ht&&(t=ft()),ii--,t===ht&&(ht,0===ii&&f(Zo)),t}function lt(){var t,e,n,o;return t=ti,34===r.charCodeAt(ti)?(e=Un,ti++):(e=ht,0===ii&&f(Kn)),e!==ht?(n=ft(),n!==ht?(34===r.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&f(Kn)),o!==ht?(ei=t,e=To(n),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function ft(){var t,e;return t=ti,e=nt(),e!==ht&&(ei=t,e=Yo(e)),t=e,t===ht&&(t=ti,r.substr(ti,4).toLowerCase()===$o?(e=r.substr(ti,4),ti+=4):(e=ht,0===ii&&f(Jo)),e!==ht&&(ei=t,e=Qo(e)),t=e),t}n=void 0!==n?n:{};var dt,ht={},pt={program:p},gt=p,mt="{",bt=a("{",!1),xt="}",yt=a("}",!1),vt=function(t,e){e.entities=ai.checkForUndeclaredEntities(e.entities,e.arcs);var r=e;return r=si({meta:ai.getMetaInfo(e.options,e.arcs)},r),t.length>0&&(r=si({precomment:t},r)),r},wt="msc",Ct=a("msc",!0),At="xu",kt=a("xu",!0),Tt=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},Lt=",",_t=a(",",!1),St=function(t){return t},Et=";",Bt=a(";",!1),Ft=function(t){return ai.optionArray2Object(t[0].concat(t[1]))},jt=u("option"),Pt="hscale",Dt=a("hscale",!0),It="arcgradient",Mt=a("arcgradient",!0),Ot="=",Nt=a("=",!1),zt=function(t,e){return ai.nameValue2Option(t,e)},Ht="width",Rt=a("width",!0),Wt="wordwraparcs",Gt=a("wordwraparcs",!0),qt=function(t,e){return ai.nameValue2Option(t,ai.flattenBoolean(e))},Vt="wordwrapentities",Xt=a("wordwrapentities",!0),Ut="wordwrapboxes",Kt=a("wordwrapboxes",!0),Zt="watermark",Yt=a("watermark",!0),$t=function(t){return t},Jt=function(t){return t[0].concat(t[1])},Qt=u("entity"),te="[",ee=a("[",!1),re="]",ne=a("]",!1),oe=function(t,e){return e},ie=function(t,e){return si({name:t},e)},ae=function(t,e){return ai.isMscGenKeyword(t)&&i("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),si({name:t},e)},se=function(t){return t},ue=function(t){return t[0].concat(t[1])},ce=function(t,e){return e},le=function(t,e){return si(t,e)},fe=function(t){return{kind:t}},de=function(t,e,r){return{kind:e,from:t,to:r,location:o()}},he="*",pe=a("*",!1),ge=function(t,e){return{kind:t,from:"*",to:e,location:o()}},me=function(t,e){return{kind:e,from:t,to:"*",location:o()}},be=function(t,e,r,n){return n},xe=function(t,e,r,n,i){return si({kind:e,from:t,to:r,location:o(),arcs:i},n)},ye=u("empty row"),ve="|||",we=a("|||",!1),Ce="...",Ae=a("...",!1),ke=u("---"),Te="---",Le=a("---",!1),_e=function(t){return t.toLowerCase()},Se=u("bi-directional arrow"),Ee="--",Be=a("--",!1),Fe="<->",je=a("<->",!1),Pe="==",De=a("==",!1),Ie="<<=>>",Me=a("<<=>>",!1),Oe="<=>",Ne=a("<=>",!1),ze="..",He=a("..",!1),Re="<<>>",We=a("<<>>",!1),Ge="::",qe=a("::",!1),Ve="<:>",Xe=a("<:>",!1),Ue=u("left to right arrow"),Ke="->",Ze=a("->",!1),Ye="=>>",$e=a("=>>",!1),Je="=>",Qe=a("=>",!1),tr=">>",er=a(">>",!1),rr=":>",nr=a(":>",!1),or="-x",ir=a("-x",!0),ar=u("right to left arrow"),sr="<-",ur=a("<-",!1),cr="<<=",lr=a("<<=",!1),fr="<=",dr=a("<=",!1),hr="<<",pr=a("<<",!1),gr="<:",mr=a("<:",!1),br="x-",xr=a("x-",!0),yr=u("box"),vr="note",wr=a("note",!0),Cr="abox",Ar=a("abox",!0),kr="rbox",Tr=a("rbox",!0),Lr="box",_r=a("box",!0),Sr=u("inline expression"),Er="alt",Br=a("alt",!0),Fr="else",jr=a("else",!0),Pr="opt",Dr=a("opt",!0),Ir="break",Mr=a("break",!0),Or="par",Nr=a("par",!0),zr="seq",Hr=a("seq",!0),Rr="strict",Wr=a("strict",!0),Gr="neg",qr=a("neg",!0),Vr="critical",Xr=a("critical",!0),Ur="ignore",Kr=a("ignore",!0),Zr="consider",Yr=a("consider",!0),$r="assert",Jr=a("assert",!0),Qr="loop",tn=a("loop",!0),en="ref",rn=a("ref",!0),nn="exc",on=a("exc",!0),an=function(t){return t.toLowerCase()},sn=function(t){return ai.optionArray2Object(t[0].concat(t[1]))},un=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},cn=u("attribute name"),ln="label",fn=a("label",!0),dn="idurl",hn=a("idurl",!0),pn="id",gn=a("id",!0),mn="url",bn=a("url",!0),xn="linecolor",yn=a("linecolor",!0),vn="linecolour",wn=a("linecolour",!0),Cn="textcolor",An=a("textcolor",!0),kn="textcolour",Tn=a("textcolour",!0),Ln="textbgcolor",_n=a("textbgcolor",!0),Sn="textbgcolour",En=a("textbgcolour",!0),Bn="arclinecolor",Fn=a("arclinecolor",!0),jn="arclinecolour",Pn=a("arclinecolour",!0),Dn="arctextcolor",In=a("arctextcolor",!0),Mn="arctextcolour",On=a("arctextcolour",!0),Nn="arctextbgcolor",zn=a("arctextbgcolor",!0),Hn="arctextbgcolour",Rn=a("arctextbgcolour",!0),Wn="arcskip",Gn=a("arcskip",!0),qn="title",Vn=a("title",!0),Xn=u("double quoted string"),Un='"',Kn=a('"',!1),Zn=function(t){return t.join("")},Yn='\\"',$n=a('\\"',!1),Jn=function(){return{type:"any"}}(),Qn=function(t){return t},to=u("identifier"),eo=/^[A-Za-z_0-9]/,ro=s([["A","Z"],["a","z"],"_",["0","9"]],!1,!1),no=function(t){return t.join("")},oo=u("whitespace"),io=/^[ \t]/,ao=s([" ","\t"],!1,!1),so=u("lineend"),uo=/^[\r\n]/,co=s(["\r","\n"],!1,!1),lo="/*",fo=a("/*",!1),ho="*/",po=a("*/",!1),go=function(t,e,r){return t+e.join("")+r},mo="//",bo=a("//",!1),xo="#",yo=a("#",!1),vo=/^[^\r\n]/,wo=s(["\r","\n"],!0,!1),Co=function(t,e){return t+e.join("")},Ao=u("comment"),ko=u("number"),To=function(t){return t},Lo=function(t){return t.toString()},_o=function(t){return t.toString()},So=/^[0-9]/,Eo=s([["0","9"]],!1,!1),Bo=function(t){return parseInt(t.join(""),10)},Fo=".",jo=a(".",!1),Po=function(t){return parseFloat(t.join(""))},Do=u("boolean"),Io=function(t){return t},Mo=function(t){return t.toString()},Oo="true",No=a("true",!0),zo="false",Ho=a("false",!0),Ro="on",Wo=a("on",!0),Go="off",qo=a("off",!0),Vo="0",Xo=a("0",!1),Uo="1",Ko=a("1",!1),Zo=u("size"),Yo=function(t){return t.toString()},$o="auto",Jo=a("auto",!0),Qo=function(t){return t.toLowerCase()},ti=0,ei=0,ri=[{line:1,column:1}],ni=0,oi=[],ii=0;if("startRule"in n){if(!(n.startRule in pt))throw new Error("Can't start parsing from rule \""+n.startRule+'".');gt=pt[n.startRule]}var ai=e("./parserHelpers"),si=e("../lib/lodash/lodash.custom").assign;if((dt=gt())!==ht&&ti===r.length)return dt;throw dt!==ht&&ti<r.length&&f(function(){return{type:"end"}}()),h(oi,ni<r.length?r.charAt(ni):null,ni<r.length?l(ni,ni+1):l(ni,ni))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return a[t.type](t)}var a={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:r}}),function(t,e){"function"==typeof r&&r.amd?r("parse/msgennyparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(0,function(){"use strict";function t(e,r,n,o){this.message=e,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(r,n){function o(t,e){return{type:"literal",text:t,ignoreCase:e}}function i(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function a(t){return{type:"other",description:t}}function s(t){var e,n=lo[t];if(n)return n;for(e=t-1;!lo[e];)e--;for(n=lo[e],n={line:n.line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return lo[t]=n,n}function u(t,e){var r=s(t),n=s(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function c(t){uo<fo||(uo>fo&&(fo=uo,ho=[]),ho.push(t))}function l(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function f(){var t,e,r,n;return t=uo,e=Z(),e!==ft?(r=d(),r!==ft?(n=Z(),n!==ft?(co=t,e=pt(e,r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function d(){var t,e,r,n;return t=uo,e=h(),e===ft&&(e=null),e!==ft?(r=g(),r===ft&&(r=null),r!==ft?(n=b(),n===ft&&(n=null),n!==ft?(co=t,e=gt(e,r,n),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function h(){var t,e,n,o,i,a;for(t=uo,e=uo,n=[],o=uo,i=p(),i!==ft?(44===r.charCodeAt(uo)?(a=mt,uo++):(a=ft,0===po&&c(bt)),a!==ft?(co=o,i=xt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);o!==ft;)n.push(o),o=uo,i=p(),i!==ft?(44===r.charCodeAt(uo)?(a=mt,uo++):(a=ft,0===po&&c(bt)),a!==ft?(co=o,i=xt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);return n!==ft?(o=uo,i=p(),i!==ft?(59===r.charCodeAt(uo)?(a=yt,uo++):(a=ft,0===po&&c(vt)),a!==ft?(co=o,i=xt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft),o!==ft?(n=[n,o],e=n):(uo=e,e=ft)):(uo=e,e=ft),e!==ft&&(co=t,e=wt(e)),t=e}function p(){var t,e,n,o,i,a,s,u;return t=uo,e=Z(),e!==ft?(r.substr(uo,6).toLowerCase()===Ct?(n=r.substr(uo,6),uo+=6):(n=ft,0===po&&c(At)),n===ft&&(r.substr(uo,11).toLowerCase()===kt?(n=r.substr(uo,11),uo+=11):(n=ft,0===po&&c(Tt))),n!==ft?(o=Z(),o!==ft?(61===r.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&c(_t)),i!==ft?(a=Z(),a!==ft?(s=Y(),s!==ft?(u=Z(),u!==ft?(co=t,e=St(n,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=Z(),e!==ft?(r.substr(uo,5).toLowerCase()===Et?(n=r.substr(uo,5),uo+=5):(n=ft,0===po&&c(Bt)),n!==ft?(o=Z(),o!==ft?(61===r.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&c(_t)),i!==ft?(a=Z(),a!==ft?(s=ot(),s!==ft?(u=Z(),u!==ft?(co=t,e=St(n,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=Z(),e!==ft?(r.substr(uo,12).toLowerCase()===Ft?(n=r.substr(uo,12),uo+=12):(n=ft,0===po&&c(jt)),n!==ft?(o=Z(),o!==ft?(61===r.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&c(_t)),i!==ft?(a=Z(),a!==ft?(s=et(),s!==ft?(u=Z(),u!==ft?(co=t,e=Pt(n,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=Z(),e!==ft?(r.substr(uo,16).toLowerCase()===Dt?(n=r.substr(uo,16),uo+=16):(n=ft,0===po&&c(It)),n!==ft?(o=Z(),o!==ft?(61===r.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&c(_t)),i!==ft?(a=Z(),a!==ft?(s=et(),s!==ft?(u=Z(),u!==ft?(co=t,e=Pt(n,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=Z(),e!==ft?(r.substr(uo,13).toLowerCase()===Mt?(n=r.substr(uo,13),uo+=13):(n=ft,0===po&&c(Ot)),n!==ft?(o=Z(),o!==ft?(61===r.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&c(_t)),i!==ft?(a=Z(),a!==ft?(s=et(),s!==ft?(u=Z(),u!==ft?(co=t,e=Pt(n,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=Z(),e!==ft?(r.substr(uo,9).toLowerCase()===Nt?(n=r.substr(uo,9),uo+=9):(n=ft,0===po&&c(zt)),n!==ft?(o=Z(),o!==ft?(61===r.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&c(_t)),i!==ft?(a=Z(),a!==ft?(s=D(),s!==ft?(u=Z(),u!==ft?(co=t,e=St(n,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)))))),t}function g(){var t,e,n,o,i,a;for(t=uo,e=uo,n=[],o=uo,i=m(),i!==ft?(44===r.charCodeAt(uo)?(a=mt,uo++):(a=ft,0===po&&c(bt)),a!==ft?(co=o,i=Ht(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);o!==ft;)n.push(o),o=uo,i=m(),i!==ft?(44===r.charCodeAt(uo)?(a=mt,uo++):(a=ft,0===po&&c(bt)),a!==ft?(co=o,i=Ht(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);return n!==ft?(o=uo,i=m(),i!==ft?(59===r.charCodeAt(uo)?(a=yt,uo++):(a=ft,0===po&&c(vt)),a!==ft?(co=o,i=Ht(i),o=i):(uo=o,o=ft)):(uo=o,o=ft),o!==ft?(n=[n,o],e=n):(uo=e,e=ft)):(uo=e,e=ft),e!==ft&&(co=t,e=Rt(e)),t=e}function m(){var t,e,n,o,i,a,s,u,l;return po++,t=uo,e=Z(),e!==ft?(n=N(),n!==ft?(o=Z(),o!==ft?(i=uo,58===r.charCodeAt(uo)?(a=Gt,uo++):(a=ft,0===po&&c(qt)),a!==ft?(s=Z(),s!==ft?(u=P(),u!==ft?(l=Z(),l!==ft?(co=i,a=Vt(n,u),i=a):(uo=i,i=ft)):(uo=i,i=ft)):(uo=i,i=ft)):(uo=i,i=ft),i===ft&&(i=null),i!==ft?(co=t,e=Xt(n,i),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),po--,t===ft&&(e=ft,0===po&&c(Wt)),t}function b(){var t,e,n,o,i;if(t=[],e=uo,n=x(),n!==ft?(o=Z(),o!==ft?(59===r.charCodeAt(uo)?(i=yt,uo++):(i=ft,0===po&&c(vt)),i!==ft?(co=e,n=Ut(n),e=n):(uo=e,e=ft)):(uo=e,e=ft)):(uo=e,e=ft),e!==ft)for(;e!==ft;)t.push(e),e=uo,n=x(),n!==ft?(o=Z(),o!==ft?(59===r.charCodeAt(uo)?(i=yt,uo++):(i=ft,0===po&&c(vt)),i!==ft?(co=e,n=Ut(n),e=n):(uo=e,e=ft)):(uo=e,e=ft)):(uo=e,e=ft);else t=ft;return t}function x(){var t,e,n,o,i,a;for(t=uo,e=uo,n=[],o=uo,i=y(),i!==ft?(44===r.charCodeAt(uo)?(a=mt,uo++):(a=ft,0===po&&c(bt)),a!==ft?(co=o,i=Ut(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);o!==ft;)n.push(o),o=uo,i=y(),i!==ft?(44===r.charCodeAt(uo)?(a=mt,uo++):(a=ft,0===po&&c(bt)),a!==ft?(co=o,i=Ut(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);return n!==ft?(o=uo,i=y(),i!==ft&&(co=o,i=Ut(i)),o=i,o!==ft?(n=[n,o],e=n):(uo=e,e=ft)):(uo=e,e=ft),e!==ft&&(co=t,e=Kt(e)),t=e}function y(){var t;return t=v(),t===ft&&(t=k()),t}function v(){var t,e,n,o,i,a,s;return t=uo,e=uo,n=w(),n!==ft&&(co=e,n=Zt(n)),e=n,e===ft&&(e=uo,n=A(),n!==ft&&(co=e,n=Yt(n)),(e=n)===ft&&(e=uo,n=C(),n!==ft&&(co=e,n=$t(n)),e=n)),e!==ft?(n=uo,58===r.charCodeAt(uo)?(o=Gt,uo++):(o=ft,0===po&&c(qt)),o!==ft?(i=Z(),i!==ft?(a=P(),a!==ft?(s=Z(),s!==ft?(co=n,o=Jt(e,a),n=o):(uo=n,n=ft)):(uo=n,n=ft)):(uo=n,n=ft)):(uo=n,n=ft),n===ft&&(n=null),n!==ft?(co=t,e=Qt(e,n),t=e):(uo=t,t=ft)):(uo=t,t=ft),t}function w(){var t,e,r,n;return t=uo,e=Z(),e!==ft?(r=T(),r!==ft?(n=Z(),n!==ft?(co=t,e=te(r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function C(){var t,e,r,n;return t=uo,e=Z(),e!==ft?(r=L(),r!==ft?(n=Z(),n!==ft?(co=t,e=te(r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function A(){var t,e,n,o,i,a,s,u;return t=uo,e=Z(),e!==ft?(n=N(),n!==ft?(o=Z(),o!==ft?(i=_(),i!==ft?(a=Z(),a!==ft?(s=N(),s!==ft?(u=Z(),u!==ft?(co=t,e=ee(n,i,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=Z(),e!==ft?(42===r.charCodeAt(uo)?(n=re,uo++):(n=ft,0===po&&c(ne)),n!==ft?(o=Z(),o!==ft?(i=B(),i!==ft?(a=Z(),a!==ft?(s=N(),s!==ft?(u=Z(),u!==ft?(co=t,e=oe(i,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=Z(),e!==ft?(n=N(),n!==ft?(o=Z(),o!==ft?(i=E(),i!==ft?(a=Z(),a!==ft?(42===r.charCodeAt(uo)?(s=re,uo++):(s=ft,0===po&&c(ne)),s!==ft?(u=Z(),u!==ft?(co=t,e=ie(n,i),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=Z(),e!==ft?(n=N(),n!==ft?(o=Z(),o!==ft?(i=S(),i!==ft?(a=Z(),a!==ft?(42===r.charCodeAt(uo)?(s=re,uo++):(s=ft,0===po&&c(ne)),s!==ft?(u=Z(),u!==ft?(co=t,e=ie(n,i),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)))),t}function k(){var t,e,n,o,i,a,s,u,l,f,d,h,p,g,m;return t=uo,e=Z(),e!==ft?(n=N(),n!==ft?(o=Z(),o!==ft?(i=j(),i!==ft?(a=Z(),a!==ft?(s=N(),s!==ft?(u=Z(),u!==ft?(l=uo,58===r.charCodeAt(uo)?(f=Gt,uo++):(f=ft,0===po&&c(qt)),f!==ft?(d=Z(),d!==ft?(h=P(),h!==ft?(p=Z(),p!==ft?(co=l,f=ae(n,i,s,h),l=f):(uo=l,l=ft)):(uo=l,l=ft)):(uo=l,l=ft)):(uo=l,l=ft),l===ft&&(l=null),l!==ft?(123===r.charCodeAt(uo)?(f=se,uo++):(f=ft,0===po&&c(ue)),f!==ft?(d=Z(),d!==ft?(h=b(),h===ft&&(h=null),h!==ft?(p=Z(),p!==ft?(125===r.charCodeAt(uo)?(g=ce,uo++):(g=ft,0===po&&c(le)),g!==ft?(m=Z(),m!==ft?(co=t,e=fe(n,i,s,l,h),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function T(){var t;return po++,r.substr(uo,3)===he?(t=he,uo+=3):(t=ft,0===po&&c(pe)),t===ft&&(r.substr(uo,3)===ge?(t=ge,uo+=3):(t=ft,0===po&&c(me))),po--,t===ft&&(ft,0===po&&c(de)),t}function L(){var t;return po++,r.substr(uo,3)===xe?(t=xe,uo+=3):(t=ft,0===po&&c(ye)),po--,t===ft&&(ft,0===po&&c(be)),t}function _(){var t,e;return t=uo,e=S(),e===ft&&(e=E())===ft&&(e=B())===ft&&(e=F()),e!==ft&&(co=t,e=ve(e)),t=e}function S(){var t;return po++,r.substr(uo,2)===Ce?(t=Ce,uo+=2):(t=ft,0===po&&c(Ae)),t===ft&&(r.substr(uo,3)===ke?(t=ke,uo+=3):(t=ft,0===po&&c(Te)),t===ft&&(r.substr(uo,2)===Le?(t=Le,uo+=2):(t=ft,0===po&&c(_e)),t===ft&&(r.substr(uo,5)===Se?(t=Se,uo+=5):(t=ft,0===po&&c(Ee)),t===ft&&(r.substr(uo,3)===Be?(t=Be,uo+=3):(t=ft,0===po&&c(Fe)),t===ft&&(r.substr(uo,2)===je?(t=je,uo+=2):(t=ft,0===po&&c(Pe)),t===ft&&(r.substr(uo,4)===De?(t=De,uo+=4):(t=ft,0===po&&c(Ie)),t===ft&&(r.substr(uo,2)===Me?(t=Me,uo+=2):(t=ft,0===po&&c(Oe)),t===ft&&(r.substr(uo,3)===Ne?(t=Ne,uo+=3):(t=ft,0===po&&c(ze)))))))))),po--,t===ft&&(ft,0===po&&c(we)),t}function E(){var t;return po++,r.substr(uo,2)===Re?(t=Re,uo+=2):(t=ft,0===po&&c(We)),t===ft&&(r.substr(uo,3)===Ge?(t=Ge,uo+=3):(t=ft,0===po&&c(qe)),t===ft&&(r.substr(uo,2)===Ve?(t=Ve,uo+=2):(t=ft,0===po&&c(Xe)),t===ft&&(r.substr(uo,2)===Ue?(t=Ue,uo+=2):(t=ft,0===po&&c(Ke)),t===ft&&(r.substr(uo,2)===Ze?(t=Ze,uo+=2):(t=ft,0===po&&c(Ye)),
t===ft&&(r.substr(uo,2).toLowerCase()===$e?(t=r.substr(uo,2),uo+=2):(t=ft,0===po&&c(Je))))))),po--,t===ft&&(ft,0===po&&c(He)),t}function B(){var t;return po++,r.substr(uo,2)===tr?(t=tr,uo+=2):(t=ft,0===po&&c(er)),t===ft&&(r.substr(uo,3)===rr?(t=rr,uo+=3):(t=ft,0===po&&c(nr)),t===ft&&(r.substr(uo,2)===or?(t=or,uo+=2):(t=ft,0===po&&c(ir)),t===ft&&(r.substr(uo,2)===ar?(t=ar,uo+=2):(t=ft,0===po&&c(sr)),t===ft&&(r.substr(uo,2)===ur?(t=ur,uo+=2):(t=ft,0===po&&c(cr)),t===ft&&(r.substr(uo,2).toLowerCase()===lr?(t=r.substr(uo,2),uo+=2):(t=ft,0===po&&c(fr))))))),po--,t===ft&&(ft,0===po&&c(Qe)),t}function F(){var t;return po++,r.substr(uo,4).toLowerCase()===hr?(t=r.substr(uo,4),uo+=4):(t=ft,0===po&&c(pr)),t===ft&&(r.substr(uo,4).toLowerCase()===gr?(t=r.substr(uo,4),uo+=4):(t=ft,0===po&&c(mr)),t===ft&&(r.substr(uo,4).toLowerCase()===br?(t=r.substr(uo,4),uo+=4):(t=ft,0===po&&c(xr)),t===ft&&(r.substr(uo,3).toLowerCase()===yr?(t=r.substr(uo,3),uo+=3):(t=ft,0===po&&c(vr))))),po--,t===ft&&(ft,0===po&&c(dr)),t}function j(){var t,e;return po++,t=uo,r.substr(uo,3).toLowerCase()===Cr?(e=r.substr(uo,3),uo+=3):(e=ft,0===po&&c(Ar)),e===ft&&(r.substr(uo,4).toLowerCase()===kr?(e=r.substr(uo,4),uo+=4):(e=ft,0===po&&c(Tr)),e===ft&&(r.substr(uo,3).toLowerCase()===Lr?(e=r.substr(uo,3),uo+=3):(e=ft,0===po&&c(_r)),e===ft&&(r.substr(uo,5).toLowerCase()===Sr?(e=r.substr(uo,5),uo+=5):(e=ft,0===po&&c(Er)),e===ft&&(r.substr(uo,3).toLowerCase()===Br?(e=r.substr(uo,3),uo+=3):(e=ft,0===po&&c(Fr)),e===ft&&(r.substr(uo,3).toLowerCase()===jr?(e=r.substr(uo,3),uo+=3):(e=ft,0===po&&c(Pr)),e===ft&&(r.substr(uo,6).toLowerCase()===Dr?(e=r.substr(uo,6),uo+=6):(e=ft,0===po&&c(Ir)),e===ft&&(r.substr(uo,3).toLowerCase()===Mr?(e=r.substr(uo,3),uo+=3):(e=ft,0===po&&c(Or)),e===ft&&(r.substr(uo,8).toLowerCase()===Nr?(e=r.substr(uo,8),uo+=8):(e=ft,0===po&&c(zr)),e===ft&&(r.substr(uo,6).toLowerCase()===Hr?(e=r.substr(uo,6),uo+=6):(e=ft,0===po&&c(Rr)),e===ft&&(r.substr(uo,8).toLowerCase()===Wr?(e=r.substr(uo,8),uo+=8):(e=ft,0===po&&c(Gr)),e===ft&&(r.substr(uo,6).toLowerCase()===qr?(e=r.substr(uo,6),uo+=6):(e=ft,0===po&&c(Vr)),e===ft&&(r.substr(uo,4).toLowerCase()===Xr?(e=r.substr(uo,4),uo+=4):(e=ft,0===po&&c(Ur)),e===ft&&(r.substr(uo,3).toLowerCase()===Kr?(e=r.substr(uo,3),uo+=3):(e=ft,0===po&&c(Zr)),e===ft&&(r.substr(uo,3).toLowerCase()===Yr?(e=r.substr(uo,3),uo+=3):(e=ft,0===po&&c($r)))))))))))))))),e!==ft&&(co=t,e=Jr(e)),t=e,po--,t===ft&&(e=ft,0===po&&c(wr)),t}function P(){var t;return t=D(),t===ft&&(t=M()),t}function D(){var t,e,n,o;return po++,t=uo,34===r.charCodeAt(uo)?(e=tn,uo++):(e=ft,0===po&&c(en)),e!==ft?(n=I(),n!==ft?(34===r.charCodeAt(uo)?(o=tn,uo++):(o=ft,0===po&&c(en)),o!==ft?(co=t,e=rn(n),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),po--,t===ft&&(e=ft,0===po&&c(Qr)),t}function I(){var t,e,n,o;for(t=[],e=uo,n=uo,po++,34===r.charCodeAt(uo)?(o=tn,uo++):(o=ft,0===po&&c(en)),po--,o===ft?n=void 0:(uo=n,n=ft),n!==ft?(r.substr(uo,2)===nn?(o=nn,uo+=2):(o=ft,0===po&&c(on)),o===ft&&(r.length>uo?(o=r.charAt(uo),uo++):(o=ft,0===po&&c(an))),o!==ft?(co=e,n=sn(o),e=n):(uo=e,e=ft)):(uo=e,e=ft);e!==ft;)t.push(e),e=uo,n=uo,po++,34===r.charCodeAt(uo)?(o=tn,uo++):(o=ft,0===po&&c(en)),po--,o===ft?n=void 0:(uo=n,n=ft),n!==ft?(r.substr(uo,2)===nn?(o=nn,uo+=2):(o=ft,0===po&&c(on)),o===ft&&(r.length>uo?(o=r.charAt(uo),uo++):(o=ft,0===po&&c(an))),o!==ft?(co=e,n=sn(o),e=n):(uo=e,e=ft)):(uo=e,e=ft);return t}function M(){var t,e;return t=uo,e=O(),e!==ft&&(co=t,e=un(e)),t=e}function O(){var t,e,n,o;for(t=[],e=uo,n=uo,po++,44===r.charCodeAt(uo)?(o=mt,uo++):(o=ft,0===po&&c(bt)),o===ft&&(59===r.charCodeAt(uo)?(o=yt,uo++):(o=ft,0===po&&c(vt)),o===ft&&(123===r.charCodeAt(uo)?(o=se,uo++):(o=ft,0===po&&c(ue)))),po--,o===ft?n=void 0:(uo=n,n=ft),n!==ft?(r.length>uo?(o=r.charAt(uo),uo++):(o=ft,0===po&&c(an)),o!==ft?(co=e,n=sn(o),e=n):(uo=e,e=ft)):(uo=e,e=ft);e!==ft;)t.push(e),e=uo,n=uo,po++,44===r.charCodeAt(uo)?(o=mt,uo++):(o=ft,0===po&&c(bt)),o===ft&&(59===r.charCodeAt(uo)?(o=yt,uo++):(o=ft,0===po&&c(vt)),o===ft&&(123===r.charCodeAt(uo)?(o=se,uo++):(o=ft,0===po&&c(ue)))),po--,o===ft?n=void 0:(uo=n,n=ft),n!==ft?(r.length>uo?(o=r.charAt(uo),uo++):(o=ft,0===po&&c(an)),o!==ft?(co=e,n=sn(o),e=n):(uo=e,e=ft)):(uo=e,e=ft);return t}function N(){var t,e,n;if(po++,t=uo,e=[],ln.test(r.charAt(uo))?(n=r.charAt(uo),uo++):(n=ft,0===po&&c(fn)),n!==ft)for(;n!==ft;)e.push(n),ln.test(r.charAt(uo))?(n=r.charAt(uo),uo++):(n=ft,0===po&&c(fn));else e=ft;return e!==ft&&(co=t,e=dn(e)),t=e,t===ft&&(t=D()),po--,t===ft&&(e=ft,0===po&&c(cn)),t}function z(){var t,e;return po++,t=uo,pn.test(r.charAt(uo))?(e=r.charAt(uo),uo++):(e=ft,0===po&&c(gn)),e!==ft&&(co=t,e=sn(e)),t=e,po--,t===ft&&(e=ft,0===po&&c(hn)),t}function H(){var t,e;return po++,t=uo,bn.test(r.charAt(uo))?(e=r.charAt(uo),uo++):(e=ft,0===po&&c(xn)),e!==ft&&(co=t,e=sn(e)),t=e,po--,t===ft&&(e=ft,0===po&&c(mn)),t}function R(){var t;return r.substr(uo,2)===yn?(t=yn,uo+=2):(t=ft,0===po&&c(vn)),t}function W(){var t;return r.substr(uo,2)===wn?(t=wn,uo+=2):(t=ft,0===po&&c(Cn)),t}function G(){var t,e,n;return t=uo,e=uo,po++,r.substr(uo,2)===wn?(n=wn,uo+=2):(n=ft,0===po&&c(Cn)),po--,n===ft?e=void 0:(uo=e,e=ft),e!==ft?(r.length>uo?(n=r.charAt(uo),uo++):(n=ft,0===po&&c(an)),n!==ft?(co=t,e=sn(n),t=e):(uo=t,t=ft)):(uo=t,t=ft),t}function q(){var t,e,r,n;if(t=uo,(e=R())!==ft){for(r=[],n=G();n!==ft;)r.push(n),n=G();r!==ft?(n=W(),n!==ft?(co=t,e=An(e,r,n),t=e):(uo=t,t=ft)):(uo=t,t=ft)}else uo=t,t=ft;return t}function V(){var t;return r.substr(uo,2)===kn?(t=kn,uo+=2):(t=ft,0===po&&c(Tn)),t===ft&&(35===r.charCodeAt(uo)?(t=Ln,uo++):(t=ft,0===po&&c(_n))),t}function X(){var t;return Sn.test(r.charAt(uo))?(t=r.charAt(uo),uo++):(t=ft,0===po&&c(En)),t}function U(){var t,e,r,n;if(t=uo,(e=V())!==ft){for(r=[],n=X();n!==ft;)r.push(n),n=X();r!==ft?(co=t,e=Bn(e,r),t=e):(uo=t,t=ft)}else uo=t,t=ft;return t}function K(){var t;return po++,t=U(),t===ft&&(t=q()),po--,t===ft&&(ft,0===po&&c(Fn)),t}function Z(){var t,e;for(t=[],e=z(),e===ft&&(e=H())===ft&&(e=K());e!==ft;)t.push(e),(e=z())===ft&&(e=H())===ft&&(e=K());return t}function Y(){var t,e;return po++,t=uo,e=$(),e!==ft&&(co=t,e=Pn(e)),t=e,t===ft&&(t=uo,e=J(),e!==ft&&(co=t,e=Dn(e)),t=e),po--,t===ft&&(e=ft,0===po&&c(jn)),t}function $(){var t,e,n,o;return t=uo,34===r.charCodeAt(uo)?(e=tn,uo++):(e=ft,0===po&&c(en)),e!==ft?(n=J(),n!==ft?(34===r.charCodeAt(uo)?(o=tn,uo++):(o=ft,0===po&&c(en)),o!==ft?(co=t,e=In(n),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function J(){var t;return t=tt(),t===ft&&(t=Q()),t}function Q(){var t,e,n;if(t=uo,e=[],Mn.test(r.charAt(uo))?(n=r.charAt(uo),uo++):(n=ft,0===po&&c(On)),n!==ft)for(;n!==ft;)e.push(n),Mn.test(r.charAt(uo))?(n=r.charAt(uo),uo++):(n=ft,0===po&&c(On));else e=ft;return e!==ft&&(co=t,e=Nn(e)),t=e}function tt(){var t,e,n,o,i;return t=uo,e=uo,n=Q(),n!==ft?(46===r.charCodeAt(uo)?(o=zn,uo++):(o=ft,0===po&&c(Hn)),o!==ft?(i=Q(),i!==ft?(n=[n,o,i],e=n):(uo=e,e=ft)):(uo=e,e=ft)):(uo=e,e=ft),e!==ft&&(co=t,e=Rn(e)),t=e}function et(){var t,e;return po++,t=uo,e=rt(),e!==ft&&(co=t,e=Gn(e)),t=e,t===ft&&(t=uo,e=nt(),e!==ft&&(co=t,e=qn(e)),t=e),po--,t===ft&&(e=ft,0===po&&c(Wn)),t}function rt(){var t,e,n,o;return t=uo,34===r.charCodeAt(uo)?(e=tn,uo++):(e=ft,0===po&&c(en)),e!==ft?(n=nt(),n!==ft?(34===r.charCodeAt(uo)?(o=tn,uo++):(o=ft,0===po&&c(en)),o!==ft?(co=t,e=Pn(n),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function nt(){var t;return r.substr(uo,4).toLowerCase()===Vn?(t=r.substr(uo,4),uo+=4):(t=ft,0===po&&c(Xn)),t===ft&&(r.substr(uo,5).toLowerCase()===Un?(t=r.substr(uo,5),uo+=5):(t=ft,0===po&&c(Kn)),t===ft&&(r.substr(uo,2).toLowerCase()===Zn?(t=r.substr(uo,2),uo+=2):(t=ft,0===po&&c(Yn)),t===ft&&(r.substr(uo,3).toLowerCase()===$n?(t=r.substr(uo,3),uo+=3):(t=ft,0===po&&c(Jn)),t===ft&&(48===r.charCodeAt(uo)?(t=Qn,uo++):(t=ft,0===po&&c(to)),t===ft&&(49===r.charCodeAt(uo)?(t=eo,uo++):(t=ft,0===po&&c(ro))))))),t}function ot(){var t;return po++,t=it(),t===ft&&(t=at()),po--,t===ft&&(ft,0===po&&c(no)),t}function it(){var t,e,n,o;return t=uo,34===r.charCodeAt(uo)?(e=tn,uo++):(e=ft,0===po&&c(en)),e!==ft?(n=at(),n!==ft?(34===r.charCodeAt(uo)?(o=tn,uo++):(o=ft,0===po&&c(en)),o!==ft?(co=t,e=Pn(n),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function at(){var t,e;return t=uo,e=J(),e!==ft&&(co=t,e=oo(e)),t=e,t===ft&&(t=uo,r.substr(uo,4).toLowerCase()===io?(e=r.substr(uo,4),uo+=4):(e=ft,0===po&&c(ao)),e!==ft&&(co=t,e=so(e)),t=e),t}function st(t,e,r){return void 0===e||"*"===e||(!!t.some(function(t){return t.name===e})||!0===r[e])}function ut(t){return{name:t}}function ct(t,e,r){return t||(t=[]),r||(r={}),(e||[]).forEach(function(e){e.forEach(function(e){st(t,e.from,r)||t.push(ut(e.from)),e.arcs&&(r[e.to]=!0,mo(t,ct(t,e.arcs,r)),delete r[e.to]),st(t,e.to,r)||t.push(ut(e.to))})}),t}n=void 0!==n?n:{};var lt,ft={},dt={program:f},ht=f,pt=function(t,e){e.entities=ct(e.entities,e.arcs);var r=e;return r=mo({meta:go.getMetaInfo(e.options,e.arcs)},r),t.length>0&&(r=mo({precomment:t},r)),r},gt=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},mt=",",bt=o(",",!1),xt=function(t){return t},yt=";",vt=o(";",!1),wt=function(t){return go.optionArray2Object(t[0].concat(t[1]))},Ct="hscale",At=o("hscale",!0),kt="arcgradient",Tt=o("arcgradient",!0),Lt="=",_t=o("=",!1),St=function(t,e){return go.nameValue2Option(t,e)},Et="width",Bt=o("width",!0),Ft="wordwraparcs",jt=o("wordwraparcs",!0),Pt=function(t,e){return go.nameValue2Option(t,go.flattenBoolean(e))},Dt="wordwrapentities",It=o("wordwrapentities",!0),Mt="wordwrapboxes",Ot=o("wordwrapboxes",!0),Nt="watermark",zt=o("watermark",!0),Ht=function(t){return t},Rt=function(t){return t[0].concat(t[1])},Wt=a("entity"),Gt=":",qt=o(":",!1),Vt=function(t,e){return e},Xt=function(t,e){var r=ut(t);return e&&(r.label=e),r},Ut=function(t){return t},Kt=function(t){return t[0].concat(t[1])},Zt=function(t){return t},Yt=function(t){return t},$t=function(t){return t},Jt=function(t,e){return e},Qt=function(t,e){return e&&(t.label=e),t},te=function(t){return{kind:t}},ee=function(t,e,r){return{kind:e,from:t,to:r}},re="*",ne=o("*",!1),oe=function(t,e){return{kind:t,from:"*",to:e}},ie=function(t,e){return{kind:e,from:t,to:"*"}},ae=function(t,e,r,n){return n},se="{",ue=o("{",!1),ce="}",le=o("}",!1),fe=function(t,e,r,n,o){var i={kind:e,from:t,to:r,arcs:o};return n&&(i.label=n),i},de=a("empty row"),he="|||",pe=o("|||",!1),ge="...",me=o("...",!1),be=a("---"),xe="---",ye=o("---",!1),ve=function(t){return t.toLowerCase()},we=a("bi-directional arrow"),Ce="--",Ae=o("--",!1),ke="<->",Te=o("<->",!1),Le="==",_e=o("==",!1),Se="<<=>>",Ee=o("<<=>>",!1),Be="<=>",Fe=o("<=>",!1),je="..",Pe=o("..",!1),De="<<>>",Ie=o("<<>>",!1),Me="::",Oe=o("::",!1),Ne="<:>",ze=o("<:>",!1),He=a("left to right arrow"),Re="->",We=o("->",!1),Ge="=>>",qe=o("=>>",!1),Ve="=>",Xe=o("=>",!1),Ue=">>",Ke=o(">>",!1),Ze=":>",Ye=o(":>",!1),$e="-x",Je=o("-x",!0),Qe=a("right to left arrow"),tr="<-",er=o("<-",!1),rr="<<=",nr=o("<<=",!1),or="<=",ir=o("<=",!1),ar="<<",sr=o("<<",!1),ur="<:",cr=o("<:",!1),lr="x-",fr=o("x-",!0),dr=a("box"),hr="note",pr=o("note",!0),gr="abox",mr=o("abox",!0),br="rbox",xr=o("rbox",!0),yr="box",vr=o("box",!0),wr=a("inline expression"),Cr="alt",Ar=o("alt",!0),kr="else",Tr=o("else",!0),Lr="opt",_r=o("opt",!0),Sr="break",Er=o("break",!0),Br="par",Fr=o("par",!0),jr="seq",Pr=o("seq",!0),Dr="strict",Ir=o("strict",!0),Mr="neg",Or=o("neg",!0),Nr="critical",zr=o("critical",!0),Hr="ignore",Rr=o("ignore",!0),Wr="consider",Gr=o("consider",!0),qr="assert",Vr=o("assert",!0),Xr="loop",Ur=o("loop",!0),Kr="ref",Zr=o("ref",!0),Yr="exc",$r=o("exc",!0),Jr=function(t){return t.toLowerCase()},Qr=a("double quoted string"),tn='"',en=o('"',!1),rn=function(t){return t.join("")},nn='\\"',on=o('\\"',!1),an=function(){return{type:"any"}}(),sn=function(t){return t},un=function(t){return t.join("").trim()},cn=a("identifier"),ln=/^[^;, "\t\n\r=\-><:{*]/,fn=i([";",","," ",'"',"\t","\n","\r","=","-",">","<",":","{","*"],!0,!1),dn=function(t){return t.join("")},hn=a("whitespace"),pn=/^[ \t]/,gn=i([" ","\t"],!1,!1),mn=a("lineend"),bn=/^[\r\n]/,xn=i(["\r","\n"],!1,!1),yn="/*",vn=o("/*",!1),wn="*/",Cn=o("*/",!1),An=function(t,e,r){return t+e.join("")+r},kn="//",Tn=o("//",!1),Ln="#",_n=o("#",!1),Sn=/^[^\r\n]/,En=i(["\r","\n"],!0,!1),Bn=function(t,e){return t+e.join("")},Fn=a("comment"),jn=a("number"),Pn=function(t){return t},Dn=function(t){return t.toString()},In=function(t){return t.toString()},Mn=/^[0-9]/,On=i([["0","9"]],!1,!1),Nn=function(t){return parseInt(t.join(""),10)},zn=".",Hn=o(".",!1),Rn=function(t){return parseFloat(t.join(""))},Wn=a("boolean"),Gn=function(t){return t},qn=function(t){return t.toString()},Vn="true",Xn=o("true",!0),Un="false",Kn=o("false",!0),Zn="on",Yn=o("on",!0),$n="off",Jn=o("off",!0),Qn="0",to=o("0",!1),eo="1",ro=o("1",!1),no=a("size"),oo=function(t){return t.toString()},io="auto",ao=o("auto",!0),so=function(t){return t.toLowerCase()},uo=0,co=0,lo=[{line:1,column:1}],fo=0,ho=[],po=0;if("startRule"in n){if(!(n.startRule in dt))throw new Error("Can't start parsing from rule \""+n.startRule+'".');ht=dt[n.startRule]}var go=e("./parserHelpers"),mo=e("../lib/lodash/lodash.custom").assign;if((lt=ht())!==ft&&uo===r.length)return lt;throw lt!==ft&&uo<r.length&&c(function(){return{type:"end"}}()),l(ho,fo<r.length?r.charAt(fo):null,fo<r.length?u(fo,fo+1):u(fo,fo))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return a[t.type](t)}var a={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:r}}),r("render/astmassage/aggregatekind",[],function(){"use strict";var t=Object.freeze({"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"});return{getAggregate:function(e){return t[e]}}}),r("render/textutensils/escape",[],function(){"use strict";return{unescapeString:function(t){return t.replace(/\\"/g,'"')},escapeString:function(t){return t.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}),r("render/text/ast2thing",["require","../textutensils/escape"],function(t){"use strict";function e(t){Object.getOwnPropertyNames(t).forEach(function(e){A[e]=t[e]})}function r(t){e(C),e(t)}function n(t,e){return r(e),o(t)}function o(t){var e="";return t&&(t.precomment&&(e+=A.renderCommentfn(t.precomment)),e+=A.program.opener,t.options&&(e+=d(t.options)),t.entities&&(e+=p(t.entities,A.renderEntityfn)),t.arcs&&(e+=y(t.arcs,"")),e+=A.program.closer),e}function i(t,e){return e.filter(function(e){return void 0!==t[e]}).map(function(e){return{name:e,value:t[e]}})}function a(t){return t.reduce(function(t,e){return t+e},"")}function s(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"].indexOf(t)>-1}function u(t){var e=t.match(/[a-z0-9]+/gi);return Boolean(e)?1!==e.length||s(t):"*"!==t}function c(t){return u(t)?'"'+t+'"':t}function l(t){return t.name+"="+("string"==typeof t.value?'"'+v.escapeString(t.value)+'"':t.value.toString())}function f(){return!0}function d(t){var e=i(t,A.supportedOptions).filter(A.optionIsValidfn),r="";if(e.length>0){var n=e.pop();r=e.reduce(function(t,e){return t+A.renderOptionfn(e)+A.option.separator},A.option.opener),r+=A.renderOptionfn(n)+A.option.closer}return r}function h(t){return A.renderEntityNamefn(t.name)+g(t,A.supportedEntityAttributes)}function p(t){var e="";return t.length>0&&(e=t.slice(0,-1).reduce(function(t,e){return t+h(e)+A.entity.separator},A.entity.opener),e+=h(t[t.length-1])+A.entity.closer),e}function g(t,e){var r="",n=i(t,e);if(n.length>0){var o=n.pop();r=n.reduce(function(t,e){return t+A.renderAttributefn(e)+A.attribute.separator},A.attribute.opener),r+=A.renderAttributefn(o)+A.attribute.closer}return r}function m(t){return t}function b(t,e){var r="";return t.from&&(r+=A.renderEntityNamefn(t.from)+" "),t.kind&&(r+=A.renderKindfn(t.kind)),t.to&&(r+=" "+A.renderEntityNamefn(t.to)),r+=g(t,A.supportedArcAttributes),t.arcs&&(r+=A.inline.opener,r+=y(t.arcs,e+w),r+=e+A.inline.closer),null===t.arcs&&(r+=A.inline.opener,r+=e+A.inline.closer),r}function x(t,e){var r="";return t.length>0&&(r=t.slice(0,-1).reduce(function(t,r){return t+e+b(r,e)+A.arcline.separator},A.arcline.opener),r+=e+b(t[t.length-1],e)+A.arcline.closer),r}function y(t,e){return t.reduce(function(t,r){return t+x(r,e)},"")}var v=t("../textutensils/escape"),w="  ",C={renderCommentfn:a,renderOptionfn:l,optionIsValidfn:f,renderEntityNamefn:c,renderKindfn:m,supportedOptions:["hscale","width","arcgradient","wordwraparcs","watermark","wordwrapentities","wordwrapboxes"],supportedEntityAttributes:["label"],supportedArcAttributes:["label"],program:{opener:"",closer:""},option:{opener:"",separator:",\n",closer:";\n\n"},entity:{opener:"",separator:", ",closer:";\n\n"},arcline:{opener:"",separator:",\n",closer:";\n"},inline:{opener:" {\n",closer:"}"},attribute:{opener:"",separator:"",closer:""}},A={};return{render:n}}),r("render/text/ast2mscgen",["require","../astmassage/aggregatekind","../textutensils/escape","./ast2thing"],function(t){"use strict";function e(t){!0===t?(u="",c="",l=""):(u="  ",c=" ",l="\n")}function r(t){return"inline_expression"===i.getAggregate(t)?"--":t}function n(t){var e="";return t.name&&t.value&&(e+=t.name+'="'+a.escapeString(t.value)+'"'),e}function o(t){return!Boolean(t.value)||"string"!=typeof t.value||"auto"!==t.value.toLowerCase()}var i=t("../astmassage/aggregatekind"),a=t("../textutensils/escape"),s=t("./ast2thing"),u="  ",c=" ",l="\n";return{render:function(t,i){return e(i),s.render(t,{renderAttributefn:n,optionIsValidfn:o,renderKindfn:r,supportedOptions:["hscale","width","arcgradient","wordwraparcs"],supportedEntityAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],supportedArcAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],program:{opener:"msc"+c+"{"+l,closer:"}"},option:{opener:u,separator:","+l+u,closer:";"+l+l},entity:{opener:u,separator:","+l+u,closer:";"+l+l},attribute:{opener:c+"[",separator:","+c,closer:"]"},arcline:{opener:u,separator:","+l+u,closer:";"+l},inline:{opener:";"+l,closer:"#"}})}}}),r("render/text/ast2xu",["require","../textutensils/escape","./ast2thing"],function(t){"use strict";function e(t){!0===t?(i="",a="",s=""):(i="  ",a=" ",s="\n")}function r(t){var e="";return t.name&&t.value&&(e+=t.name+'="'+n.escapeString(t.value)+'"'),e}var n=t("../textutensils/escape"),o=t("./ast2thing"),i="  ",a=" ",s="\n";return{render:function(t,n){return e(n),o.render(t,{renderAttributefn:r,supportedEntityAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],supportedArcAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip","title"],program:{opener:"msc"+a+"{"+s,closer:"}"},option:{opener:i,separator:","+s+i,closer:";"+s+s},entity:{opener:i,separator:","+s+i,closer:";"+s+s},attribute:{opener:a+"[",separator:","+a,closer:"]"},arcline:{opener:i,separator:","+s+i,closer:";"+s},inline:{opener:a+"{"+s,closer:i+"}"}})}}}),r("render/text/ast2msgenny",["require","./ast2thing"],function(t){"use strict";function e(t){return'"'+t+'"'}function r(t){var e=t.match(/[^;, "\t\n\r=\-><:{*]+/gi);return Boolean(e)?1!==e.length:"*"!==t}function n(t){return r(t)?'"'+t+'"':t}function o(t){var r="";return t.name&&t.value&&(r+=" : "+e(t.value)),r}var i=t("./ast2thing");return{render:function(t){return i.render(t,{renderAttributefn:o,renderEntityNamefn:n,entity:{opener:"",separator:",\n",closer:";\n\n"}})}}}),r("render/textutensils/wrap",[],function(){"use strict";return{wrap:function(t,e){for(var r=0,n=[],o=0,i=0,a=0,s=0,u=t.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");s<=u.length;)s>=u.length?n.push(u.substring(o,s)):"\n"===u[s]?(r=0,a=s,n.push(u.substring(o,a)),o=a+1):r++>=e&&(a=u.substring(0,s).lastIndexOf(" "),-1===a||a<o?(r=1,a=s,i=s):(r=0,i=a+1),n.push(u.substring(o,a)),o=i),s++;return n}}}),r("render/astmassage/asttransform",[],function(){"use strict";function t(t,e){t&&e&&t.forEach(function(t){e.forEach(function(e){e(t)})})}function e(t,e,r,n){n&&n.forEach(function(n){n(r,t,e)})}function r(t,r,o){r.forEach(function(i){e(t,r,i,o),i.arcs&&n(t,i.arcs,o)})}function n(t,e,n){t&&e&&n&&e.forEach(function(e){r(t,e,n)})}return{transform:function(e,r,o){return t(e.entities,r),n(e.entities,e.arcs,o),e}}}),r("render/astmassage/normalizekind",[],function(){"use strict";var t=Object.freeze({"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"});return{getNormalizedKind:function(e){return t[e]||e}}}),function(){function t(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function e(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function n(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function o(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function i(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function a(t){return function(e){return t(e)}}function s(t,e){return null==t?Rt:t[e]}function u(t,e){return function(r){return t(e(r))}}function c(){}function l(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function f(){this.__data__=xr?xr(null):{},this.size=0}function d(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function h(t){var e=this.__data__;if(xr){var r=e[t];return r===qt?Rt:r}return Ue.call(e,t)?e[t]:Rt}function p(t){var e=this.__data__;return xr?e[t]!==Rt:Ue.call(e,t)}function g(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=xr&&e===Rt?qt:e,this}function m(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(){this.__data__=[],this.size=0}function x(t){var e=this.__data__,r=M(e,t);return!(r<0)&&(r==e.length-1?e.pop():or.call(e,r,1),--this.size,!0)}function y(t){var e=this.__data__,r=M(e,t);return r<0?Rt:e[r][1]}function v(t){return M(this.__data__,t)>-1}function w(t,e){var r=this.__data__,n=M(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function C(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function A(){this.size=0,this.__data__={hash:new l,map:new(pr||m),string:new l}}function k(t){var e=lt(this,t).delete(t);return this.size-=e?1:0,e}function T(t){return lt(this,t).get(t)}function L(t){return lt(this,t).has(t)}function _(t,e){var r=lt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function S(t){var e=this.__data__=new m(t);this.size=e.size}function E(){this.__data__=new m,this.size=0}function B(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function F(t){return this.__data__.get(t)}function j(t){return this.__data__.has(t)}function P(t,e){var r=this.__data__;if(r instanceof m){var n=r.__data__;if(!pr||n.length<Wt-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new C(n)}return r.set(t,e),this.size=r.size,this}function D(t,e){var r=Pr(t),n=!r&&jr(t),o=!r&&!n&&Dr(t),a=!r&&!n&&!o&&Or(t),s=r||n||o||a,u=s?i(t.length,String):[],c=u.length;for(var l in t)!e&&!Ue.call(t,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||bt(l,c))||u.push(l);return u}function I(t,e,r){var n=t[e];Ue.call(t,e)&&Et(n,r)&&(r!==Rt||e in t)||z(t,e,r)}function M(t,e){for(var r=t.length;r--;)if(Et(t[r][0],e))return r;return-1}function O(t,e){return t&&it(e,It(e),t)}function N(t,e){return t&&it(e,Mt(e),t)}function z(t,e,r){"__proto__"==e&&sr?sr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function H(t,r,n,o,i,a){var s,u=r&Vt,c=r&Xt,l=r&Ut;if(n&&(s=i?n(t,o,i,a):n(t)),s!==Rt)return s;if(!Pt(t))return t;var f=Pr(t);if(f){if(s=ht(t),!u)return ot(t,s)}else{var d=Br(t),h=d==ee||d==re;if(Dr(t))return J(t,u);if(d==ae||d==$t||h&&!i){if(s=c||h?{}:pt(t),!u)return c?st(t,N(s,t)):at(t,O(s,t))}else{if(!Be[d])return i?t:{};s=gt(t,d,u)}}a||(a=new S);var p=a.get(t);if(p)return p;if(a.set(t,s),Mr(t))return t.forEach(function(e){s.add(H(e,r,n,e,t,a))}),s;if(Ir(t))return t.forEach(function(e,o){s.set(o,H(e,r,n,o,t,a))}),s;var g=l?c?ct:ut:c?Mt:It,m=f?Rt:g(t);return e(m||t,function(e,o){m&&(o=e,e=t[o]),I(s,o,H(e,r,n,o,t,a))}),s}function R(t,e,r,n,i){var a=-1,s=t.length;for(r||(r=mt),i||(i=[]);++a<s;){var u=t[a];e>0&&r(u)?e>1?R(u,e-1,r,n,i):o(i,u):n||(i[i.length]=u)}return i}function W(t,e,r){var n=e(t);return Pr(t)?n:o(n,r(t))}function G(t){return null==t?t===Rt?de:ie:ar&&ar in Object(t)?dt(t):At(t)}function q(t){return Dt(t)&&G(t)==$t}function V(t){return Dt(t)&&Br(t)==ne}function X(t){return!(!Pt(t)||vt(t))&&(Ft(t)?Ye:_e).test(Tt(t))}function U(t){return Dt(t)&&Br(t)==ce}function K(t){return Dt(t)&&jt(t.length)&&!!Ee[G(t)]}function Z(t){if(!wt(t))return lr(t);var e=[];for(var r in Object(t))Ue.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Y(t){if(!Pt(t))return Ct(t);var e=wt(t),r=[];for(var n in t)("constructor"!=n||!e&&Ue.call(t,n))&&r.push(n);return r}function $(t,e){return Fr(kt(t,e,Nt),t+"")}function J(t,e){if(e)return t.slice();var r=t.length,n=tr?tr(r):new t.constructor(r);return t.copy(n),n}function Q(t){var e=new t.constructor(t.byteLength);return new Qe(e).set(new Qe(t)),e}function tt(t,e){var r=e?Q(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function et(t){var e=new t.constructor(t.source,Le.exec(t));return e.lastIndex=t.lastIndex,e}function rt(t){return Tr?Object(Tr.call(t)):{}}function nt(t,e){var r=e?Q(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function ot(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function it(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],u=n?n(r[s],t[s],s,r,t):Rt;u===Rt&&(u=t[s]),o?z(r,s,u):I(r,s,u)}return r}function at(t,e){return it(t,Sr(t),e)}function st(t,e){return it(t,Er(t),e)}function ut(t){return W(t,It,Sr)}function ct(t){return W(t,Mt,Er)}function lt(t,e){var r=t.__data__;return yt(e)?r["string"==typeof e?"string":"hash"]:r.map}function ft(t,e){var r=s(t,e);return X(r)?r:Rt}function dt(t){var e=Ue.call(t,ar),r=t[ar];try{t[ar]=Rt;var n=!0}catch(t){}var o=Ze.call(t);return n&&(e?t[ar]=r:delete t[ar]),o}function ht(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Ue.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function pt(t){return"function"!=typeof t.constructor||wt(t)?{}:Lr(er(t))}function gt(t,e,r){var n=t.constructor;switch(e){case pe:return Q(t);case Qt:case te:return new n(+t);case ge:return tt(t,r);case me:case be:case xe:case ye:case ve:case we:case Ce:case Ae:case ke:return nt(t,r);case ne:return new n;case oe:case le:return new n(t);case ue:return et(t);case ce:return new n;case fe:return rt(t)}}function mt(t){return Pr(t)||jr(t)||!!(ir&&t&&t[ir])}function bt(t,e){var r=typeof t;return!!(e=null==e?Yt:e)&&("number"==r||"symbol"!=r&&Se.test(t))&&t>-1&&t%1==0&&t<e}function xt(t,e,r){if(!Pt(r))return!1;var n=typeof e;return!!("number"==n?Bt(r)&&bt(e,r.length):"string"==n&&e in r)&&Et(r[e],t)}function yt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function vt(t){return!!Ke&&Ke in t}function wt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||qe)}function Ct(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function At(t){return Ze.call(t)}function kt(e,r,n){return r=fr(r===Rt?e.length-1:r,0),function(){for(var o=arguments,i=-1,a=fr(o.length-r,0),s=Array(a);++i<a;)s[i]=o[r+i];i=-1;for(var u=Array(r+1);++i<r;)u[i]=o[i];return u[r]=n(s),t(e,this,u)}}function Tt(t){if(null!=t){try{return Xe.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Lt(t){return(null==t?0:t.length)?R(t,1):[]}function _t(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Gt);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(_t.Cache||C),r}function St(t){return H(t,Vt|Ut)}function Et(t,e){return t===e||t!==t&&e!==e}function Bt(t){return null!=t&&jt(t.length)&&!Ft(t)}function Ft(t){if(!Pt(t))return!1;var e=G(t);return e==ee||e==re||e==Jt||e==se}function jt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Yt}function Pt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Dt(t){return null!=t&&"object"==typeof t}function It(t){return Bt(t)?D(t):Z(t)}function Mt(t){return Bt(t)?D(t,!0):Y(t)}function Ot(t){return function(){return t}}function Nt(t){return t}function zt(){return[]}function Ht(){return!1}var Rt,Wt=200,Gt="Expected a function",qt="__lodash_hash_undefined__",Vt=1,Xt=2,Ut=4,Kt=800,Zt=16,Yt=9007199254740991,$t="[object Arguments]",Jt="[object AsyncFunction]",Qt="[object Boolean]",te="[object Date]",ee="[object Function]",re="[object GeneratorFunction]",ne="[object Map]",oe="[object Number]",ie="[object Null]",ae="[object Object]",se="[object Proxy]",ue="[object RegExp]",ce="[object Set]",le="[object String]",fe="[object Symbol]",de="[object Undefined]",he="[object WeakMap]",pe="[object ArrayBuffer]",ge="[object DataView]",me="[object Float32Array]",be="[object Float64Array]",xe="[object Int8Array]",ye="[object Int16Array]",ve="[object Int32Array]",we="[object Uint8Array]",Ce="[object Uint8ClampedArray]",Ae="[object Uint16Array]",ke="[object Uint32Array]",Te=/[\\^$.*+?()[\]{}|]/g,Le=/\w*$/,_e=/^\[object .+?Constructor\]$/,Se=/^(?:0|[1-9]\d*)$/,Ee={}
;Ee[me]=Ee[be]=Ee[xe]=Ee[ye]=Ee[ve]=Ee[we]=Ee[Ce]=Ee[Ae]=Ee[ke]=!0,Ee[$t]=Ee["[object Array]"]=Ee[pe]=Ee[Qt]=Ee[ge]=Ee[te]=Ee["[object Error]"]=Ee[ee]=Ee[ne]=Ee[oe]=Ee[ae]=Ee[ue]=Ee[ce]=Ee[le]=Ee[he]=!1;var Be={};Be[$t]=Be["[object Array]"]=Be[pe]=Be[ge]=Be[Qt]=Be[te]=Be[me]=Be[be]=Be[xe]=Be[ye]=Be[ve]=Be[ne]=Be[oe]=Be[ae]=Be[ue]=Be[ce]=Be[le]=Be[fe]=Be[we]=Be[Ce]=Be[Ae]=Be[ke]=!0,Be["[object Error]"]=Be[ee]=Be[he]=!1;var Fe="object"==typeof global&&global&&global.Object===Object&&global,je="object"==typeof self&&self&&self.Object===Object&&self,Pe=Fe||je||Function("return this")(),De="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ie=De&&"object"==typeof module&&module&&!module.nodeType&&module,Me=Ie&&Ie.exports===De,Oe=Me&&Fe.process,Ne=function(){try{return Oe&&Oe.binding&&Oe.binding("util")}catch(t){}}(),ze=Ne&&Ne.isMap,He=Ne&&Ne.isSet,Re=Ne&&Ne.isTypedArray,We=Array.prototype,Ge=Function.prototype,qe=Object.prototype,Ve=Pe["__core-js_shared__"],Xe=Ge.toString,Ue=qe.hasOwnProperty,Ke=function(){var t=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ze=qe.toString,Ye=RegExp("^"+Xe.call(Ue).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=Me?Pe.Buffer:Rt,Je=Pe.Symbol,Qe=Pe.Uint8Array,tr=$e?$e.allocUnsafe:Rt,er=u(Object.getPrototypeOf,Object),rr=Object.create,nr=qe.propertyIsEnumerable,or=We.splice,ir=Je?Je.isConcatSpreadable:Rt,ar=Je?Je.toStringTag:Rt,sr=function(){try{var t=ft(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ur=Object.getOwnPropertySymbols,cr=$e?$e.isBuffer:Rt,lr=u(Object.keys,Object),fr=Math.max,dr=Date.now,hr=ft(Pe,"DataView"),pr=ft(Pe,"Map"),gr=ft(Pe,"Promise"),mr=ft(Pe,"Set"),br=ft(Pe,"WeakMap"),xr=ft(Object,"create"),yr=Tt(hr),vr=Tt(pr),wr=Tt(gr),Cr=Tt(mr),Ar=Tt(br),kr=Je?Je.prototype:Rt,Tr=kr?kr.valueOf:Rt,Lr=function(){function t(){}return function(e){if(!Pt(e))return{};if(rr)return rr(e);t.prototype=e;var r=new t;return t.prototype=Rt,r}}();l.prototype.clear=f,l.prototype.delete=d,l.prototype.get=h,l.prototype.has=p,l.prototype.set=g,m.prototype.clear=b,m.prototype.delete=x,m.prototype.get=y,m.prototype.has=v,m.prototype.set=w,C.prototype.clear=A,C.prototype.delete=k,C.prototype.get=T,C.prototype.has=L,C.prototype.set=_,S.prototype.clear=E,S.prototype.delete=B,S.prototype.get=F,S.prototype.has=j,S.prototype.set=P;var _r=sr?function(t,e){return sr(t,"toString",{configurable:!0,enumerable:!1,value:Ot(e),writable:!0})}:Nt,Sr=ur?function(t){return null==t?[]:(t=Object(t),n(ur(t),function(e){return nr.call(t,e)}))}:zt,Er=ur?function(t){for(var e=[];t;)o(e,Sr(t)),t=er(t);return e}:zt,Br=G;(hr&&Br(new hr(new ArrayBuffer(1)))!=ge||pr&&Br(new pr)!=ne||gr&&"[object Promise]"!=Br(gr.resolve())||mr&&Br(new mr)!=ce||br&&Br(new br)!=he)&&(Br=function(t){var e=G(t),r=e==ae?t.constructor:Rt,n=r?Tt(r):"";if(n)switch(n){case yr:return ge;case vr:return ne;case wr:return"[object Promise]";case Cr:return ce;case Ar:return he}return e});var Fr=function(t){var e=0,r=0;return function(){var n=dr(),o=Zt-(n-r);if(r=n,o>0){if(++e>=Kt)return arguments[0]}else e=0;return t.apply(Rt,arguments)}}(_r);_t.Cache=C;var jr=q(function(){return arguments}())?q:function(t){return Dt(t)&&Ue.call(t,"callee")&&!nr.call(t,"callee")},Pr=Array.isArray,Dr=cr||Ht,Ir=ze?a(ze):V,Mr=He?a(He):U,Or=Re?a(Re):K,Nr=function(t){return $(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:Rt,a=o>2?r[2]:Rt;for(i=t.length>3&&"function"==typeof i?(o--,i):Rt,a&&xt(r[0],r[1],a)&&(i=o<3?Rt:i,o=1),e=Object(e);++n<o;){var s=r[n];s&&t(e,s,n,i)}return e})}(function(t,e){if(wt(e)||Bt(e))return void it(e,It(e),t);for(var r in e)Ue.call(e,r)&&I(t,r,e[r])}),zr=$(function(t,e){t=Object(t);var r=-1,n=e.length,o=n>2?e[2]:Rt;for(o&&xt(e[0],e[1],o)&&(n=1);++r<n;)for(var i=e[r],a=Mt(i),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(l===Rt||Et(l,qe[c])&&!Ue.call(t,c))&&(t[c]=i[c])}return t});c.assign=Nr,c.constant=Ot,c.defaults=zr,c.flatten=Lt,c.keys=It,c.keysIn=Mt,c.memoize=_t,c.cloneDeep=St,c.eq=Et,c.identity=Nt,c.isArguments=jr,c.isArray=Pr,c.isArrayLike=Bt,c.isBuffer=Dr,c.isFunction=Ft,c.isLength=jt,c.isMap=Ir,c.isObject=Pt,c.isObjectLike=Dt,c.isSet=Mr,c.isTypedArray=Or,c.stubArray=zt,c.stubFalse=Ht,c.VERSION="4.17.5","function"==typeof r&&"object"==typeof r.amd&&r.amd?(Pe._=c,r("lib/lodash/lodash.custom",[],function(){return c})):Ie?((Ie.exports=c)._=c,De._=c):Pe._=c}.call(this),r("render/astmassage/normalizeoptions",["require","../../lib/lodash/lodash.custom"],function(t){"use strict";var e=t("../../lib/lodash/lodash.custom");return function(t){return e.defaults(t||{},{wordwraparcs:!1,wordwrapentities:!0,wordwrapboxes:!0})}}),r("render/astmassage/flatten",["require","./asttransform","./aggregatekind","./normalizekind","./normalizeoptions","../../lib/lodash/lodash.custom","../textutensils/escape"],function(t){"use strict";function e(t){void 0===t.label&&(t.label=t.name)}function r(t){Boolean(t.label)&&(t.label=b.unescapeString(t.label)),Boolean(t.id)&&(t.id=b.unescapeString(t.id))}function n(t){t.label=Boolean(t.label)?t.label:""}function o(t){if(t.kind&&p.getNormalizedKind(t.kind)!==t.kind){t.kind=p.getNormalizedKind(t.kind);var e=t.from;t.from=t.to,t.to=e}return t}function i(t,e){!t.linecolor&&e.arclinecolor&&(t.linecolor=e.arclinecolor),!t.textcolor&&e.arctextcolor&&(t.textcolor=e.arctextcolor),!t.textbgcolor&&e.arctextbgcolor&&(t.textbgcolor=e.arctextbgcolor)}function a(t,e){if(t&&t.from){var r=e.filter(function(e){return e.name===t.from});r.length>0&&i(t,r[0])}}function s(t){return t.arcs.reduce(function(t,e){return t+(Boolean(e[0].arcs)?s(e[0])+1:0)},t.arcs.length)}function u(t,e,r,n){var o=[],a=[],c=[];return t.forEach(function(t){if("inline_expression"===h.getAggregate(t.kind)){if(t.depth=e,t.isVirtual=!0,Boolean(t.arcs)){var o=m.cloneDeep(t);o.numberofrows=s(o),delete o.arcs,a.push(o),t.arcs.forEach(function(t){c=c.concat(u(t,e+1,o.from,o.to)),t.forEach(function(t){i(t,o)})}),e>x&&(x=e)}else a.push(t);c.push([{kind:"|||",from:t.from,to:t.to,isVirtual:!0}])}else r&&n&&"emptyarc"===h.getAggregate(t.kind)&&(t.from=r,t.to=n,t.depth=e),a.push(t)}),o.push(a),o.concat(c)}function c(t){var e={};return x=0,Boolean(t.options)&&(e.options=m.cloneDeep(t.options)),Boolean(t.entities)&&(e.entities=m.cloneDeep(t.entities)),e.arcs=[],t&&t.arcs&&t.arcs.forEach(function(t){u(t,0).forEach(function(t){e.arcs.push(t)})}),e.depth=x+1,e}function l(t,e){return t.filter(function(t){return e.from!==t.name}).map(function(t){return e.to=t.name,m.cloneDeep(e)})}function f(t){if(t.entities&&t.arcs){var e=[],r={};t.arcs.forEach(function(n,o){n.filter(function(t){return"*"===t.to}).forEach(function(i,a){r=m.cloneDeep(i),delete t.arcs[o][a],e=l(t.entities,r),n[a]=e.shift(),t.arcs[o]=n.concat(e)})})}return t}var d=t("./asttransform"),h=t("./aggregatekind"),p=t("./normalizekind"),g=t("./normalizeoptions"),m=t("../../lib/lodash/lodash.custom"),b=t("../textutensils/escape"),x=0;return{swapRTLArc:o,unwind:c,explodeBroadcasts:f,flatten:function(t){return t.options=g(t.options),d.transform(c(t),[e,r],[o,a,r,n])},dotFlatten:function(t){return f(d.transform(t,[e],[o,a]))}}}),r("render/text/dotMappings",[],function(){"use strict";var t=Object.freeze({"->":"rvee","<->":"rvee","=>":"normal","<=>":"normal","-x":"oinvonormal"}),e=Object.freeze({box:"box",abox:"hexagon",rbox:"box",note:"note"}),r=Object.freeze({">>":"dashed","<<>>":"dashed","..":"dashed",":>":"bold","<:>":"bold","::":"bold",rbox:"rounded"});return{getArrow:function(e){return t[e]},getShape:function(t){return e[t]},getStyle:function(t){return r[t]}}}),r("render/text/ast2dot",["require","../textutensils/wrap","../astmassage/flatten","./dotMappings","../astmassage/aggregatekind","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){var e="/* Sequence chart represented as a directed graph\n * in the graphviz dot language (http://graphviz.org/)\n *\n * Generated by mscgen_js (https://sverweij.github.io/mscgen_js)\n */\n\ngraph {\n";return e+=w+"rankdir=LR\n",e+=w+"splines=true\n",e+=w+"ordering=out\n",e+=w+'fontname="Helvetica"\n',e+=w+'fontsize="9"\n',e+=w+'node [style=filled, fillcolor=white fontname="Helvetica", fontsize="9" ]\n',e+=w+'edge [fontname="Helvetica", fontsize="9", arrowhead=vee, arrowtail=vee, dir=forward]\n',e+="\n",t&&(t.entities&&(e+=c(t.entities)+"\n"),t.arcs&&(A=0,e+=g(t.arcs,""))),e+="}"}function r(t){var e=m.wrap(t.replace(/"/g,'\\"'),C),r=e.slice(0,-1).reduce(function(t,e){return t+e+"\n"},"");return r+=e.slice(-1)}function n(t,e){return e+'="'+r(t)+'"'}function o(t,e,r){Boolean(e)&&t.push(n(e,r))}function i(t){return["label","color","fontcolor","fillcolor"].filter(function(e){return Boolean(t[e])}).map(function(e){return n(t[e],e)})}function a(t){var e="";return t.length>0&&(e=t.slice(0,-1).reduce(function(t,e){return t+e+", "}," ["),e+=t.slice(-1)+"]"),e}function s(t){return'"'+t+'"'}function u(t){return s(t.name)+a(i(t))}function c(t){return t.reduce(function(t,e){return t+w+u(e)+";\n"},"")}function l(t,e){return t?"("+e+") "+t:"("+e+")"}function f(t,e,r){var n="",u="box"+e.toString();n+=u;var c=i(t);return o(c,x.getStyle(t.kind),"style"),o(c,x.getShape(t.kind),"shape"),n+=a(c)+"\n"+w+r,c=[],o(c,"dotted","style"),o(c,"none","dir"),n+=u+" -- {"+s(t.from)+","+s(t.to)+"}",n+=a(c)}function d(t,e,r){var n="";t.label=l(t.label,r);var u=i(t);switch(o(u,x.getStyle(t.kind),"style"),e){case"directional":o(u,x.getArrow(t.kind),"arrowhead");break;case"bidirectional":o(u,x.getArrow(t.kind),"arrowhead"),o(u,x.getArrow(t.kind),"arrowtail"),o(u,"both","dir");break;case"nondirectional":o(u,"none","dir")}return t.arcs||(n+=s(t.from)+" ",n+="--",n+=" "+s(t.to),n+=a(u)),n}function h(t,e,r){var n="",o=y.getAggregate(t.kind);return n+="box"===o?f(t,e,r):d(t,o,e)}function p(t,e){var r="";return t.from&&t.kind&&t.to&&(r+=w+e+h(t,++A,e)+"\n",t.arcs&&(r+=w+e+"subgraph cluster_"+A.toString()+"{",t.label&&(r+="\n"+w+e+' label="'+t.kind+": "+t.label+'" labeljust="l"\n'),r+=g(t.arcs,e+w),r+=w+e+"}\n")),r}function g(t,e){return t.reduce(function(t,r){return t+r.reduce(function(t,r){return t+p(r,e)},"")},"")}var m=t("../textutensils/wrap"),b=t("../astmassage/flatten"),x=t("./dotMappings"),y=t("../astmassage/aggregatekind"),v=t("../../lib/lodash/lodash.custom"),w="  ",C=40,A=0;return{render:function(t){return e(b.dotFlatten(v.cloneDeep(t)))}}}),r("render/text/ast2doxygen",["require","../astmassage/aggregatekind","../textutensils/escape","./ast2thing"],function(t){"use strict";function e(t){return"inline_expression"===i.getAggregate(t)?"--":t}function r(t){var e="";return t.name&&t.value&&(e+=t.name+'="'+a.escapeString(t.value)+'"'),e}function n(t){return!Boolean(t.value)||"string"!=typeof t.value||"auto"!==t.value.toLowerCase()}function o(){return""}var i=t("../astmassage/aggregatekind"),a=t("../textutensils/escape"),s=t("./ast2thing");return{render:function(t){return s.render(t,{renderCommentfn:o,renderAttributefn:r,optionIsValidfn:n,renderKindfn:e,supportedOptions:["hscale","width","arcgradient","wordwraparcs"],supportedEntityAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],supportedArcAttributes:["label","idurl","id","url","linecolor","textcolor","textbgcolor","arclinecolor","arctextcolor","arctextbgcolor","arcskip"],program:{opener:" * \\msc\n",closer:" * \\endmsc"},option:{opener:" *   ",separator:",\n *   ",closer:";\n * \n"},entity:{opener:" *   ",separator:",\n *   ",closer:";\n * \n"},attribute:{opener:" [",separator:", ",closer:"]"},arcline:{opener:" *   ",separator:",\n *   ",closer:";\n"},inline:{opener:";\n",closer:" * #"}})}}}),r("render/graphics/svgelementfactory/domprimitives",[],function(){"use strict";function t(t,e,r){return Boolean(r)&&t.setAttribute(e,r),t}function e(t,e,r,n){return Boolean(n)&&t.setAttributeNS(e,r,n),t}function r(e,r){return r&&Object.keys(r).forEach(function(n){t(e,n,r[n])}),e}function n(t,r,n){return n&&Object.keys(n).forEach(function(o){e(t,r,o,n[o])}),t}function o(t,e){return r(s.createElementNS(a,t),e)}function i(t){return s.createTextNode(t)}var a="http://www.w3.org/2000/svg",s={};return{SVGNS:a,XLINKNS:"http://www.w3.org/1999/xlink",init:function(t){s=t},setAttribute:t,setAttributes:r,setAttributesNS:n,createElement:o,createTextNode:i}}),r("render/graphics/svgelementfactory/geometry",[],function(){"use strict";function t(t){return 360*t/(2*Math.PI)}return{getDiagonalAngle:function(e){return 0-t(Math.atan(e.height/e.width))}}}),r("render/graphics/svgelementfactory/round",[],function(){"use strict";return function(t,e){return e?Math.round(t*Math.pow(10,e),e)/Math.pow(10,e):Math.round(t)}}),r("render/graphics/svgelementfactory/svgprimitives",["require","./domprimitives","./geometry","../../../lib/lodash/lodash.custom","./round"],function(t){function e(t,e){return d(t,h).toString()+","+d(e,h).toString()+" "}function r(t,r,n){return t+e(r,n)}function n(t,e,r,n){return c.createElement("marker",{orient:r,id:t,class:e,viewBox:Boolean(n)?n:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}function o(t,e){var r=c.createElement("a");return c.setAttributesNS(r,c.XLINKNS,{"xlink:href":t,"xlink:title":t}),r.appendChild(e),r}function i(t,e){var r=c.createElement("tspan"),n=c.createTextNode(t);return r.appendChild(n),e?o(e,r):r}function a(t,e,r){var n=f.defaults(r,{class:null,url:null,id:null,idurl:null}),o=c.createElement("text",{x:d(e.x,h).toString(),y:d(e.y,h).toString(),class:n.class});if(o.appendChild(i(t,n.url)),n.id){var a=i(" ["+n.id+"]",n.idurl);a.setAttribute("style",p),o.appendChild(a)}return o}function s(t,e){var r=f.defaults(e,{class:null,style:null,color:null,bgColor:null});return u(c.createElement("path",{d:t,class:r.class,style:r.style}),r.color,r.bgColor)}function u(t,e,r){var n="";return r&&(n+="fill:"+r+";"),e&&(n+="stroke:"+e+";"),c.setAttribute(t,"style",n)}var c=t("./domprimitives"),l=t("./geometry"),f=t("../../../lib/lodash/lodash.custom"),d=t("./round"),h=2,p="vertical-align:text-top;";return p+="font-size:0.7em;text-anchor:start;",{init:function(t){c.init(t)},createSVG:function(t,e){return c.createElement("svg",{version:"1.1",id:t,class:e,xmlns:c.SVGNS,"xmlns:xlink":c.XLINKNS,width:"0",height:"0"})},updateSVG:function(t,e){c.setAttributes(t,e)},colorBox:u,createDesc:function(){return c.createElement("desc")},createDefs:function(){return c.createElement("defs")},createTSpan:i,createText:a,createDiagonalText:function(t,e,r){return c.setAttributes(a(t,{x:e.width/2,y:e.height/2},{class:r}),{transform:"rotate("+d(l.getDiagonalAngle(e),h).toString()+" "+d(e.width/2,h).toString()+" "+d(e.height/2,h).toString()+")"})},createSingleLine:function(t,e){return c.createElement("line",{x1:d(t.xFrom,h).toString(),y1:d(t.yFrom,h).toString(),x2:d(t.xTo,h).toString(),y2:d(t.yTo,h).toString(),class:e?e.class:null})},createRect:function(t,e){var r=f.defaults(e,{class:null,color:null,bgColor:null,rx:null,ry:null});return u(c.createElement("rect",{width:d(t.width,h),height:d(t.height,h),x:d(t.x,h),y:d(t.y,h),rx:d(r.rx,h),ry:d(r.ry,h),class:r.class}),r.color,r.bgColor)},createUTurn:function(t,n,o,i,a,u){var c=f.defaults(a,{dontHitHome:!1,lineWidth:1}),l=c.dontHitHome?t.x+7.5*a.lineWidth:t.x;return s(r("M",t.x,t.y-u/2)+r("C",t.x+o,t.y-7.5*a.lineWidth/2)+e(t.x+o,n+0)+e(l,n),{class:i})},createGroup:function(t,e){return c.createElement("g",{id:t,class:e})},createPath:s,createMarkerPath:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(s(e,{class:"arrow-style",style:"stroke-dasharray:100,1;stroke:"+r||"black"})),o},createMarkerPolygon:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(c.createElement("polygon",{points:e,class:"arrow-style",stroke:r||"black",fill:r||"black"})),o},createTitle:function(t){var e=c.createElement("title"),r=c.createTextNode(t);return e.appendChild(r),e},point2String:e,pathPoint2String:r}}),r("render/graphics/svgelementfactory/variationhelpers",[],function(){"use strict";function t(t,e,r){var n=0;return e.indexOf("nodi")<0&&e.indexOf("bidi")>-1&&(n=t.xTo>t.xFrom?7.5*r:-7.5*r),n}function e(t,e,r){var n=0;return e.indexOf("nodi")<0&&(n=t.xTo>t.xFrom?-7.5*r:7.5*r),n}function r(t){var e=Math.abs(t.xTo-t.xFrom),r=Math.abs(t.yTo-t.yFrom);return Math.sqrt(e*e+r*r)}function n(t,e){var n=r(t);return n>0?Math.floor(n/e):0}function o(t){var e=t.xTo>t.xFrom?1:-1;return{signX:e,signY:t.yTo>t.yFrom?1:-1,dy:e*(t.yTo-t.yFrom)/(t.xTo-t.xFrom)}}function i(t){return Math.round(2*Math.random()*t)-t}function a(t){return Math.round(100*t)/100}function s(t,e,s){if(e<=0)throw new Error("pInterval must be > 0");e=Math.min(r(t),e);for(var u=[],c=n(t,e),l=o(t),f=l.signX*Math.sqrt(Math.pow(e,2)/(1+Math.pow(l.dy,2))),d=l.signY*(Math.abs(l.dy)===1/0?e:Math.sqrt(Math.pow(l.dy,2)*Math.pow(e,2)/(1+Math.pow(l.dy,2)))),h={},p=1;p<=c;p++)h={controlX:a(t.xFrom+(p-.5)*f+i(s)),controlY:a(t.yFrom+(p-.5)*d+i(s)),x:a(t.xFrom+p*f),y:a(t.yFrom+p*d)},e>r({xFrom:h.x,yFrom:h.y,xTo:t.xTo,yTo:t.yTo})&&(h.x=t.xTo,h.y=t.yTo),u.push(h);return u}return{round:a,determineStartCorrection:t,determineEndCorrection:e,getDirection:o,getLineLength:r,getNumberOfSegments:n,getBetweenPoints:s}}),r("render/graphics/svgelementfactory/straight",["require","./svgprimitives","./variationhelpers","../../../lib/lodash/lodash.custom"],function(t){function e(t,e){var r=e.lineWidth||1,n=r,o=e?e.class:null,i=s.getDirection(t),u=s.determineEndCorrection(t,o,r),c=s.determineStartCorrection(t,o,r),l=(t.xTo-t.xFrom+u-c).toString(),f=(t.yTo-t.yFrom).toString(),d=a.pathPoint2String("l",i.signX,i.dy),h=a.pathPoint2String("l",l,f);return a.createPath(a.pathPoint2String("M",t.xFrom,t.yFrom-7.5*r*i.dy)+d+a.pathPoint2String("M",t.xFrom+c,t.yFrom-n)+h+a.pathPoint2String("M",t.xFrom+c,t.yFrom+n)+h+a.pathPoint2String("M",t.xTo-i.signX,t.yTo+7.5*r*i.dy)+d,e)}function r(t,e){var r=e?e.lineWidth||1:1,n=Math.max(9,Math.min(4.5*r,t.height/2)),o=n.toString(10);return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width-n,0)+a.pathPoint2String("l",0,o)+a.pathPoint2String("l",o,0)+a.pathPoint2String("m",-o,-o)+a.pathPoint2String("l",o,o)+a.pathPoint2String("l",0,t.height-n)+a.pathPoint2String("l",-t.width,0)+a.pathPoint2String("l",0,-t.height)+"z",e)}function n(t,e){return e.rx=6,e.ry=6,a.createRect(t,e)}function o(t,e){return a.createPath(a.pathPoint2String("M",t.x,t.y+t.height/2)+a.pathPoint2String("l",3,-t.height/2)+a.pathPoint2String("l",t.width-6,0)+a.pathPoint2String("l",3,t.height/2)+a.pathPoint2String("l",-3,t.height/2)+a.pathPoint2String("l",-(t.width-6),0)+"z",e)}function i(t,e){var r=e&&e.foldSize?e.foldSize:7,n=u.defaults(e,{class:null,color:null,bgColor:null});return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width,0)+a.pathPoint2String("l",0,t.height-r)+a.pathPoint2String("l",-r,r)+a.pathPoint2String("l",-(t.width-r),0),n)}var a=t("./svgprimitives"),s=t("./variationhelpers"),u=t("../../../lib/lodash/lodash.custom");return{createSingleLine:a.createSingleLine,createDoubleLine:e,createNote:r,createRect:a.createRect,createABox:o,createRBox:n,createEdgeRemark:i,createDesc:a.createDesc,createDefs:a.createDefs,createDiagonalText:a.createDiagonalText,createTSpan:a.createTSpan,createText:a.createText,createUTurn:a.createUTurn,createGroup:a.createGroup,createMarkerPath:a.createMarkerPath,createMarkerPolygon:a.createMarkerPolygon,createTitle:a.createTitle,createSVG:a.createSVG,updateSVG:a.updateSVG,init:a.init}}),r("render/graphics/svgelementfactory/wobbly",["require","./svgprimitives","./variationhelpers"],function(t){function e(t){return t.map(function(t){return d.pathPoint2String("S",t.controlX,t.controlY)+" "+d.point2String(t.x,t.y)}).join(" ")}function r(t,r){var n=h.getDirection(t);return d.createPath(d.pathPoint2String("M",t.xFrom,t.yFrom)+d.pathPoint2String("L",h.round(t.xFrom+n.signX*Math.sqrt(1/(1+Math.pow(n.dy,2)))),t.yFrom+n.signY*(Math.abs(n.dy)===1/0?1:h.round(Math.sqrt(Math.pow(n.dy,2)/(1+Math.pow(n.dy,2))))))+e(h.getBetweenPoints(t,p,g)),{class:r?r.class:null})}function n(t,r){return d.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+r},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},p,g))+d.pathPoint2String("L",t.x,t.y)+"z"}function o(t,r){return d.pathPoint2String("M",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y+r},p,g))+d.pathPoint2String("L",t.x+t.width-r,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+r},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+r)}function i(t,e){var r=e?e.lineWidth||1:1,i=Math.max(9,Math.min(4.5*r,t.height/2)),a=d.createGroup();return a.appendChild(d.createPath(n(t,i),e)),e.bgColor="transparent",a.appendChild(d.createPath(o(t,i),e)),a}function a(t){return Boolean(t.y)||(t.y=0),d.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},p,g))+"z"}function s(t,e){return d.createPath(a(t,e),e)}function u(t,r){return d.createPath(d.pathPoint2String("M",t.x,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height/2,xTo:t.x+3,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+3,t.y)+e(h.getBetweenPoints({xFrom:t.x+3,yFrom:t.y,xTo:t.x+t.width-3,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+t.width-3,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-3,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height/2},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height/2,xTo:t.x+t.width-3,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+t.width-3,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-3,yFrom:t.y+t.height,xTo:t.x+3,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+3,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+3,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height/2},p,g))+"z",r)}function c(t,r){return d.createPath(d.pathPoint2String("M",t.x,t.y+6)+e([{controlX:t.x,controlY:t.y,x:t.x+6,y:t.y}])+e(h.getBetweenPoints({xFrom:t.x+6,yFrom:t.y,xTo:t.x+t.width-6,yTo:t.y},p,g))+d.pathPoint2String("L",t.x+t.width-6,t.y)+e([{controlX:t.x+t.width,controlY:t.y,x:t.x+t.width,y:t.y+6}])+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+6,xTo:t.x+t.width,yTo:t.y+t.height-6},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height-6)+e([{controlX:t.x+t.width,controlY:t.y+t.height,x:t.x+t.width-6,y:t.y+t.height}])+e(h.getBetweenPoints({xFrom:t.x+t.width-6,yFrom:t.y+t.height,xTo:t.x+6,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+6,t.y+t.height)+e([{controlX:t.x,controlY:t.y+t.height,x:t.x,y:t.y+t.height-6}])+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height-6,xTo:t.x,yTo:t.y+6},p,g))+"z",r)}function l(t,r){var n=r?r.lineWidth||1:1,o=d.createGroup(),i=r&&r.foldSize?r.foldSize:7,a=r&&r.color?r.color:"black";r.color="transparent!important";var s=d.createPath(d.pathPoint2String("M",t.x,t.y+n/2)+d.pathPoint2String("L",t.x+t.width,t.y+n/2)+d.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+d.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+d.pathPoint2String("L",t.x,t.y+t.height)+"z",r);r.bgColor="transparent",r.color=a;var u=d.createPath(d.pathPoint2String("M",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height-i},p,g))+d.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height-i,xTo:t.x+t.width-i,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-i,yFrom:t.y+t.height,xTo:t.x-1,yTo:t.y+t.height},p,g))+d.pathPoint2String("L",t.x-1,t.y+t.height),r);return o.appendChild(s),o.appendChild(u),o}function f(t,r){var n=r.lineWidth||1,o=n,i=r?r.class:null,a=h.getDirection(t),s=h.determineEndCorrection(t,i,n),u=h.determineStartCorrection(t,i,n);return d.createPath(d.pathPoint2String("M",t.xFrom,t.yFrom-7.5*n*a.dy)+d.pathPoint2String("l",a.signX,a.dy)+d.pathPoint2String("M",t.xFrom+u,t.yFrom-o)+e(h.getBetweenPoints({xFrom:t.xFrom+u,yFrom:t.yFrom-o,xTo:t.xTo+s,yTo:t.yTo-o},p,g))+d.pathPoint2String("M",t.xFrom+u,t.yFrom+o)+e(h.getBetweenPoints({xFrom:t.xFrom+u,yFrom:t.yFrom+o,xTo:t.xTo+s,yTo:t.yTo+o},p,g))+d.pathPoint2String("M",t.xTo-a.signX,t.yTo+7.5*n*a.dy)+d.pathPoint2String("l",a.signX,a.dy),i)}var d=t("./svgprimitives"),h=t("./variationhelpers"),p=70,g=3;return{createSingleLine:r,createDoubleLine:f,createNote:i,createRect:s,createABox:u,createRBox:c,createEdgeRemark:l,createDesc:d.createDesc,createDefs:d.createDefs,createDiagonalText:d.createDiagonalText,createTSpan:d.createTSpan,createText:d.createText,createUTurn:d.createUTurn,createGroup:d.createGroup,createMarkerPath:d.createMarkerPath,createMarkerPolygon:d.createMarkerPolygon,createTitle:d.createTitle,createSVG:d.createSVG,updateSVG:d.updateSVG,init:d.init}}),r("render/graphics/svgelementfactory/index",["require","./straight","./wobbly","../../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){return Boolean(t)?"wobbly"===t?n:r:i}var r=t("./straight"),n=t("./wobbly"),o=t("../../../lib/lodash/lodash.custom"),i=r,a={};return{init:function(t,e){i.init(t),a=o.defaults(e,{LINE_WIDTH:2,FONT_SIZE:12})},createSVG:function(t,r,n){return i=e(n),i.createSVG(t,r)},updateSVG:i.updateSVG,createTitle:i.createTitle,createDesc:i.createDesc,createDefs:i.createDefs,createTSpan:i.createTSpan,createRect:function(t,e,r,n){return i.createRect(t,{class:e,color:r,bgColor:n})},createRBox:function(t,e,r,n){return i.createRBox(t,{class:e,color:r,bgColor:n})},createABox:function(t,e,r,n){return i.createABox(t,{class:e,color:r,bgColor:n})},createNote:function(t,e,r,n){return i.createNote(t,{class:e,color:r,bgColor:n,lineWidth:a.LINE_WIDTH})},createEdgeRemark:function(t,e,r,n,o){return i.createEdgeRemark(t,{class:e,color:r,bgColor:n,foldSize:o,lineWidth:a.LINE_WIDTH})},createText:i.createText,createDiagonalText:i.createDiagonalText,createLine:function(t,e){return Boolean(e)&&Boolean(e.doubleLine)?(e.lineWidth||(e.lineWidth=a.LINE_WIDTH),i.createDoubleLine(t,e)):i.createSingleLine(t,e)},createUTurn:function(t,e,r,n,o,s){return i.createUTurn(t,e,r,n,{dontHitHome:o,lineWidth:a.LINE_WIDTH},s)},createGroup:i.createGroup,createMarkerPath:i.createMarkerPath,createMarkerPolygon:i.createMarkerPolygon}}),r("render/graphics/idmanager",[],function(){"use strict";var t="mscgenjs";return{setPrefix:function(e){t="mscgenjs"+e},get:function(e){return t+(e||"")}}}),r("render/graphics/svgutensils",["require","./idmanager","./svgelementfactory/index","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){var e=u.createSVG(t,s.get());return l.body.appendChild(e),e}function r(t){var r=l.getElementById(f);r=r||e(f),r.appendChild(t);var n=t.getBBox();return r.removeChild(t),n}function n(t){return Math.abs(t.height)>1e5||Math.abs(t.width)>1e5?{height:0,width:0,x:0,y:0}:t}function o(t){return"function"==typeof t.getBBox?n(r(t)):{height:15,width:15,x:2,y:2}}function i(){return o(u.createText("jy9@",{x:0,y:0})).height}function a(t){s.setPrefix(t);var e=l.getElementById(s.get());if(Boolean(e)){var r=l.getElementById(t);r?r.removeChild(e):l.body.removeChild(e)}}var s=t("./idmanager"),u=t("./svgelementfactory/index"),c=t("../../lib/lodash/lodash.custom"),l={},f=s.get("bboxer");return{init:function(t){l=t},removeRenderedSVGFromElement:a,getBBox:o,calculateTextHeight:c.memoize(i),webkitNamespaceBugWorkaround:function(t){return t.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}),r("render/graphics/renderutensils",["require","../../lib/lodash/lodash.custom"],function(t){"use strict";var e=t("../../lib/lodash/lodash.custom");return{scaleCanvasToWidth:function(t,r){var n=e.cloneDeep(r);return n.scale=t/n.width,n.width*=n.scale,n.height*=n.scale,n.horizontaltransform*=n.scale,n.verticaltransform*=n.scale,n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n},determineDepthCorrection:function(t,e){return t?2*(t+1)*e*2:0},determineArcXTo:function(t,e,r){return"-x"===t?e+.75*(r-e):r}}}),r("render/graphics/constants",[],function(){"use strict";return{LINE_WIDTH:2,FONT_SIZE:12}}),r("render/graphics/csstemplates",[],function(){"use strict";return Object.freeze({baseTemplate:"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>}.<%=id%> path, .<%=id%> rect{fill:none}.<%=id%> .label-text-background{fill:white;stroke:white;stroke-width:0}.<%=id%> .bglayer{fill:white;stroke:white;stroke-width:0}.<%=id%> line{}.<%=id%> .return, .<%=id%> .comment{stroke-dasharray:5,3}.<%=id%> .inline_expression_divider{stroke-dasharray:10,5}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle}.<%=id%> text.anchor-start{text-anchor:start}.<%=id%> .arrow-marker{overflow:visible}.<%=id%> .arrow-style{stroke-width:1}.<%=id%> .arcrow, .<%=id%> .arcrowomit, .<%=id%> .emphasised{stroke-linecap:butt}.<%=id%> .arcrowomit{stroke-dasharray:2,2}.<%=id%> .box, .<%=id%> .entity{fill:white;stroke-linejoin:round}.<%=id%> .inherit{stroke:inherit;color:inherit}.<%=id%> .inherit-fill{fill:inherit}.<%=id%> .watermark{font-size:48pt;font-weight:bold;opacity:0.14}",namedStyles:[Object.freeze({name:"basic",description:"Basic",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{text-decoration:underline;}"}),Object.freeze({name:"lazy",description:"Lazy",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{font-weight:bold;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"}),Object.freeze({name:"classic",description:"Classic",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{text-decoration:none}.<%=id%> .entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"}),Object.freeze({name:"fountainpen",description:"Fountain pen",experimental:!0,deprecated:!1,renderMagic:"wobbly",cssBefore:"@import 'https://fonts.googleapis.com/css?family=Gochi+Hand';",cssAfter:"svg.<%=id%>{font-family:'Gochi Hand', cursive;font-size:14px;stroke-opacity:0.4;stroke-linecap:round;background-color:transparent}.<%=id%> text{fill:rgba(0,0,128,0.7)}.<%=id%> marker polygon{fill:rgba(0,0,255,0.4);stroke-linejoin:round}.<%=id%> line, .<%=id%> path, .<%=id%> rect, .<%=id%> polygon{stroke:blue !important}.<%=id%> text.entity-text{font-weight:bold;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC;}.<%=id%> .label-text-background{opacity:0}"}),Object.freeze({name:"cygne",description:"Cygne (best with msgenny)",experimental:!0,deprecated:!0,renderMagic:"straight",cssBefore:"",
cssAfter:".<%=id%> line, .<%=id%> path{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> .entity,.<%=id%> .box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"}),Object.freeze({name:"pegasse",description:"Pgase (best with msgenny)",experimental:!1,deprecated:!0,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> line, .<%=id%> path{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> .entity,.<%=id%> .box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"}),Object.freeze({name:"grayscaled",description:"Grayscaled (not in IE or Safari)",experimental:!0,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"}),Object.freeze({name:"inverted",description:"Inverted (not in IE or Safari)",experimental:!0,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"}),Object.freeze({name:"noentityboxes",description:"No entity boxes",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> .entity{fill:none;stroke:none;}.<%=id%> text.entity-text{text-decoration:underline;}"})]})}),r("render/graphics/renderskeleton",["require","./svgelementfactory/index","./constants","./csstemplates"],function(t){"use strict";function e(t,e){return e.forEach(function(e){"method"===e.type?t.appendChild(p.createMarkerPolygon(e.name,e.path,e.color)):t.appendChild(p.createMarkerPath(e.name,e.path,e.color))}),t}function r(t,e){var r=b.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(b.createTextNode(h(t,e))),r}function n(t,n,o){var i=p.createDefs();return i.appendChild(r(o,t)),i=e(i,n)}function o(t){var e=p.createGroup(t+"_body");return e.appendChild(p.createGroup(t+"_background")),e.appendChild(p.createGroup(t+"_arcspans")),e.appendChild(p.createGroup(t+"_lifelines")),e.appendChild(p.createGroup(t+"_sequence")),e.appendChild(p.createGroup(t+"_notes")),e.appendChild(p.createGroup(t+"_watermark")),e}function i(t){return p.init(t.document,{LINE_WIDTH:g.LINE_WIDTH,FONT_SIZE:g.FONT_SIZE}),t.document}function a(t,e,r,a,u){b=i(t);var l=b.getElementById(e);null===l&&(l=b.body);var f=p.createSVG(r,r,c(u));return Boolean(u.source)&&f.appendChild(s(t,u.source)),f.appendChild(n(r,a,u)),f.appendChild(o(r)),l.appendChild(f),b}function s(t,e){var r=p.createDesc();return r.appendChild(t.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+e)),r}function u(t){var e=null,r=m.namedStyles.filter(function(e){return e.name===t});return r.length>0&&(e=r[0]),e}function c(t){var e="",r={};return Boolean(t)?(Boolean(t.additionalTemplate)&&(r=u(t.additionalTemplate),Boolean(r)&&(e=r.renderMagic)),e):""}function l(t,e){var r="",n={};return Boolean(t)?(Boolean(t.additionalTemplate)&&(n=u(t.additionalTemplate),Boolean(n)&&(r=n[e])),r):""}function f(t){var e=l(t,"cssAfter");return Boolean(t.styleAdditions)&&(e+=t.styleAdditions),e}function d(t){return l(t,"cssBefore")}function h(t,e){return(d(t)+m.baseTemplate+f(t)).replace(/<%=fontSize%>/g,g.FONT_SIZE).replace(/<%=lineWidth%>/g,g.LINE_WIDTH).replace(/<%=id%>/g,e)}var p=t("./svgelementfactory/index"),g=t("./constants"),m=t("./csstemplates"),b={};return{bootstrap:a,init:i}}),r("render/graphics/kind2class",[],function(){"use strict";var t=Object.freeze({"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"}),e=Object.freeze({"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"});return{getClass:function(e){return t[e]||e},getAggregateClass:function(t){return e[t]||t}}}),r("render/graphics/rowmemory",[],function(){"use strict";function t(t){return r[t]?r[t]:{y:n+1.5*o+t*o,height:o}}function e(){return t(r.length-1)}var r=[],n=0,o=0;return{clear:function(t,e){r=[],n=t,o=e},get:t,getByRealRowNumber:function(t){var n=r.filter(function(e){return e.realRowNumber===t});return n.length>0?n[0]:e()},getLast:e,set:function(e,n,o){var i=t(e-1);r[e]={y:i.y+(i.height+n)/2,height:n,realRowNumber:o}}}}),r("render/graphics/markermanager",["require","../../lib/lodash/lodash.custom","../astmassage/normalizekind"],function(t){"use strict";function e(t,e,r){return e&&r&&["<->","->"].indexOf(t)>-1?e<r?"signal":"signal-u":""}function r(t,e,r){return"<->"===t&&e<=r?"signal-l":"signal-lu"}function n(t,n,o,i,a){var s=[];return l[n]&&l[n].attributes&&(s=l[n].attributes.map(function(s){return{name:s.name,value:s.value.replace(/\{\{signal-marker-end\}\}/g,e(n,i,a)).replace(/\{\{signal-marker-start\}\}/g,r(n,i,a)).replace(/\{\{id\}\}/g,t).replace(/\{\{color\}\}/g,o||"black")}})),s}function o(t,e){return l[c.getNormalizedKind(t)].marker.name+(Boolean(e)?" "+e:" black")}function i(t,e){function r(e){i(t,e)}return Array.isArray(e)&&e.forEach(r),e.arcs&&e.arcs.forEach(r),e.kind&&l[c.getNormalizedKind(e.kind)]&&l[c.getNormalizedKind(e.kind)].marker&&t.indexOf(o(e.kind,e.linecolor))<0&&t.push(o(e.kind,e.linecolor)),t}function a(t){return{kind:t.split(" ")[0],color:t.split(" ")[1]}}function s(t){return t.arcs.reduce(i,[]).sort().map(a)}var u=t("../../lib/lodash/lodash.custom"),c=t("../astmassage/normalizekind"),l={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},f={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:n,getMarkerDefs:function(t,e){return u.flatten(s(e).map(function(e){return f[e.kind].variants.map(function(r){return{name:t+e.kind+r.name+"-"+e.color,path:r.path,color:e.color,type:e.kind}})}))}}}),r("render/graphics/renderlabels",["require","./svgelementfactory/index","./svgutensils","./constants","../textutensils/wrap","./kind2class","../astmassage/aggregatekind"],function(t){"use strict";function e(t,e){e&&t.setAttribute("style","fill:"+e+";")}function r(t,r,n){e(t,r&&!n?"blue":n)}function n(t,e){var r=l.createRect(f.getBBox(t),"label-text-background");return e&&r.setAttribute("style","fill:"+e+"; stroke:"+e+";"),r}function o(t,e,r,n,o,i){return 0===t?l.createText(e,{x:r,y:n},{class:o,url:i.url,id:i.id,idurl:i.idurl}):l.createText(e,{x:r,y:n},{class:o,url:i.url})}function i(t,e,r){var n=e||t,o=p.getClass(n),i=p.getAggregateClass(n);return o===i?o+r:i+r+o+r}function a(t,n,a,s,u,c){var l=a+(u+.25)*f.calculateTextHeight(),h=i(s.kind,c&&c.kind,"-text ");c&&(c.alignLeft&&(h+="anchor-start "),c.alignAround&&(l=a+(u+.25)*(f.calculateTextHeight()+d.LINE_WIDTH)));var p=o(u,t,n,l,h,s);return e(p,s.textcolor),r(p,s.url,s.textcolor),p}function s(t,e,r,o){var i=l.createGroup(o);if(t.label){var s=e.x+e.width/2,u=c(t.label,t.kind,e.width,d.FONT_SIZE,r),h={};r&&r.alignAbove&&u.forEach(function(){u.push("")});var p=e.y-(u.length-1)/2*(f.calculateTextHeight()+1);r&&r.alignAround&&(1===u.length&&u.push(""),p=e.y-(u.length-1)/2*(f.calculateTextHeight()+d.LINE_WIDTH+1)),u.forEach(function(e,o){""!==e&&(h=a(e,s,p,t,o,r),r&&r.ownBackground&&i.appendChild(n(h,t.textbgcolor)),i.appendChild(h)),p++})}return i}function u(t,e){var r=Math.abs(t);return r<=160?r/(e/12*8):r<=320?r/(e/12*6.4):r<=480?r/(e/12*5.9):r/(e/12*5.6)}function c(t,e,r,n,o){return"box"===g.getAggregate(e)&&o.wordwrapboxes||"entity"===e&&o.wordwrapentities||"box"!==g.getAggregate(e)&&"entity"!==e&&o.wordwraparcs||void 0===e?h.wrap(t,u(r,n)):t.split("\\n")}var l=t("./svgelementfactory/index"),f=t("./svgutensils"),d=t("./constants"),h=t("../textutensils/wrap"),p=t("./kind2class"),g=t("../astmassage/aggregatekind");return{createLabel:s,splitLabel:c}}),r("render/graphics/entities",["require","./renderlabels"],function(t){"use strict";function e(t){return o[t]}var r=t("./renderlabels"),n=Object.seal({interEntitySpacing:160,height:34,width:100}),o={};return{init:function(t){n.interEntitySpacing=160,n.height=34,n.width=100,t&&(n.interEntitySpacing=160*t,n.width=100*t),o={}},getX:e,setX:function(t,e){o[t.name]=e+n.width/2},getOAndD:function(t,r){return{from:e(e(t)<e(r)?t:r),to:e(e(r)>e(t)?r:t)}},setHeight:function(t){n.height=t},getDims:function(){return n},getNoEntityLines:function(t,e,o){return r.splitLabel(t,"entity",n.width,e,o).length}}}),r("render/graphics/renderast",["require","./svgelementfactory/index","./svgutensils","./renderutensils","./renderskeleton","../astmassage/flatten","./kind2class","../astmassage/aggregatekind","./rowmemory","./idmanager","./markermanager","./entities","./renderlabels","./constants","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t,e,r,a){var s=Object.freeze(W.flatten(t)),u=a||{};u=$.defaults(u,{source:null,styleAdditions:null,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle"}),n(s,e,r,u),o(s),i(s);var c=e.document.getElementById(r);return c?z.webkitNamespaceBugWorkaround(c.innerHTML):z.webkitNamespaceBugWorkaround(e.document.body.innerHTML)}function r(t){var e="middle";return["above","middle","below"].some(function(e){return e===t})&&(e=t),e}function n(t,e,n,o){X.setPrefix(n),et.document=R.bootstrap(e,n,X.get(),U.getMarkerDefs(X.get(),t),o),et.mirrorEntitiesOnBottom=Boolean(o.mirrorEntitiesOnBottom),et.regularArcTextVerticalAlignment=r(o.regularArcTextVerticalAlignment),z.init(et.document),et.layer=a(et.document),et.maxDepth=t.depth,u(et,t.options)}function o(t){x(t.entities,0,t.options),V.clear(K.getDims().height,et.arcRowHeight),k(t.arcs,t.entities,t.options),et.mirrorEntitiesOnBottom&&b(t.entities,t.options)}function i(t){var e=c(t);l(e),e=d(t.options,e),h(e)}function a(t){return{lifeline:t.getElementById(X.get("_lifelines")),sequence:t.getElementById(X.get("_sequence")),notes:t.getElementById(X.get("_notes")),inline:t.getElementById(X.get("_arcspans")),watermark:t.getElementById(X.get("_watermark"))}}function s(t,e){t.arcRowHeight=Q,t.arcGradient=tt,t.wordWrapArcs=!1,e&&(e.arcgradient&&(t.arcRowHeight=parseInt(e.arcgradient,10)+Q,t.arcGradient=parseInt(e.arcgradient,10)+tt),t.wordWrapArcs=Boolean(e.wordwraparcs))}function u(t,e){K.init(e&&e.hscale),s(t,e)}function c(t){var e=H.determineDepthCorrection(t.depth,Y.LINE_WIDTH),r=V.getLast(),n={width:t.entities.length*K.getDims().interEntitySpacing+e,height:Boolean(et.mirrorEntitiesOnBottom)?2*K.getDims().height+r.y+r.height+2*J:r.y+r.height/2+2*J,horizontaltransform:(K.getDims().interEntitySpacing+e-K.getDims().width)/2,autoscale:!!t.options&&!!t.options.width&&"auto"===t.options.width,verticaltransform:J,scale:1};return n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n}function l(t){et.document.getElementById(X.get("_background")).appendChild(N.createRect(t,"bglayer"))}function f(t,e){et.layer.watermark.appendChild(N.createDiagonalText(t,e,"watermark"))}function d(t,e){return t&&(t.watermark&&f(t.watermark,e),t.width&&"auto"!==t.width&&(e=H.scaleCanvasToWidth(t.width,e))),e}function h(t){var e=et.document.getElementById(X.get());et.document.getElementById(X.get("_body")).setAttribute("transform","translate("+t.horizontaltransform+","+t.verticaltransform+") scale("+t.scale+","+t.scale+")"),t.autoscale&&!0===t.autoscale?N.updateSVG(e,{width:"100%",height:"100%",viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()}):N.updateSVG(e,{width:t.width.toString(),height:t.height.toString(),viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()})}function p(t,e){var r=t[0],n=2;return t.forEach(function(t){var o=K.getNoEntityLines(t.label,Y.FONT_SIZE,e);o>n&&(n=o,r=t)}),n>2?Math.max(K.getDims().height,z.getBBox(m(r,0,0,e)).height):K.getDims().height}function g(t,e){var r=Math.min(z.getBBox(t).width+4*Y.LINE_WIDTH,e.interEntitySpacing/3+e.width);return r>=e.width&&(e.x-=(r-e.width)/2,e.width=r),e}function m(t,e,r,n){var o=N.createGroup(),i=$.cloneDeep(K.getDims());i.x=e||0,i.y=r||0;var a=Z.createLabel($.defaults(t,{kind:"entity"}),{x:i.x,y:r+i.height/2,width:i.width},n);return o.appendChild(N.createRect(g(a,i),"entity",t.linecolor,t.textbgcolor)),o.appendChild(a),o}function b(t,e){var r=V.getLast().y+(V.getLast().height+et.arcRowHeight)/2;S(t,"arcrow",null,r).forEach(function(t){et.layer.lifeline.appendChild(t)}),x(t,r+et.arcRowHeight/2,e)}function x(t,e,r){var n=0,o=N.createGroup();t&&(K.setHeight(p(t,r)+2*Y.LINE_WIDTH),t.forEach(function(t){o.appendChild(m(t,n,e,r)),K.setX(t,n),n+=K.getDims().interEntitySpacing}),et.layer.sequence.appendChild(o)),et.arcEndX=n-K.getDims().interEntitySpacing+K.getDims().width}function y(t,e,r,n,o){var i=0,a=t.label,s=K.getX(t.from);t.label="",e.forEach(function(e){var a={};e.name!==t.from&&(i=K.getX(e.name),a=P(t,s,i,n,o),r.push({layer:et.layer.sequence,element:a}))}),t.label=a}function v(t,e,r,n,o){var i={};return t.from&&t.to&&("*"===t.to?(y(t,e,r,n,o),i=Z.createLabel(t,{x:0,y:V.get(n).y,width:et.arcEndX},$.defaults($.cloneDeep(o),{alignAround:!0,ownBackground:!0})),r.push({title:t.title,layer:et.layer.sequence,element:i})):(i=P(t,K.getX(t.from),K.getX(t.to),n,o),r.push({title:t.title,layer:et.layer.sequence,element:i}))),i}function w(t,e,r,n){var o=0;return t.forEach(function(t){var e={};switch(q.getAggregate(t.kind)){case"emptyarc":e=B(t,0);break;case"box":e=O(K.getOAndD(t.from,t.to),t,0,n);break;case"inline_expression":e=T(t,0);break;default:var i=$.cloneDeep(t);i.arcskip=0,e=v(i,r,[],0,n)}o=Math.max(o,z.getBBox(e).height+2*Y.LINE_WIDTH)}),o}function C(t,e,r,n){var o="arcrow",i=[];t.forEach(function(t){var a={};switch(q.getAggregate(t.kind)){case"emptyarc":a=B(t,V.get(e).y),"..."===t.kind&&(o="arcrowomit"),i.push({layer:et.layer.sequence,element:a});break;case"box":a=O(K.getOAndD(t.from,t.to),t,V.get(e).y,n),i.push({title:t.title,layer:et.layer.notes,element:a});break;case"inline_expression":a=T(t,V.get(e).y),i.push({layer:et.layer.notes,element:a}),rt.push({arc:t,rownum:e});break;default:a=v(t,r,i,e,n)}}),S(r,o,V.get(e).height,V.get(e).y).forEach(function(t){et.layer.lifeline.appendChild(t)}),i.forEach(function(t){t.element&&(t.title&&t.element.appendChild(N.createTitle(t.title)),t.layer.appendChild(t.element))})}function A(t,e,r){var n=0;t.forEach(function(t,o){function i(t){return t.isVirtual}t.every(i)?V.set(o,Math.max(V.get(o).height,w(t,o,e,r))):(V.set(o,Math.max(V.get(o).height,w(t,o,e,r)),n),n++)})}function k(t,e,r){rt=[],S(e,"arcrow",null,V.get(-1).y).forEach(function(t){et.layer.lifeline.appendChild(t)}),t&&(A(t,e,r),t.forEach(function(t,n){C(t,n,e,r)}),L(rt))}function T(t,e){var r=K.getOAndD(t.from,t.to),n=e>0,o=2*et.maxDepth*Y.LINE_WIDTH,i=r.to-r.from+(K.getDims().interEntitySpacing-2*Y.LINE_WIDTH)-7-Y.LINE_WIDTH,a=r.from-(K.getDims().interEntitySpacing-3*Y.LINE_WIDTH-o)/2-2*(et.maxDepth-t.depth)*Y.LINE_WIDTH,s=N.createGroup();n||(t.label=t.kind+(t.label?": "+t.label:""));var u=Z.createLabel(t,{x:a+Y.LINE_WIDTH-i/2,y:e+et.arcRowHeight/4,width:i},{alignLeft:!0,ownBackground:!1,wordwraparcs:et.wordWrapArcs}),c=z.getBBox(u),l=Math.max(c.height+2*Y.LINE_WIDTH,et.arcRowHeight/2-2*Y.LINE_WIDTH),f=Math.min(c.width+2*Y.LINE_WIDTH,i),d=N.createEdgeRemark({width:f-Y.LINE_WIDTH+7,height:l,x:a,y:e},"box inline_expression_label",t.linecolor,t.textbgcolor,7);return s.appendChild(d),s.appendChild(u),s}function L(t){t.forEach(function(t){et.layer.inline.appendChild(_(t,V.get(t.rownum).y))})}function _(t,e){var r=V.get(t.rownum).y,n=V.get(t.rownum+t.arc.numberofrows+1).y,o=n-r;return t.arc.label="",M(K.getOAndD(t.arc.from,t.arc.to),t.arc,o,e)}function S(t,e,r,n){return(!r||r<et.arcRowHeight)&&(r=et.arcRowHeight),t.map(function(t){var o=N.createLine({xFrom:K.getX(t.name),yFrom:0-r/2+(n||0),xTo:K.getX(t.name),yTo:r/2+(n||0)},{class:e});return t.linecolor&&o.setAttribute("style","stroke:"+t.linecolor+";"),o})}function E(t,e,r,n,o,i){var a=et.arcRowHeight/5*2,s=K.getDims().interEntitySpacing/2,u={},c="arc "+G.getAggregateClass(t)+" "+G.getClass(t);if(n){u=N.createGroup();var l=N.createUTurn({x:e,y:i},i+r+a-2*Y.LINE_WIDTH,s-2*Y.LINE_WIDTH,c,"::"!==t,a),f=N.createUTurn({x:e,y:i},i+r+a-Y.LINE_WIDTH,s,null,null,a),d=N.createUTurn({x:e,y:i},i+r+a,s,c,"::"!==t,a);Boolean(o)&&l.setAttribute("style","stroke:"+o),U.getAttributes(X.get(),t,o,e,e).forEach(function(t){f.setAttribute(t.name,t.value)}),f.setAttribute("style","stroke:transparent;"),Boolean(o)&&d.setAttribute("style","stroke:"+o),u.appendChild(l),u.appendChild(d),u.appendChild(f),u.setAttribute("class",c)}else u=N.createUTurn({x:e,y:i},i+r+a,s,c,"-x"===t,a),U.getAttributes(X.get(),t,o,e,e).forEach(function(t){u.setAttribute(t.name,t.value)});return u}function B(t,e){return"---"===t.kind?I(t,K.getOAndD(t.from,t.to),e):D(t,K.getOAndD(t.from,t.to),e)}function F(t,e,r){var n=V.get(t).y+r;if(Boolean(e)){var o=Math.floor(e),i=e-o,a=V.get(t).realRowNumber;n=V.getByRealRowNumber(a+o).y+i*(V.getByRealRowNumber(a+o+1).y-V.getByRealRowNumber(a+o).y)}return n}function j(t){return"<:>"===t?"bidi ":"::"===t?"nodi ":""}function P(t,e,r,n,o){var i=N.createGroup(),a="arc ";a+=j(t.kind),a+=G.getAggregateClass(t.kind)+" "+G.getClass(t.kind);var s=[":>","::","<:>"].indexOf(t.kind)>-1,u=F(n,t.arcskip,et.arcGradient);if(r=H.determineArcXTo(t.kind,e,r),e===r){i.appendChild(E(t.kind,e,u-V.get(n).y-et.arcGradient,s,t.linecolor,V.get(n).y));var c=2*K.getDims().interEntitySpacing/3;i.appendChild(Z.createLabel(t,{x:e+1.5*Y.LINE_WIDTH-c/2,y:V.get(n).y-et.arcRowHeight/5-Y.LINE_WIDTH/2,width:c},$.defaults($.cloneDeep(o),{alignLeft:!0,alignAbove:!0,ownBackground:!0})))}else{var l=N.createLine({xFrom:e,yFrom:V.get(n).y,xTo:r,yTo:u},{class:a,doubleLine:s});U.getAttributes(X.get(),t.kind,t.linecolor,e,r).forEach(function(t){l.setAttribute(t.name,t.value)}),i.appendChild(l),i.appendChild(Z.createLabel(t,{x:e,y:V.get(n).y+(u-V.get(n).y)/2,width:r-e},$.defaults($.cloneDeep(o),{alignAround:!0,alignAbove:"above"===et.regularArcTextVerticalAlignment,ownBackground:!0})))}return i}function D(t,e,r){var n=0,o=et.arcEndX;return t.from&&t.to&&(n=e.from,o=e.to-e.from),Z.createLabel(t,{x:n,y:r,width:o},{ownBackground:!0,wordwraparcs:et.wordWrapArcs})}function I(t,e,r){var n=0,o=et.arcEndX,i="comment",a=N.createGroup();if(t.from&&t.to){var s=1*et.maxDepth*Y.LINE_WIDTH,u=2*(et.maxDepth-t.depth)*Y.LINE_WIDTH;n=e.from-(K.getDims().interEntitySpacing+2*Y.LINE_WIDTH)/2-(u-s),o=e.to+(K.getDims().interEntitySpacing+2*Y.LINE_WIDTH)/2+(u-s),i="inline_expression_divider"}var c=N.createLine({xFrom:n,yFrom:r,xTo:o,yTo:r},{class:i});return a.appendChild(c),a.appendChild(D(t,e,r)),t.linecolor&&c.setAttribute("style","stroke:"+t.linecolor+";"),a}function M(t,e,r,n){var o=2*et.maxDepth*Y.LINE_WIDTH,i=t.to-t.from+K.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o,a=t.from-(K.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o)/2,s=2*(et.maxDepth-e.depth)*Y.LINE_WIDTH;return N.createRect({width:i+2*s,height:r||et.arcRowHeight-2*Y.LINE_WIDTH,x:a-s,y:n},"box inline_expression "+e.kind,e.linecolor,e.textbgcolor)}function O(t,e,r,n){var o=2*et.maxDepth*Y.LINE_WIDTH,i=t.to-t.from+K.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o,a=t.from-(K.getDims().interEntitySpacing-2*Y.LINE_WIDTH-o)/2,s=N.createGroup(),u={},c=Z.createLabel(e,{x:a,y:r,width:i},n),l=z.getBBox(c),f=Math.max(l.height+2*Y.LINE_WIDTH,et.arcRowHeight-2*Y.LINE_WIDTH),d={width:i,height:f,x:a,y:r-f/2};switch(e.kind){case"rbox":u=N.createRBox(d,"box rbox",e.linecolor,e.textbgcolor);break;case"abox":u=N.createABox(d,"box abox",e.linecolor,e.textbgcolor);break;case"note":u=N.createNote(d,"box note",e.linecolor,e.textbgcolor);break;default:u=N.createRect(d,"box",e.linecolor,e.textbgcolor)}return s.appendChild(u),s.appendChild(c),s}var N=t("./svgelementfactory/index"),z=t("./svgutensils"),H=t("./renderutensils"),R=t("./renderskeleton"),W=t("../astmassage/flatten"),G=t("./kind2class"),q=t("../astmassage/aggregatekind"),V=t("./rowmemory"),X=t("./idmanager"),U=t("./markermanager"),K=t("./entities"),Z=t("./renderlabels"),Y=t("./constants"),$=t("../../lib/lodash/lodash.custom"),J=3,Q=38,tt=0,et=Object.seal({arcRowHeight:Q,arcGradient:tt,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle",maxDepth:0,document:{},layer:{lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),rt=[];return{clean:function(t,e){et.document=R.init(e),z.init(et.document),z.removeRenderedSVGFromElement(t)},renderAST:function(t,r,n,o,i){return e(t,o,n,{source:r,styleAdditions:i})},renderASTNew:e}}),r("main/static-resolver",["require","../parse/mscgenparser","../parse/xuparser","../parse/msgennyparser","../render/text/ast2mscgen","../render/text/ast2xu","../render/text/ast2msgenny","../render/text/ast2dot","../render/text/ast2doxygen","../render/graphics/renderast"],function(t){"use strict";var e=t("../parse/mscgenparser"),r=t("../parse/xuparser"),n=t("../parse/msgennyparser"),o=t("../render/text/ast2mscgen"),i=t("../render/text/ast2xu"),a=t("../render/text/ast2msgenny"),s=t("../render/text/ast2dot"),u=t("../render/text/ast2doxygen"),c=t("../render/graphics/renderast"),l=e,f=o,d=Object.freeze({mscgen:e,xu:r,msgenny:n}),h=Object.freeze({mscgen:o,msgenny:a,xu:i,dot:s,doxygen:u});return{getParser:function(t){return["ast","json"].indexOf(t)>-1?JSON:d[t]||l},getGraphicsRenderer:function(){return c},getTextRenderer:function(t){return h[t]||f}}}),r("main/index",["require","../lib/lodash/lodash.custom","../render/graphics/csstemplates"],function(t){function e(t,e){return"json"===e&&"object"==typeof t}function r(t,r,n){return e(t,r)?t:n(r).parse(t)}function n(t,e,r){Boolean(t)&&(Boolean(e)?t(e,null):t(null,r))}var o=t("../lib/lodash/lodash.custom"),i=t("../render/graphics/csstemplates");return{renderMsc:function(t,e,i,a,s){var u=e||{};o.defaults(u,{inputType:"mscgen",elementId:"__svg",window:e.window||window,includeSource:!0,styleAdditions:null,additionalTemplate:null,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle"});try{n(i,null,s().renderASTNew(r(t,u.inputType,a),u.window,u.elementId,{source:u.includeSource?t:null,styleAdditions:u.styleAdditions,additionalTemplate:u.additionalTemplate,mirrorEntitiesOnBottom:u.mirrorEntitiesOnBottom,regularArcTextVerticalAlignment:u.regularArcTextVerticalAlignment}))}catch(t){n(i,t)}},translateMsc:function(t,e,i,a,s){var u=e||{};o.defaults(u,{inputType:"mscgen",outputType:"json"});try{n(i,null,function(){return"ast"===u.outputType?a(u.inputType).parse(t):"json"===u.outputType?JSON.stringify(a(u.inputType).parse(t),null,"  "):s(u.outputType).render(r(t,u.inputType,a))}())}catch(t){n(i,t)}},version:"1.15.1",getAllowedValues:function(){return Object.freeze({inputType:[{name:"mscgen",experimental:!1},{name:"msgenny",experimental:!1},{name:"xu",experimental:!1},{name:"json",experimental:!1},{name:"ast",experimental:!1}],outputType:[{name:"mscgen",experimental:!1},{name:"msgenny",experimental:!1},{name:"xu",experimental:!1},{name:"json",experimental:!1},{name:"ast",experimental:!1},{name:"dot",experimental:!1},{name:"doxygen",experimental:!1}],regularArcTextVerticalAlignment:[{name:"above",experimental:!0},{name:"middle",experimental:!1},{name:"below",experimental:!0}],namedStyle:i.namedStyles.map(function(t){return{name:t.name,description:t.description,experimental:t.experimental,deprecated:t.deprecated}})})}}}),r("index",["require","./main/static-resolver","./main/index"],function(t){"use strict";var e=t("./main/static-resolver"),r=t("./main/index");return{renderMsc:function(t,n,o){r.renderMsc(t,n,o,e.getParser,e.getGraphicsRenderer)},translateMsc:function(t,n,o){r.translateMsc(t,n,o,e.getParser,e.getTextRenderer)},version:r.version,getAllowedValues:r.getAllowedValues,getParser:e.getParser,getGraphicsRenderer:e.getGraphicsRenderer,getTextRenderer:e.getTextRenderer}}),e("index")});